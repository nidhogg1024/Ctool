import{u as A,i as B}from"./action-YmMChBHQ.js";import{d as E,L,A as N,M as _,S as g,k as y,x as s,w as i,r as a,v as O,j as o,n as h,l as v,m as x,c as q,ae as D,R as I,Y as R,a as p}from"./tool-B4oZh9Hj.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-mathjs-__1x7LJv.js";import"./vendor-monaco-DSX5bDTJ.js";import"./vendor-lodash-rhkwYG98.js";const U={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},b={style:{display:"grid","grid-template-columns":"1fr 80px","column-gap":"5px"}},M={key:0,style:{"text-align":"center"}},P=E({__name:"Ip",async setup(T){let r,c;const k=/((^\s*(((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]))\s*$)|(^\s*((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:)(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))/gi,e=A(([r,c]=L(()=>B({input:"",option:R("json"),result:""},{paste:t=>k.test(t)||t==="localhost"})),r=await r,c(),r));let l=N(!1);const u=_(()=>e.current.result===""?g.empty():g.formObject(e.current.result)),m=_(()=>!u.value.isEmpty()||u.value.isError()),V=()=>{e.current.input="localhost",f()},f=()=>{l.value=!0,D({url:"https://get.geojs.io/v1/ip/geo.json",params:e.current.input!=="localhost"?{ip:e.current.input}:{}}).then(({data:t})=>{e.current.result=I.isArray(t)&&t.length<2?t[0]:t,e.save()}).catch(t=>{e.current.result={error:$error(t,!1)},e.save()}).then(()=>{l.value=!1})};return(t,n)=>{const j=a("Input"),z=a("Display"),S=a("Button"),$=a("Link"),C=a("SerializeOutput"),w=a("Align");return p(),y("div",U,[s(w,{width:600,direction:"vertical"},{default:i(()=>[O("div",b,[s(z,{type:"general",text:o(e).current.input===""?t.$t("ip_local"):"",onClick:V,position:"right-center"},{default:i(()=>[s(j,{modelValue:o(e).current.input,"onUpdate:modelValue":n[0]||(n[0]=d=>o(e).current.input=d),size:"large",placeholder:t.$t("ip_input")},null,8,["modelValue","placeholder"])]),_:1},8,["text"]),s(S,{type:"primary",loading:o(l),size:"large",onClick:f},{default:i(()=>[h(v(t.$t("ip_query")),1)]),_:1},8,["loading"])]),m.value?x("",!0):(p(),y("div",M,[s($,{href:"https://geojs.io/"},{default:i(()=>[h(v(t.$t("ip_info_source"))+": https://geojs.io/",1)]),_:1})])),m.value?(p(),q(C,{key:1,allow:["json","xml","yaml","toml","php_array","properties","http_query_string"],content:u.value,height:300,modelValue:o(e).current.option,"onUpdate:modelValue":n[1]||(n[1]=d=>o(e).current.option=d),onSuccess:n[2]||(n[2]=d=>o(e).save())},null,8,["content","modelValue"])):x("",!0)]),_:1})])}}});export{P as default};
