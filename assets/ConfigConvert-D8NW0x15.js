import{u as S,i as j}from"./action-BZ3Nddn_.js";import{d as $,W as P,L as E,A as k,D as q,c as B,w as f,r as c,a as F,x as l,j as o,N as D,k as T,G as N,P as O,V as U,S as n}from"./tool-BLEDneDs.js";import{u as x}from"./transfer-BUhTrz1n.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-mathjs-__1x7LJv.js";import"./vendor-monaco-DSX5bDTJ.js";import"./vendor-lodash-rhkwYG98.js";const I=$({__name:"ConfigConvert",async setup(H){let m,h;const g=["json","yaml","toml","xml","csv","properties","html_table","http_query_string","php_array","php_serialize"].map(r=>({value:r,label:P(r)})),y=r=>({json:"json",yaml:"yaml",toml:"toml",xml:"xml",csv:"csv",properties:"properties",html_table:"html_table",http_query_string:"http_query_string",php_array:"php_array",php_serialize:"php_serialize"})[r]||"text",v=x(),e=S(([m,h]=E(()=>j({input:"",sourceFormat:"json",targetFormat:"yaml"})),m=await m,h(),m));if(v.hasData()){const r=v.consume();e.current.input=r.data,e.current.sourceFormat=r.sourceFormat}const b=(r,t)=>{switch(t){case"json":return n.formJson(r);case"yaml":return n.formYaml(r);case"toml":return n.formToml(r);case"properties":return n.formProperties(r);case"csv":return n.formCsv(r);case"xml":return n.formXml(r);case"html_table":return n.formTable(r);case"http_query_string":return n.formQueryString(r);case"php_array":return n.formPhpArray(r);case"php_serialize":return n.formPhpSerialize(r)}},d=r=>{const t=r.content();return Array.isArray(t)?r:n.formObject([t])},w=(r,t)=>{switch(t){case"json":return r.toJson();case"yaml":return r.toYaml();case"toml":return r.toToml();case"properties":return r.toProperties();case"csv":return d(r).toCsv();case"xml":return r.toXml();case"html_table":return d(r).toTable();case"http_query_string":return r.toQueryString();case"php_array":return r.toPhpArray();case"php_serialize":return r.toPhpSerialize()}};let i=k("");const z=()=>{const r=i.value,t=e.current.sourceFormat;e.current.sourceFormat=e.current.targetFormat,e.current.targetFormat=t,r&&!r.startsWith("Error")&&(e.current.input=r)};return q(()=>({input:e.current.input,source:e.current.sourceFormat,target:e.current.targetFormat}),async({input:r,source:t,target:u})=>{i.value="";const p=r.trim();if(p)try{const a=b(p,t);if(a.isError()){i.value=a.error();return}if(a.isEmpty())return;const _=w(a,u);i.value=await U.simple(u,"beautify",_),e.save()}catch(a){i.value=$error(a)}},{immediate:!0,deep:!0}),(r,t)=>{const u=c("Select"),p=c("Button"),a=c("Align"),_=c("Editor"),C=c("HeightResize"),V=O("row");return F(),B(a,{direction:"vertical"},{default:f(()=>[l(a,{horizontal:"center",class:"ctool-page-option"},{default:f(()=>[l(u,{modelValue:o(e).current.sourceFormat,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).current.sourceFormat=s),options:o(g),label:r.$t("configConvert_source")},null,8,["modelValue","options","label"]),l(p,{text:"â‡„",onClick:z}),l(u,{modelValue:o(e).current.targetFormat,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).current.targetFormat=s),options:o(g),label:r.$t("configConvert_target")},null,8,["modelValue","options","label"])]),_:1}),l(C,{reduce:5,append:[".ctool-page-option"]},{default:f(({height:s})=>[D((F(),T("div",{style:N({height:`${s}px`})},[l(_,{modelValue:o(e).current.input,"onUpdate:modelValue":t[2]||(t[2]=A=>o(e).current.input=A),lang:y(o(e).current.sourceFormat),height:`${s}px`,placeholder:r.$t("configConvert_source")},null,8,["modelValue","lang","height","placeholder"]),l(_,{"model-value":o(i),lang:y(o(e).current.targetFormat),height:`${s}px`,placeholder:r.$t("configConvert_target")},null,8,["model-value","lang","height","placeholder"])],4)),[[V,"1-1"]])]),_:1})]),_:1})}}});export{I as default};
