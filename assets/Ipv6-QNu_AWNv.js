import{u as k,i as tt}from"./action-C9DPVdj4.js";import{S as C,d as et,L as nt,A as O,D as F,M as I,R as H,k as rt,x as u,w as f,j as c,c as R,m as W,F as lt,r as g,a as M,v as T,n as ot,l as it,Y as ut}from"./tool-COZZpXVR.js";import{I as S}from"./Item-D13X9LDn.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-mathjs-__1x7LJv.js";import"./vendor-monaco-DSX5bDTJ.js";import"./vendor-lodash-rhkwYG98.js";const B=function(n){_(n),n=n.toLowerCase();const r=n.split(/\:\:/g);if(r.length>2)throw new Error("Invalid address: "+n);let e=[];if(r.length===1){if(e=n.split(/\:/g),e.length!==8)throw new Error("Invalid address: "+n)}else if(r.length===2){const t=r[0],l=r[1],i=t.split(/\:/g),p=l.split(/\:/g);for(let a in i)e[a]=i[a];for(let a=p.length;a>0;--a)e[7-(p.length-a)]=p[a-1]}for(let t=0;t<8;++t)e[t]===void 0&&(e[t]="0000"),e[t]=x(e[t],"0",4);return e.join(":")},$=function(n){_(n),n=B(n),n=n.replace(/0000/g,"g"),n=n.replace(/\:000/g,":"),n=n.replace(/\:00/g,":"),n=n.replace(/\:0/g,":"),n=n.replace(/g/g,"0");const r=n.split(/\:/g);let e=!1,t=-1,l=0,i=-1,p=0;for(let a=0;a<8;++a){const b=r[a];let m=b==="0";m&&!e&&(i=a),!m&&e&&(p=a-i),p>1&&p>l&&(t=i,l=p),e=b==="0"}return e&&(p=8-i),p>1&&p>l&&(t=i,l=p),t>=0&&l>1&&r.splice(t,l,"g"),n=r.join(":"),n=n.replace(/\:g\:/g,"::"),n=n.replace(/\:g/g,"::"),n=n.replace(/g\:/g,"::"),n=n.replace(/g/g,"::"),n},_=function(n){const r=[],e=n.split("::");if(e.length>2)throw new Error("Invalid address: "+n);if(e.length===2){if(e[0].startsWith(":")||e[0].endsWith(":")||e[1].startsWith(":")||e[1].endsWith(":"))throw new Error("Invalid address: "+n);if(r.push(...e[0].split(":").filter(t=>t)),r.push(...e[1].split(":").filter(t=>t)),r.length>7)throw new Error("Invalid address: "+n)}else if(e.length===1&&(r.push(...e[0].split(":").filter(t=>t)),r.length!==8))throw new Error("Invalid address: "+n);for(const t of r){const l=t.match(/^[a-f0-9]{1,4}$/i);if((l==null?void 0:l[0])!==t)throw new Error("Invalid address: "+n)}},x=function(n,r,e){const t=r.repeat(e);return n.length<t.length&&(n=t.substring(0,t.length-n.length)+n),n},st=function(n){return parseInt(n,16).toString(2)},at=function(n){return parseInt(n,2).toString(16)},N=function(n){const e=B(n).split(":");let t="";for(const l of e)t+=x(st(l),"0",16);return t},v=function(n){const r=[];for(let e=0;e<8;++e){const t=n.substr(e*16,16),l=x(at(t),"0",4);r.push(l)}return r.join(":")},ct=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],a=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let h=0;h<m&&!(t&&h>=t);++h){const y=x(h.toString(2),"0",e-r),A=a+y+b,w=v(A);l?i.push($(w)):i.push(w)}return i},D=function(n,r,e,t){if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),p="0".repeat(128-e),a=i+"0".repeat(e-r)+p,b=i+"1".repeat(e-r)+p;return t?{start:$(v(a)),end:$(v(b)),size:Math.pow(2,e-r)}:{start:v(a),end:v(b),size:Math.pow(2,e-r)}},pt=function(n,r,e,t){if(typeof BigInt>"u")return D(n,r,e,t);if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),p="0".repeat(128-e),a=i+"0".repeat(e-r)+p,b=i+"1".repeat(e-r)+p;return t?{start:$(v(a)),end:$(v(b)),size:BigInt(2**(e-r)).toString()}:{start:v(a),end:v(b),size:BigInt(2**(e-r)).toString()}},dt=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,t=t||1,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],a=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let h=0;h<m&&h<t;++h){let y="";for(let o=0;o<e-r;++o)y+=Math.floor(Math.random()*2);const A=a+y+b,w=v(A);l?i.push($(w)):i.push(w)}return i},ft=function(n,r){if(_(n),r*=1,r<0||r>128||Math.floor(r/4)!=r/4)throw new Error("Invalid masks.");return B(n).replace(/:/g,"").split("").reverse().slice(0,(128-r)/4).join(".")},z={normalize:B,abbreviate:$,validate:_,divideSubnet:ct,range:D,rangeBigInt:pt,randomSubnet:dt,ptr:ft},V={normalize:n=>{try{return n!==""?z.normalize(n):""}catch(r){return $error(r)}},abbreviate:n=>{try{return n!==""?z.abbreviate(n):""}catch(r){return $error(r)}},validate:n=>(z.validate(n),!0),subnet:(n,r=32,e=64,t=8,l=!1,i=!1)=>{if(n==="")return C.empty();try{return C.formObject(i?z.randomSubnet(n,r,e,t,l):z.divideSubnet(n,r,e,t,l))}catch(p){return C.fromError($error(p))}},range:(n,r=32,e=64,t=!1)=>{if(n==="")return{start:"",end:"",size:0n};try{return z.rangeBigInt(n,r,e,t)}catch(l){return{start:$error(l),end:$error(l),size:0n}}},ptr:(n,r=32)=>{if(n==="")return"";try{return z.ptr(n,r)}catch(e){return $error(e)}}},bt={style:{display:"grid","grid-template-columns":"1fr 1fr"}},gt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},$t=et({__name:"Ipv6",async setup(n){let r,e;const t=k(([r,e]=nt(()=>tt({input:"2404:68::",mask0:32,mask1:64,limit:100,abbr:!1,random:!1,maskPtr:32,subnetOption:ut("text")},{paste:o=>{try{V.validate(o)}catch{return!1}return!0}})),r=await r,e(),r));let l=O("");const i=O(!1);F(()=>({input:t.current.input.trim()}),()=>{l.value="";try{if(t.current.input.trim()==="")throw new Error("Input Empty");V.validate(t.current.input)}catch(o){l.value=$error(o)}}),F(()=>({current:t.current}),()=>{t.current.input.trim()!==""&&t.save()},{deep:!0,immediate:!0});const p=I(()=>V.normalize(t.current.input.trim())),a=I(()=>V.abbreviate(t.current.input.trim())),b=I(()=>V.subnet(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.limit,t.current.abbr,t.current.random)),m=I(()=>V.range(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.abbr)),h=I(()=>V.ptr(t.current.input.trim(),t.current.maskPtr)),y=H.range(0,128).map(o=>({value:o,label:`/${o}`})),A=H.range(0,129,4).map(o=>({value:o,label:`/${o}`})),w=I(()=>{const o=H.range(t.current.mask0+1,129);return o.includes(t.current.mask1)||o.push(t.current.mask1),o.map(s=>({value:s,label:`/${s}`}))});return(o,s)=>{const Y=g("Input"),q=g("HelpTip"),E=g("Align"),P=g("Card"),U=g("Select"),j=g("Bool"),G=g("Button"),J=g("Exception"),L=g("HeightResize"),K=g("SerializeOutput"),Q=g("InputNumber"),X=g("ExtendPage");return M(),rt(lt,null,[u(E,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:f(()=>[u(Y,{size:"large",width:400,modelValue:c(t).current.input,"onUpdate:modelValue":s[0]||(s[0]=d=>c(t).current.input=d),label:o.$t("ipcalc_ip")},null,8,["modelValue","label"]),u(q,{link:"https://www.npmjs.com/package/ip6"})]),_:1}),c(l)===""?(M(),R(E,{key:0,direction:"vertical"},{default:f(()=>[u(P,{title:o.$t("ipcalc_ip_info"),padding:"0"},{extra:f(()=>[ot(it(c(t).current.input),1)]),default:f(()=>[T("div",bt,[u(S,{title:o.$t("ipcalc_ip_info_full"),value:p.value},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_ip_info_short"),value:a.value},null,8,["title","value"])])]),_:1},8,["title"]),u(P,{title:o.$t("ipcalc_network_info"),padding:"0"},{extra:f(()=>[u(E,null,{default:f(()=>[u(U,{size:"small",options:c(y),modelValue:c(t).current.mask0,"onUpdate:modelValue":s[1]||(s[1]=d=>c(t).current.mask0=d)},null,8,["options","modelValue"]),u(U,{size:"small",options:w.value,modelValue:c(t).current.mask1,"onUpdate:modelValue":s[2]||(s[2]=d=>c(t).current.mask1=d)},null,8,["options","modelValue"]),u(j,{type:"primary",size:"small",modelValue:c(t).current.abbr,"onUpdate:modelValue":s[3]||(s[3]=d=>c(t).current.abbr=d),label:o.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),u(G,{type:"primary",size:"small",text:o.$t("ipcalc_subnet"),onClick:s[4]||(s[4]=d=>i.value=!0)},null,8,["text"])]),_:1})]),default:f(()=>[T("div",gt,[u(S,{title:o.$t("ipcalc_network_info_size"),value:`${m.value.size}`},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_network_info_first"),value:m.value.start},null,8,["title","value"]),u(S,{title:o.$t("ipcalc_network_info_last"),value:m.value.end},null,8,["title","value"])])]),_:1},8,["title"]),u(P,{title:o.$t("ipcalc_ip_info_ptr")},{extra:f(()=>[u(U,{size:"small",options:c(A),modelValue:c(t).current.maskPtr,"onUpdate:modelValue":s[5]||(s[5]=d=>c(t).current.maskPtr=d)},null,8,["options","modelValue"])]),default:f(()=>[u(S,{value:h.value},null,8,["value"])]),_:1},8,["title"])]),_:1})):W("",!0),c(l)!==""?(M(),R(L,{key:1,append:[".ctool-page-option"]},{default:f(()=>[u(J,{content:c(l)},null,8,["content"])]),_:1})):W("",!0),u(X,{modelValue:i.value,"onUpdate:modelValue":s[10]||(s[10]=d=>i.value=d)},{default:f(()=>[u(P,{title:`${c(t).current.input} ${o.$t("ipcalc_subnet")}`,padding:"0"},{extra:f(()=>[u(E,null,{default:f(()=>[u(Q,{size:"small",width:120,modelValue:c(t).current.limit,"onUpdate:modelValue":s[7]||(s[7]=d=>c(t).current.limit=d),label:o.$t("ipcalc_limit")},null,8,["modelValue","label"]),u(j,{type:"primary",size:"small",modelValue:c(t).current.abbr,"onUpdate:modelValue":s[8]||(s[8]=d=>c(t).current.abbr=d),label:o.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),u(j,{type:"primary",size:"small",modelValue:c(t).current.random,"onUpdate:modelValue":s[9]||(s[9]=d=>c(t).current.random=d),label:o.$t("ipcalc_random"),border:""},null,8,["modelValue","label"])]),_:1})]),default:f(()=>[u(L,{reduce:35},{default:f(({height:d})=>[u(K,{"disabled-border":"",modelValue:c(t).current.subnetOption,"onUpdate:modelValue":s[6]||(s[6]=Z=>c(t).current.subnetOption=Z),allow:["json","xml","yaml","toml","php_array","properties","text"],content:b.value,height:d},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{$t as default};
