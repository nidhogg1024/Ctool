import{u as j,i as F}from"./action-C9DPVdj4.js";import{d as q,aa as u,L as O,A as G,D as J,M as a,k as g,x as i,w as m,F as w,r as p,q as M,c as x,j as n,m as K,R as Q,N as W,P as X,a as l}from"./tool-COZZpXVR.js";import{u as Z,t as ee,r as te,a as E}from"./timezone-DBXtpW02.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-mathjs-__1x7LJv.js";import"./vendor-monaco-DSX5bDTJ.js";import"./vendor-lodash-rhkwYG98.js";const ne={key:1},z="large",me=q({__name:"Timezone",async setup(re){let _,h;u.extend(Z),u.extend(ee);const H=["Asia/Shanghai","Europe/London","Asia/Tokyo","America/Chicago","Europe/Berlin","Africa/Cairo","Asia/Calcutta"],Y=t=>new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+$/).test(t.trim())||new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+\.\d+$/).test(t.trim()),e=j(([_,h]=O(()=>F({type:"",input:"",timezone:[...new Set([te(u.tz.guess()),...H])].slice(0,7)},{paste:!1})),_=await _,h(),_)),$=G(!1),s=t=>{if(!e.current.type||e.current.input.trim()==="")return"";if(e.current.type===t)return e.current.input;try{if(!y.value)throw new Error($t("time_error_format"));return k(e.current.input,e.current.type,t)}catch(o){return $error(o)}},c=(t,o)=>{e.current.input=o,e.current.type=t};J(()=>e.current,t=>{!Y(t.input)||t.type===""||e.save()},{immediate:!0,deep:!0});const y=a(()=>Y(e.current.input.trim())),k=(t,o,d)=>t.includes(".")?u.tz(u.tz(t,o),d).format("YYYY-MM-DD HH:mm:ss.SSS"):u.tz(u.tz(t,o),d).format("YYYY-MM-DD HH:mm:ss"),S=()=>{e.current.type=e.current.timezone[0],e.current.input=u.tz(u(),e.current.type).format("YYYY-MM-DD HH:mm:ss")},B=a({get:()=>s(e.current.timezone[0]),set:t=>c(e.current.timezone[0],t)}),U=a({get:()=>s(e.current.timezone[1]),set:t=>c(e.current.timezone[1],t)}),b=a({get:()=>s(e.current.timezone[2]),set:t=>c(e.current.timezone[2],t)}),L=a({get:()=>s(e.current.timezone[3]),set:t=>c(e.current.timezone[3],t)}),T=a({get:()=>s(e.current.timezone[4]),set:t=>c(e.current.timezone[4],t)}),I=a({get:()=>s(e.current.timezone[5]),set:t=>c(e.current.timezone[5],t)}),N=a({get:()=>s(e.current.timezone[6]),set:t=>c(e.current.timezone[6],t)}),C={output0:B,output1:U,output2:b,output3:L,output4:T,output5:I,output6:N};return(t,o)=>{const d=p("Input"),D=p("Select"),f=p("Button"),V=p("Align"),A=p("Display"),P=p("ExtendPage"),R=X("row");return l(),g(w,null,[i(V,{direction:"vertical"},{default:m(()=>[(l(!0),g(w,null,M(n(Q.range)(0,7),r=>(l(),x(A,{position:"right-center"},{extra:m(()=>[i(V,null,{default:m(()=>[i(D,{modelValue:n(e).current.timezone[r],"onUpdate:modelValue":v=>n(e).current.timezone[r]=v,options:n(E),size:"small",filterable:!0,disabled:n(y)&&n(e).current.timezone[r]===n(e).current.type},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),n(y)?(l(),x(f,{key:0,text:t.$t("main_ui_copy"),onClick:v=>t.$copy(C[`output${r}`].value),size:"small",type:"primary"},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),default:m(()=>[i(d,{modelValue:C[`output${r}`].value,"onUpdate:modelValue":v=>C[`output${r}`].value=v,placeholder:t.$t("time_timezone_input_placeholder"),size:z},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),n(y)?W((l(),g("div",ne,[i(f,{size:z,onClick:o[0]||(o[0]=r=>$.value=!0),text:t.$t("main_ui_more")},null,8,["text"]),i(f,{size:z,onClick:o[1]||(o[1]=r=>n(e).current.input=""),text:t.$t("main_ui_clear")},null,8,["text"])])),[[R,"1-100px"]]):(l(),x(f,{key:0,size:z,text:t.$t("time_current_time"),onClick:S},null,8,["text"]))]),_:1}),i(P,{modelValue:$.value,"onUpdate:modelValue":o[2]||(o[2]=r=>$.value=r)},{default:m(()=>[i(V,{direction:"vertical"},{default:m(()=>[(l(!0),g(w,null,M(n(E),r=>(l(),x(A,{position:"right-center",text:r.label,type:r.value===n(e).current.type?"danger":"general",onClick:()=>t.$copy(k(n(e).current.input,n(e).current.type,r.value))},{default:m(()=>[i(d,{"model-value":k(n(e).current.input,n(e).current.type,r.value),size:z},null,8,["model-value"])]),_:2},1032,["text","type","onClick"]))),256))]),_:1})]),_:1},8,["modelValue"])],64)}}});export{me as default};
