import{u as Q,i as j}from"./action-b9s92FRn.js";import{K as H,N as g,d as A,ad as m,y as E,z as W,D as I,c as F,w as h,r as M,f as S,v as o,j as u,s as q,n as R,l as C}from"./tool-BVT50QXb.js";import"./modulepreload-polyfill-B5Qt9EMX.js";var U={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(g,function(){var d="month",l="quarter";return function(n,c){var p=c.prototype;p.quarter=function(r){return this.$utils().u(r)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(r-1))};var y=p.add;p.add=function(r,t){return r=Number(r),this.$utils().p(t)===l?this.add(3*r,d):y.bind(this)(r,t)};var $=p.startOf;p.startOf=function(r,t){var e=this.$utils(),i=!!e.u(t)||t;if(e.p(r)===l){var s=this.quarter()-1;return i?this.month(3*s).startOf(d).startOf("day"):this.month(3*s+2).endOf(d).endOf("day")}return $.bind(this)(r,t)}}})})(U);var G=U.exports;const K=H(G);var N={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(g,function(){return function(d,l,n){l.prototype.dayOfYear=function(c){var p=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return c==null?p:this.add(c-p,"day")}}})})(N);var T=N.exports;const J=H(T);var B={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(g,function(){var d="day";return function(l,n,c){var p=function(r){return r.add(4-r.isoWeekday(),d)},y=n.prototype;y.isoWeekYear=function(){return p(this).year()},y.isoWeek=function(r){if(!this.$utils().u(r))return this.add(7*(r-this.isoWeek()),d);var t,e,i,s,O=p(this),v=(t=this.isoWeekYear(),e=this.$u,i=(e?c.utc:c)().year(t).startOf("year"),s=4-i.isoWeekday(),i.isoWeekday()>4&&(s+=7),i.add(s,d));return O.diff(v,"week")+1},y.isoWeekday=function(r){return this.$utils().u(r)?this.day()||7:this.day(this.day()%7?r:r-7)};var $=y.startOf;y.startOf=function(r,t){var e=this.$utils(),i=!!e.u(t)||t;return e.p(r)==="isoweek"?i?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):$.bind(this)(r,t)}}})})(B);var L=B.exports;const P=H(L),et=A({__name:"Calculator",async setup(Y){let x,d;m.extend(K),m.extend(J),m.extend(P);const l=m(),n=Q(([x,d]=E(()=>j({poor:{input1:l.format("YYYY-MM-DD HH:mm:ss"),input2:l.add(1,"d").format("YYYY-MM-DD HH:mm:ss"),unit:"seconds"},operation:{input:l.format("YYYY-MM-DD HH:mm:ss"),unit:"days",type:"+",length:1},analyze:{type:"year",input:l.format("YYYY-MM-DD HH:mm:ss")}})),x=await x,d(),x)),c=[{value:"years",label:$t("time_year"),rate:0},{value:"months",label:$t("time_month"),rate:0},{value:"weeks",label:$t("time_week"),rate:1e3*60*60*24*7},{value:"days",label:$t("time_day"),rate:1e3*60*60*24},{value:"hours",label:$t("time_hour"),rate:1e3*60*60},{value:"minutes",label:$t("time_minute"),rate:1e3*60},{value:"seconds",label:$t("time_second"),rate:1e3}],p=t=>{for(let e of c)if(e.value===t)return e.rate;return 0},y=W(()=>{const t=m(n.current.poor.input2).diff(m(n.current.poor.input1),n.current.poor.unit,!0);return parseFloat(t.toFixed(2))}),$=W(()=>{if(!n.current.operation.length)return"";let t=p(n.current.operation.unit);if(t===0){const e=n.current.operation.type==="+"?"add":"subtract";return m(n.current.operation.input)[e](n.current.operation.length,n.current.operation.unit).format("YYYY-MM-DD HH:mm:ss")}return m(m(n.current.operation.input).valueOf()+t*n.current.operation.length*(n.current.operation.type==="+"?1:-1)).format("YYYY-MM-DD HH:mm:ss")}),r=W(()=>{let t=m(n.current.analyze.input);const e=t.year(),i=t.quarter();if(n.current.analyze.type==="quarter"){const f=m(`${t.year()}-${(i-1)*3+1}-01`),V=Math.ceil((t.unix()-f.unix())/(86400*7)),b=Math.ceil((t.unix()-f.unix())/86400),w=Math.ceil((t.unix()-f.unix())/3600),z=Math.ceil((t.unix()-f.unix())/60),D=t.unix()-f.unix();return $t("time_analyze_quarter_output",{quarter:i,weekOfQuarter:V,dayOfQuarter:b,hourOfQuarter:w,minuteOfQuarter:z,secondOfQuarter:D})}if(n.current.analyze.type==="month"){const f=t.month()+1,V=m(`${t.year()}-${f}-01`),b=Math.ceil((t.unix()-V.unix())/(86400*7)),w=Math.ceil((t.unix()-V.unix())/3600),z=Math.ceil((t.unix()-V.unix())/60),D=t.unix()-V.unix();return $t("time_analyze_month_output",{month:f,weekOfMonth:b,hourOfMonth:w,minuteOfMonth:z,secondOfMonth:D})}const s=m(t.year()+"-01-01"),O=t.isoWeek(),v=t.dayOfYear(),k=Math.ceil((t.unix()-s.unix())/3600),_=Math.ceil((t.unix()-s.unix())/60),a=t.unix()-s.unix();return $t("time_analyze_year_output",{year:e,quarter:i,weekOfYear:O,dayOfYear:v,hourOfYear:k,minuteOfYear:_,secondOfYear:a})});return I(()=>n.current,()=>{n.save()},{immediate:!0,deep:!0}),(t,e)=>{const i=M("Input"),s=M("Select"),O=M("InputNumber"),v=M("Align"),k=M("Card"),_=M("Button");return S(),F(v,{direction:"vertical"},{default:h(()=>[o(k,{title:t.$t("time_diff_tool")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(n).current.poor.input1,"onUpdate:modelValue":e[0]||(e[0]=a=>u(n).current.poor.input1=a),width:170},null,8,["modelValue"]),e[11]||(e[11]=q("span",null,"与",-1)),o(i,{center:"",modelValue:u(n).current.poor.input2,"onUpdate:modelValue":e[1]||(e[1]=a=>u(n).current.poor.input2=a),width:170},null,8,["modelValue"]),e[12]||(e[12]=q("span",null,"相差",-1)),o(O,{center:"","model-value":y.value,width:160},{append:h(()=>[o(s,{modelValue:u(n).current.poor.unit,"onUpdate:modelValue":e[2]||(e[2]=a=>u(n).current.poor.unit=a),options:c.map(({value:a,label:f})=>({value:a,label:f}))},null,8,["modelValue","options"])]),_:1},8,["model-value"])]),_:1})]),_:1},8,["title"]),o(k,{title:t.$t("time_operation")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(n).current.operation.input,"onUpdate:modelValue":e[3]||(e[3]=a=>u(n).current.operation.input=a),width:170},null,8,["modelValue"]),o(s,{modelValue:u(n).current.operation.type,"onUpdate:modelValue":e[4]||(e[4]=a=>u(n).current.operation.type=a),options:[{value:"+",label:t.$t("time_add")},{value:"-",label:t.$t("time_reduce")}]},null,8,["modelValue","options"]),o(O,{center:"",modelValue:u(n).current.operation.length,"onUpdate:modelValue":e[6]||(e[6]=a=>u(n).current.operation.length=a),width:160},{append:h(()=>[o(s,{modelValue:u(n).current.operation.unit,"onUpdate:modelValue":e[5]||(e[5]=a=>u(n).current.operation.unit=a),options:c.map(({value:a,label:f})=>({value:a,label:f}))},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),q("span",null,[R(C(t.$t("time_after"))+", "+C(t.$t("time_is"))+" ",1),o(_,{onClick:e[7]||(e[7]=a=>t.$copy($.value)),type:"dotted",text:$.value},null,8,["text"])])]),_:1})]),_:1},8,["title"]),o(k,{title:t.$t("time_analyze")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(n).current.analyze.input,"onUpdate:modelValue":e[8]||(e[8]=a=>u(n).current.analyze.input=a),width:170},null,8,["modelValue"]),o(s,{modelValue:u(n).current.analyze.type,"onUpdate:modelValue":e[9]||(e[9]=a=>u(n).current.analyze.type=a),options:[{value:"year",label:t.$t("time_analyze_year")},{value:"quarter",label:t.$t("time_analyze_quarter")},{value:"month",label:t.$t("time_analyze_month")}]},null,8,["modelValue","options"]),o(_,{onClick:e[10]||(e[10]=a=>t.$copy(r.value)),type:"dotted",text:r.value},null,8,["text"])]),_:1})]),_:1},8,["title"])]),_:1})}}});export{et as default};
