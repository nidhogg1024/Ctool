import{u as I,i as K}from"./action-CRJh3H4I.js";import{aa as M,d as P,y as Q,I as C,z as Z,D as F,o as H,k as N,v as t,w as r,j as a,R as E,F as q,r as c,B as Y,f as w,s as _,l as $,Q as W,n as B,c as X,m as ee,A as R}from"./tool-BIQGDOzf.js";import{a as T,A as ae}from"./proxy-B7iUz39N.js";import"./modulepreload-polyfill-B5Qt9EMX.js";const ne=""+new URL("run_api_config-NZt9S2PY.png",import.meta.url).href,D=[{code:"java",version:[{name:"JDK 1.8.0_66",value:"0"},{name:"JDK 9.0.1",value:"1"},{name:"JDK 10.0.1",value:"2"},{name:"JDK 11.0.4",value:"3"},{name:"JDK 17.0.1",value:"4"}]},{code:"c",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"c99",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"cpp14",version:[{name:"g++ 14 GCC 5.3.0",value:"0"},{name:"g++ 14 GCC 7.2.0",value:"1"},{name:"g++ 14 GCC 8.1.0",value:"2"},{name:"g++ 14 GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp17",version:[{name:"g++ 17 GCC 9.1.0",value:"0"},{name:"GCC 11.1.0",value:"1"}]},{code:"php",version:[{name:"5.6.16",value:"0"},{name:"7.1.11",value:"1"},{name:"7.2.5",value:"2"},{name:"7.3.10",value:"3"},{name:"8.0.13",value:"4"}]},{code:"perl",version:[{name:"5.22.0",value:"0"},{name:"5.26.1",value:"1"},{name:"5.26.2",value:"2"},{name:"5.30.0",value:"3"},{name:"5.34.0",value:"4"}]},{code:"python2",version:[{name:"2.7.11",value:"0"},{name:"2.7.15",value:"1"},{name:"2.7.16",value:"2"},{name:"2.7.18",value:"3"}]},{code:"python3",version:[{name:"3.5.1",value:"0"},{name:"3.6.3",value:"1"},{name:"3.6.5",value:"2"},{name:"3.7.4",value:"3"},{name:"3.9.9",value:"4"}]},{code:"ruby",version:[{name:"2.2.4",value:"0"},{name:"2.4.2p198",value:"1"},{name:"2.5.1p57",value:"2"},{name:"2.6.5",value:"3"},{name:"3.0.2",value:"4"}]},{code:"go",version:[{name:"1.5.2",value:"0"},{name:"1.9.2",value:"1"},{name:"1.10.2",value:"2"},{name:"1.13.1",value:"3"},{name:"1.17.3",value:"4"}]},{code:"scala",version:[{name:"2.12.0",value:"0"},{name:"2.12.4",value:"1"},{name:"2.12.5",value:"2"},{name:"2.13.0",value:"3"},{name:"2.13.6",value:"4"}]},{code:"bash",version:[{name:"4.3.42",value:"0"},{name:"4.4.12",value:"1"},{name:"4.4.19",value:"2"},{name:"5.0.011",value:"3"},{name:"5.1.12",value:"4"}]},{code:"sql",version:[{name:"SQLite 3.9.2",value:"0"},{name:"SQLite 3.21.0",value:"1"},{name:"SQLite 3.23.1",value:"2"},{name:"SQLite 3.29.0",value:"3"},{name:"3.37.0",value:"4"}]},{code:"pascal",version:[{name:"fpc 3.0.0",value:"0"},{name:"fpc-3.0.2",value:"1"},{name:"fpc-3.0.4",value:"2"},{name:"fpc-3.2.2",value:"3"}]},{code:"csharp",version:[{name:"mono 4.2.2",value:"0"},{name:"mono 5.0.0",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono-6.12.0",value:"4"}]},{code:"vbn",version:[{name:"mono 4.0.1",value:"0"},{name:"mono 4.6",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono 6.12.0",value:"4"}]},{code:"haskell",version:[{name:"ghc 7.10.3",value:"0"},{name:"ghc 8.2.1",value:"1"},{name:"ghc 8.2.2",value:"2"},{name:"ghc 8.6.5",value:"3"},{name:"9.0.1",value:"4"}]},{code:"objc",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"swift",version:[{name:"2.2",value:"0"},{name:"3.1.1",value:"1"},{name:"4.1",value:"2"},{name:"5.1",value:"3"},{name:"5.5",value:"4"}]},{code:"groovy",version:[{name:"2.4.6 JVM: 1.7.0_99",value:"0"},{name:"2.4.12 JVM: 9.0.1",value:"1"},{name:"2.4.15 JVM: 10.0.1",value:"2"},{name:"2.5.8 JVM: 11.0.4",value:"3"},{name:"3.0.9 JVM: 17.0.1",value:"4"}]},{code:"fortran",version:[{name:"GNU 5.3.0",value:"0"},{name:"GNU 7.2.0",value:"1"},{name:"GNU 8.1.0",value:"2"},{name:"GNU 9.1.0",value:"3"},{name:"GNU 11.1.0",value:"4"}]},{code:"brainfuck",version:[{name:"bfc-0.1",value:"0"}]},{code:"lua",version:[{name:"5.3.2",value:"0"},{name:"5.3.4",value:"1"},{name:"5.3.5",value:"2"},{name:"5.4.3",value:"3"}]},{code:"tcl",version:[{name:"8.6",value:"0"},{name:"8.6.7",value:"1"},{name:"8.6.8",value:"2"},{name:"8.6.9",value:"3"},{name:"8.6.12",value:"4"}]},{code:"rust",version:[{name:"1.10.0",value:"0"},{name:"1.21.0",value:"1"},{name:"1.25.0",value:"2"},{name:"1.38.0",value:"3"},{name:"1.56.1",value:"4"}]},{code:"d",version:[{name:"DMD64 D Compiler v2.071.1",value:"0"},{name:"DMD64 D Compiler v2.088",value:"1"},{name:"DMD64 D Compiler v2.098",value:"2"}]},{code:"r",version:[{name:"3.3.1",value:"0"},{name:"3.4.2",value:"1"},{name:"3.5.0",value:"2"},{name:"3.6.1",value:"3"},{name:"4.1.2",value:"4"}]},{code:"verilog",version:[{name:"10.1",value:"0"},{name:"10.2",value:"1"},{name:"10.3",value:"2"},{name:"11",value:"3"}]},{code:"cobol",version:[{name:"GNU COBOL 2.0.0",value:"0"},{name:"GNU COBOL 2.2.0",value:"1"},{name:"GNU COBOL 3.0",value:"2"},{name:"GNU COBOL 3.1.2",value:"3"}]},{code:"dart",version:[{name:"1.18.0",value:"0"},{name:"1.24.2",value:"1"},{name:"1.24.3",value:"2"},{name:"2.5.1",value:"3"},{name:"2.14.4",value:"4"}]},{code:"clojure",version:[{name:"1.8.0",value:"0"},{name:"1.9.0",value:"1"},{name:"1.10.1",value:"2"},{name:"1.10.3",value:"3"}]},{code:"nodejs",version:[{name:"node 6.3.1",value:"0"},{name:"node 9.2.0",value:"1"},{name:"node 10.1.0",value:"2"},{name:"node 12.11.1",value:"3"},{name:"node 17.1.0",value:"4"}]},{code:"scheme",version:[{name:"Gauche 0.9.4",value:"0"},{name:"Gauche 0.9.5",value:"1"},{name:"Gauche 0.9.8",value:"2"},{name:"Gauche 0.9.10",value:"3"}]},{code:"forth",version:[{name:"gforth 0.7.3",value:"0"}]},{code:"octave",version:[{name:"GNU 4.0.0",value:"0"},{name:"GNU 4.2.1",value:"1"},{name:"GNU 4.4.0",value:"2"},{name:"GNU 5.1.0",value:"3"},{name:"GNU 6.4.0",value:"4"}]},{code:"coffeescript",version:[{name:"1.11.1",value:"0"},{name:"2.0.0",value:"1"},{name:"2.3.0",value:"2"},{name:"2.4.1",value:"3"},{name:"2.6.1",value:"4"}]},{code:"fsharp",version:[{name:"4.1",value:"0"},{name:"4.5.0",value:"1"}]},{code:"ocaml",version:[{name:"4.03.0",value:"0"},{name:"4.08.1",value:"1"},{name:"4.12.0",value:"2"}]},{code:"factor",version:[{name:"8.25",value:"0"},{name:"8.28",value:"1"},{name:"8.29",value:"2"},{name:"8.31",value:"3"}]},{code:"smalltalk",version:[{name:"GNU SmallTalk 3.2.92",value:"0"}]},{code:"kotlin",version:[{name:"1.1.51 (JRE 9.0.1+11)",value:"0"},{name:"1.2.40 (JRE 10.0.1)",value:"1"},{name:"1.3.50 (JRE 11.0.4)",value:"2"},{name:"1.6.0 (JRE 17.0.1+12)",value:"3"}]},{code:"erlang",version:[{name:"22.1",value:"0"},{name:"24",value:"1"}]},{code:"haxe",version:[{name:"4.2.4",value:"0"}]}],le=i=>{for(let m of D)if(i===m.code)return m;throw new Error(`not found ${i} language`)},x=()=>{const i=M.get("code_run_config");return i!==null?i:{client_id:"",client_secret:""}},ue=(i,m)=>{M.setNoVersion("code_run_config",{client_id:i,client_secret:m})},te=()=>new Promise((i,m)=>{const s=x();if(s.client_secret===""||s.client_id==="")return m("not found config");T().post("https://api.jdoodle.com/v1/credit-spent",{clientId:s.client_id,clientSecret:s.client_secret}).then(e=>i(+`${e.data.used}`)).catch(function(e){m(e)})}),oe=async(i,m,s)=>new Promise((e,v)=>{const d=x();if(d.client_secret===""||d.client_id==="")return v("not found config");T().post("https://api.jdoodle.com/v1/execute",{clientId:d.client_id,clientSecret:d.client_secret,script:m,language:i,versionIndex:s}).then(u=>(u.data.error&&v(`[${u.data.statusCode}]${u.data.error}`),e({output:u.data.output,memory:u.data.memory,cpuTime:u.data.cpuTime,error:""}))).catch(u=>{var h,g,p,y;let G=u;return u instanceof ae&&(g=(h=u.response)==null?void 0:h.data)!=null&&g.error&&(G=`[${(p=u.response)==null?void 0:p.data.statusCode}]${(y=u.response)==null?void 0:y.data.error}
${u.message}`),v(G)})}),se=P({__name:"Run",async setup(i){let m,s;const e=I(([m,s]=Q(()=>K({input:"",language:"php",version:(()=>{let n={};for(let l of D)n[l.code]=l.version[l.version.length-1].value;return n})(),result:{output:"",memory:0,cpuTime:0,error:""}})),m=await m,s(),m));let v=C(!1),d=C(0),u=C(x());const G=D.map(n=>n.code).sort(),h=Z(()=>le(e.current.language).version.map(n=>({value:n.value,label:n.name})));let g=C(!1),p=C(!1);const y=()=>{try{p.value=!0,oe(e.current.language,e.current.input,e.current.version[e.current.language]).then(n=>{e.current.result=n,e.save()}).catch(n=>{e.current.result={output:"",memory:0,cpuTime:0,error:$error(n)},e.save()}).finally(()=>{p.value=!1,V()})}catch(n){e.current.result={output:"",memory:0,cpuTime:0,error:$error(n)},p.value=!1}};F(()=>({config:u.value}),({config:n})=>{ue(n.client_id,n.client_secret),V()},{deep:!0});const V=()=>{u.value.client_id===""||u.value.client_secret===""||te().then(n=>{d.value=n,g.value=!0}).catch(n=>{throw d.value=0,g.value=!1,n})};return H(()=>{V()}),(n,l)=>{const b=c("Editor"),j=c("HeightResize"),k=c("Select"),U=c("Button"),f=c("Align"),J=c("Card"),L=c("Input"),S=c("Link"),O=c("ExtendPage"),z=Y("row");return w(),N(q,null,[t(f,{direction:"vertical"},{default:r(()=>[t(j,{reduce:205},{default:r(({height:o})=>[t(b,{modelValue:a(e).current.input,"onUpdate:modelValue":l[0]||(l[0]=A=>a(e).current.input=A),lang:a(e).current.language,height:`${o}px`},null,8,["modelValue","lang","height"])]),_:1}),t(J,{title:n.$t("main_ui_output"),height:200,padding:"0"},{extra:r(()=>[t(f,null,{default:r(()=>[_("span",null,$(n.$t("code_run_used_times",[a(d)])),1),t(k,{dialog:"",size:"small",modelValue:a(e).current.language,"onUpdate:modelValue":l[1]||(l[1]=o=>a(e).current.language=o),options:a(G).map(o=>({value:o,label:a(W)(o)}))},null,8,["modelValue","options"]),t(k,{size:"small",modelValue:a(e).current.version[a(e).current.language],"onUpdate:modelValue":l[2]||(l[2]=o=>a(e).current.version[a(e).current.language]=o),options:h.value},null,8,["modelValue","options"]),t(U,{type:"primary",text:a(p)?n.$t("code_running"):n.$t("code_run"),disabled:a(p)||!a(g)||a(e).current.input==="",size:"small",onClick:l[3]||(l[3]=o=>y())},null,8,["text","disabled"]),l[8]||(l[8]=_("span",null,"|",-1)),t(U,{type:"primary",size:"small",onClick:l[4]||(l[4]=o=>E(v)?v.value=!a(v):v=!a(v))},{default:r(()=>[B($(n.$t("main_ui_setting")),1)]),_:1})]),_:1})]),default:r(()=>[t(b,{lang:"shell","model-value":a(e).current.result.error!==""?a(e).current.result.error:a(e).current.result.output},{default:r(()=>[a(e).current.result.output!==""&&a(e).current.result.error===""?(w(),X(U,{key:0,type:"dotted",size:"small",text:`Memory:${a(e).current.result.memory} Cpu Time:${a(e).current.result.cpuTime}`},null,8,["text"])):ee("",!0)]),_:1},8,["model-value"])]),_:1},8,["title"])]),_:1}),t(O,{modelValue:a(v),"onUpdate:modelValue":l[7]||(l[7]=o=>E(v)?v.value=o:v=o)},{default:r(()=>[t(J,{title:n.$t("main_ui_setting"),padding:"20px"},{default:r(()=>[t(f,{direction:"vertical",style:{"margin-bottom":"20px"}},{default:r(()=>[R((w(),N("div",null,[l[9]||(l[9]=_("strong",null,"Client ID",-1)),t(L,{modelValue:a(u).client_id,"onUpdate:modelValue":l[5]||(l[5]=o=>a(u).client_id=o)},null,8,["modelValue"])])),[[z,"130px-1"]]),R((w(),N("div",null,[l[10]||(l[10]=_("strong",null,"Client Secret",-1)),t(L,{modelValue:a(u).client_secret,"onUpdate:modelValue":l[6]||(l[6]=o=>a(u).client_secret=o)},null,8,["modelValue"])])),[[z,"130px-1"]])]),_:1}),t(f,{direction:"vertical"},{default:r(()=>[t(f,{horizontal:"center",vertical:"center"},{default:r(()=>[t(S,{href:"https://www.jdoodle.com/compiler-api/",tooltip:n.$t("code_run_config_explain",["https://www.jdoodle.com/"])},{default:r(()=>l[11]||(l[11]=[_("img",{src:ne,style:{width:"500px"}},null,-1)])),_:1},8,["tooltip"])]),_:1}),t(f,{horizontal:"center",vertical:"center"},{default:r(()=>[t(S,{href:"https://www.jdoodle.com/compiler-api/",type:"primary",style:{"font-size":"12px"}},{default:r(()=>[B($(n.$t("code_run_config_explain",["https://www.jdoodle.com/"])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{se as default};
