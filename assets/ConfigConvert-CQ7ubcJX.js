import{u as V,i as j}from"./action-ZIOlVMDR.js";import{d as $,Q as B,y as E,I as P,D as k,c as q,w as f,r as i,B as D,f as F,v as l,j as o,A as T,k as O,R as Q,M as R,S as n}from"./tool-B6I8EH92.js";import{u as U}from"./transfer-C-K92utu.js";import"./modulepreload-polyfill-B5Qt9EMX.js";const I=$({__name:"ConfigConvert",async setup(H){let m,h;const g=["json","yaml","toml","xml","csv","properties","html_table","http_query_string","php_array","php_serialize"].map(r=>({value:r,label:B(r)})),y=r=>({json:"json",yaml:"yaml",toml:"toml",xml:"xml",csv:"csv",properties:"properties",html_table:"html_table",http_query_string:"http_query_string",php_array:"php_array",php_serialize:"php_serialize"})[r]||"text",v=U(),e=V(([m,h]=E(()=>j({input:"",sourceFormat:"json",targetFormat:"yaml"})),m=await m,h(),m));if(v.hasData()){const r=v.consume();e.current.input=r.data,e.current.sourceFormat=r.sourceFormat}const b=(r,t)=>{switch(t){case"json":return n.formJson(r);case"yaml":return n.formYaml(r);case"toml":return n.formToml(r);case"properties":return n.formProperties(r);case"csv":return n.formCsv(r);case"xml":return n.formXml(r);case"html_table":return n.formTable(r);case"http_query_string":return n.formQueryString(r);case"php_array":return n.formPhpArray(r);case"php_serialize":return n.formPhpSerialize(r)}},d=r=>{const t=r.content();return Array.isArray(t)?r:n.formObject([t])},w=(r,t)=>{switch(t){case"json":return r.toJson();case"yaml":return r.toYaml();case"toml":return r.toToml();case"properties":return r.toProperties();case"csv":return d(r).toCsv();case"xml":return r.toXml();case"html_table":return d(r).toTable();case"http_query_string":return r.toQueryString();case"php_array":return r.toPhpArray();case"php_serialize":return r.toPhpSerialize()}};let u=P("");const z=()=>{const r=u.value,t=e.current.sourceFormat;e.current.sourceFormat=e.current.targetFormat,e.current.targetFormat=t,r&&!r.startsWith("Error")&&(e.current.input=r)};return k(()=>({input:e.current.input,source:e.current.sourceFormat,target:e.current.targetFormat}),async({input:r,source:t,target:c})=>{u.value="";const p=r.trim();if(p)try{const a=b(p,t);if(a.isError()){u.value=a.error();return}if(a.isEmpty())return;const _=w(a,c);u.value=await R.simple(c,"beautify",_),e.save()}catch(a){u.value=$error(a)}},{immediate:!0,deep:!0}),(r,t)=>{const c=i("Select"),p=i("Button"),a=i("Align"),_=i("Editor"),C=i("HeightResize"),A=D("row");return F(),q(a,{direction:"vertical"},{default:f(()=>[l(a,{horizontal:"center",class:"ctool-page-option"},{default:f(()=>[l(c,{modelValue:o(e).current.sourceFormat,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).current.sourceFormat=s),options:o(g),label:r.$t("configConvert_source")},null,8,["modelValue","options","label"]),l(p,{text:"â‡„",onClick:z}),l(c,{modelValue:o(e).current.targetFormat,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).current.targetFormat=s),options:o(g),label:r.$t("configConvert_target")},null,8,["modelValue","options","label"])]),_:1}),l(C,{reduce:5,append:[".ctool-page-option"]},{default:f(({height:s})=>[T((F(),O("div",{style:Q({height:`${s}px`})},[l(_,{modelValue:o(e).current.input,"onUpdate:modelValue":t[2]||(t[2]=S=>o(e).current.input=S),lang:y(o(e).current.sourceFormat),height:`${s}px`,placeholder:r.$t("configConvert_source")},null,8,["modelValue","lang","height","placeholder"]),l(_,{"model-value":o(u),lang:y(o(e).current.targetFormat),height:`${s}px`,placeholder:r.$t("configConvert_target")},null,8,["model-value","lang","height","placeholder"])],4)),[[A,"1-1"]])]),_:1})]),_:1})}}});export{I as default};
