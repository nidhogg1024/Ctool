import{u as z,i as k}from"./action-CRJh3H4I.js";import{d as S,y as x,z as O,c as U,w as p,r as s,f as $,v as u,j as a,V as C,S as m}from"./tool-BIQGDOzf.js";import"./modulepreload-polyfill-B5Qt9EMX.js";class d extends Error{}d.prototype.name="InvalidTokenError";function I(l){return decodeURIComponent(atob(l).replace(/(.)/g,(t,o)=>{let e=o.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function j(l){let t=l.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return I(t)}catch{return atob(t)}}function g(l,t){if(typeof l!="string")throw new d("Invalid token specified: must be a string");t||(t={});const o=t.header===!0?0:1,e=l.split(".")[o];if(typeof e!="string")throw new d(`Invalid token specified: missing part #${o+1}`);let c;try{c=j(e)}catch(r){throw new d(`Invalid token specified: invalid base64 for part #${o+1} (${r.message})`)}try{return JSON.parse(c)}catch(r){throw new d(`Invalid token specified: invalid json for part #${o+1} (${r.message})`)}}const B=S({__name:"Decoder",async setup(l){let t,o;const e=z(([t,o]=x(()=>k({input:"",header:!1,payload:!0,outputOption:C("json")},{paste:!1})),t=await t,o(),t)),c=O(()=>{if(!e.current.input.trim())return m.empty();try{let r={};return e.current.header&&(r.header=g(e.current.input,{header:!0})),e.current.payload&&(r.payload=g(e.current.input)),m.formObject(r)}catch(r){return m.fromError($error(r))}});return(r,n)=>{const _=s("Textarea"),f=s("Bool"),h=s("Align"),y=s("Display"),w=s("SerializeOutput"),b=s("HeightResize");return $(),U(b,{reduce:5},{default:p(({small:v,large:V})=>[u(h,{direction:"vertical"},{default:p(()=>[u(y,null,{extra:p(()=>[u(h,null,{default:p(()=>[u(f,{border:"",size:"small",modelValue:a(e).current.header,"onUpdate:modelValue":n[1]||(n[1]=i=>a(e).current.header=i),label:"header"},null,8,["modelValue"]),u(f,{border:"",size:"small",modelValue:a(e).current.payload,"onUpdate:modelValue":n[2]||(n[2]=i=>a(e).current.payload=i),label:"payload"},null,8,["modelValue"])]),_:1})]),default:p(()=>[u(_,{modelValue:a(e).current.input,"onUpdate:modelValue":n[0]||(n[0]=i=>a(e).current.input=i),height:v,placeholder:r.$t("main_ui_input")},null,8,["modelValue","height","placeholder"])]),_:2},1024),u(w,{"switch-position":"bottom-right",allow:["json","xml","yaml","toml","php_array","properties","http_query_string"],content:c.value,height:V,modelValue:a(e).current.outputOption,"onUpdate:modelValue":n[3]||(n[3]=i=>a(e).current.outputOption=i),onSuccess:n[4]||(n[4]=i=>a(e).save())},null,8,["content","height","modelValue"])]),_:2},1024)]),_:1})}}});export{B as default};
