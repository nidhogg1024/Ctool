import{u as T,i as k}from"./action-BZ3Nddn_.js";import{d as b,L as A,M as E,T as a,D,c as d,w as l,r as u,x as p,j as r,N as H,Q as I,O,P as U,a as _}from"./tool-BLEDneDs.js";import{a as z}from"./index-CPoQnu_J.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-mathjs-__1x7LJv.js";import"./vendor-monaco-DSX5bDTJ.js";import"./vendor-lodash-rhkwYG98.js";import"./vendor-crypto-Bb1b9cxO.js";const M=b({__name:"Decrypt",async setup(S){let i,s;const t=T(([i,s]=A(()=>k({input:O("hex"),option:{private_key:"",cipher_mode:1},output:I("text")})),i=await i,s(),i)),c=E(()=>{if(t.current.input.text.isEmpty()||t.current.option.private_key==="")return a.empty();try{if(t.current.input.text.isError())return t.current.input.text;const e=z.sm2.doDecrypt(t.current.input.text.toHexString(),t.current.option.private_key,t.current.option.cipher_mode,{output:"array"});if(e==="")throw new Error("failure");return a.fromArray(e)}catch(e){return a.fromError($error(e))}});return D(()=>c.value,e=>{e.isEmpty()||t.save()},{immediate:!0,deep:!0}),(e,o)=>{const x=u("TextInput"),h=u("Input"),f=u("Select"),v=u("HelpTip"),m=u("Align"),y=u("TextOutput"),g=u("HeightResize"),w=U("row");return _(),d(g,{ignore:"",append:[".ctool-page-option"],reduce:10},{default:l(({small:V,large:C})=>[p(m,{direction:"vertical"},{default:l(()=>[p(x,{modelValue:r(t).current.input,"onUpdate:modelValue":o[0]||(o[0]=n=>r(t).current.input=n),allow:["base64","hex"],height:V},null,8,["modelValue","height"]),H((_(),d(m,{class:"ctool-page-option"},{default:l(()=>[p(h,{modelValue:r(t).current.option.private_key,"onUpdate:modelValue":o[1]||(o[1]=n=>r(t).current.option.private_key=n),label:e.$t("sm2_private_key")},null,8,["modelValue","label"]),p(f,{options:[{value:1,label:"C1-C3-C2"},{value:0,label:"C1-C2-C3"}],modelValue:r(t).current.option.cipher_mode,"onUpdate:modelValue":o[2]||(o[2]=n=>r(t).current.option.cipher_mode=n)},null,8,["modelValue"]),p(v,{link:"https://github.com/JuneAndGreen/sm-crypto"})]),_:1})),[[w,"1-auto-auto"]]),p(y,{modelValue:r(t).current.output,"onUpdate:modelValue":o[3]||(o[3]=n=>r(t).current.output=n),allow:["text","hex","base64","image","down"],content:c.value,height:C},null,8,["modelValue","content","height"])]),_:2},1024)]),_:1})}}});export{M as default};
