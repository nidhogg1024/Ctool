import{u as R,i as A}from"./action-YmMChBHQ.js";import{d as E,aa as m,L as j,M as H,D as F,c as S,w as h,r as k,x as o,j as u,v as C,n as L,l as Q,a as T}from"./tool-B4oZh9Hj.js";import{g as U}from"./vendor-mathjs-__1x7LJv.js";import"./modulepreload-polyfill-B5Qt9EMX.js";import"./vendor-lodash-rhkwYG98.js";import"./vendor-monaco-DSX5bDTJ.js";var q={exports:{}},G=q.exports,I;function J(){return I||(I=1,(function(Y,x){(function(p,s){Y.exports=s()})(G,(function(){var p="month",s="quarter";return function(r,c){var d=c.prototype;d.quarter=function(n){return this.$utils().u(n)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(n-1))};var y=d.add;d.add=function(n,t){return n=Number(n),this.$utils().p(t)===s?this.add(3*n,p):y.bind(this)(n,t)};var $=d.startOf;d.startOf=function(n,t){var e=this.$utils(),i=!!e.u(t)||t;if(e.p(n)===s){var l=this.quarter()-1;return i?this.month(3*l).startOf(p).startOf("day"):this.month(3*l+2).endOf(p).endOf("day")}return $.bind(this)(n,t)}}}))})(q)),q.exports}var K=J();const P=U(K);var D={exports:{}},X=D.exports,N;function Z(){return N||(N=1,(function(Y,x){(function(p,s){Y.exports=s()})(X,(function(){return function(p,s,r){s.prototype.dayOfYear=function(c){var d=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return c==null?d:this.add(c-d,"day")}}}))})(D)),D.exports}var tt=Z();const et=U(tt);var b={exports:{}},rt=b.exports,B;function nt(){return B||(B=1,(function(Y,x){(function(p,s){Y.exports=s()})(rt,(function(){var p="day";return function(s,r,c){var d=function(n){return n.add(4-n.isoWeekday(),p)},y=r.prototype;y.isoWeekYear=function(){return d(this).year()},y.isoWeek=function(n){if(!this.$utils().u(n))return this.add(7*(n-this.isoWeek()),p);var t,e,i,l,O=d(this),v=(t=this.isoWeekYear(),e=this.$u,i=(e?c.utc:c)().year(t).startOf("year"),l=4-i.isoWeekday(),i.isoWeekday()>4&&(l+=7),i.add(l,p));return O.diff(v,"week")+1},y.isoWeekday=function(n){return this.$utils().u(n)?this.day()||7:this.day(this.day()%7?n:n-7)};var $=y.startOf;y.startOf=function(n,t){var e=this.$utils(),i=!!e.u(t)||t;return e.p(n)==="isoweek"?i?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):$.bind(this)(n,t)}}}))})(b)),b.exports}var at=nt();const ot=U(at),mt=E({__name:"Calculator",async setup(Y){let x,p;m.extend(P),m.extend(et),m.extend(ot);const s=m(),r=R(([x,p]=j(()=>A({poor:{input1:s.format("YYYY-MM-DD HH:mm:ss"),input2:s.add(1,"d").format("YYYY-MM-DD HH:mm:ss"),unit:"seconds"},operation:{input:s.format("YYYY-MM-DD HH:mm:ss"),unit:"days",type:"+",length:1},analyze:{type:"year",input:s.format("YYYY-MM-DD HH:mm:ss")}})),x=await x,p(),x)),c=[{value:"years",label:$t("time_year"),rate:0},{value:"months",label:$t("time_month"),rate:0},{value:"weeks",label:$t("time_week"),rate:1e3*60*60*24*7},{value:"days",label:$t("time_day"),rate:1e3*60*60*24},{value:"hours",label:$t("time_hour"),rate:1e3*60*60},{value:"minutes",label:$t("time_minute"),rate:1e3*60},{value:"seconds",label:$t("time_second"),rate:1e3}],d=t=>{for(const e of c)if(e.value===t)return e.rate;return 0},y=H(()=>{const t=m(r.current.poor.input2).diff(m(r.current.poor.input1),r.current.poor.unit,!0);return parseFloat(t.toFixed(2))}),$=H(()=>{if(!r.current.operation.length)return"";const t=d(r.current.operation.unit);if(t===0){const e=r.current.operation.type==="+"?"add":"subtract";return m(r.current.operation.input)[e](r.current.operation.length,r.current.operation.unit).format("YYYY-MM-DD HH:mm:ss")}return m(m(r.current.operation.input).valueOf()+t*r.current.operation.length*(r.current.operation.type==="+"?1:-1)).format("YYYY-MM-DD HH:mm:ss")}),n=H(()=>{const t=m(r.current.analyze.input),e=t.year(),i=t.quarter();if(r.current.analyze.type==="quarter"){const f=m(`${t.year()}-${(i-1)*3+1}-01`),V=Math.ceil((t.unix()-f.unix())/(86400*7)),w=Math.ceil((t.unix()-f.unix())/86400),z=Math.ceil((t.unix()-f.unix())/3600),W=Math.ceil((t.unix()-f.unix())/60),g=t.unix()-f.unix();return $t("time_analyze_quarter_output",{quarter:i,weekOfQuarter:V,dayOfQuarter:w,hourOfQuarter:z,minuteOfQuarter:W,secondOfQuarter:g})}if(r.current.analyze.type==="month"){const f=t.month()+1,V=m(`${t.year()}-${f}-01`),w=Math.ceil((t.unix()-V.unix())/(86400*7)),z=Math.ceil((t.unix()-V.unix())/3600),W=Math.ceil((t.unix()-V.unix())/60),g=t.unix()-V.unix();return $t("time_analyze_month_output",{month:f,weekOfMonth:w,hourOfMonth:z,minuteOfMonth:W,secondOfMonth:g})}const l=m(t.year()+"-01-01"),O=t.isoWeek(),v=t.dayOfYear(),M=Math.ceil((t.unix()-l.unix())/3600),_=Math.ceil((t.unix()-l.unix())/60),a=t.unix()-l.unix();return $t("time_analyze_year_output",{year:e,quarter:i,weekOfYear:O,dayOfYear:v,hourOfYear:M,minuteOfYear:_,secondOfYear:a})});return F(()=>r.current,()=>{r.save()},{immediate:!0,deep:!0}),(t,e)=>{const i=k("Input"),l=k("Select"),O=k("InputNumber"),v=k("Align"),M=k("Card"),_=k("Button");return T(),S(v,{direction:"vertical"},{default:h(()=>[o(M,{title:t.$t("time_diff_tool")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(r).current.poor.input1,"onUpdate:modelValue":e[0]||(e[0]=a=>u(r).current.poor.input1=a),width:170},null,8,["modelValue"]),e[11]||(e[11]=C("span",null,"与",-1)),o(i,{center:"",modelValue:u(r).current.poor.input2,"onUpdate:modelValue":e[1]||(e[1]=a=>u(r).current.poor.input2=a),width:170},null,8,["modelValue"]),e[12]||(e[12]=C("span",null,"相差",-1)),o(O,{center:"","model-value":y.value,width:160},{append:h(()=>[o(l,{modelValue:u(r).current.poor.unit,"onUpdate:modelValue":e[2]||(e[2]=a=>u(r).current.poor.unit=a),options:c.map(({value:a,label:f})=>({value:a,label:f}))},null,8,["modelValue","options"])]),_:1},8,["model-value"])]),_:1})]),_:1},8,["title"]),o(M,{title:t.$t("time_operation")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(r).current.operation.input,"onUpdate:modelValue":e[3]||(e[3]=a=>u(r).current.operation.input=a),width:170},null,8,["modelValue"]),o(l,{modelValue:u(r).current.operation.type,"onUpdate:modelValue":e[4]||(e[4]=a=>u(r).current.operation.type=a),options:[{value:"+",label:t.$t("time_add")},{value:"-",label:t.$t("time_reduce")}]},null,8,["modelValue","options"]),o(O,{center:"",modelValue:u(r).current.operation.length,"onUpdate:modelValue":e[6]||(e[6]=a=>u(r).current.operation.length=a),width:160},{append:h(()=>[o(l,{modelValue:u(r).current.operation.unit,"onUpdate:modelValue":e[5]||(e[5]=a=>u(r).current.operation.unit=a),options:c.map(({value:a,label:f})=>({value:a,label:f}))},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),C("span",null,[L(Q(t.$t("time_after"))+", "+Q(t.$t("time_is"))+" ",1),o(_,{onClick:e[7]||(e[7]=a=>t.$copy($.value)),type:"dotted",text:$.value},null,8,["text"])])]),_:1})]),_:1},8,["title"]),o(M,{title:t.$t("time_analyze")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(r).current.analyze.input,"onUpdate:modelValue":e[8]||(e[8]=a=>u(r).current.analyze.input=a),width:170},null,8,["modelValue"]),o(l,{modelValue:u(r).current.analyze.type,"onUpdate:modelValue":e[9]||(e[9]=a=>u(r).current.analyze.type=a),options:[{value:"year",label:t.$t("time_analyze_year")},{value:"quarter",label:t.$t("time_analyze_quarter")},{value:"month",label:t.$t("time_analyze_month")}]},null,8,["modelValue","options"]),o(_,{onClick:e[10]||(e[10]=a=>t.$copy(n.value)),type:"dotted",text:n.value},null,8,["text"])]),_:1})]),_:1},8,["title"])]),_:1})}}});export{mt as default};
