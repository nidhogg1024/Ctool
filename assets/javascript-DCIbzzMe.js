import{B as uu}from"./base-C4lZah3o.js";import{J as Za,K as ou}from"./tool-B6I8EH92.js";import{g as cu}from"./standalone-BXZwVK2D.js";import{L as lu,$ as hu}from"./estree-DwsZGU-1.js";import"./modulepreload-polyfill-B5Qt9EMX.js";var Os={};(function(Xi){function ra(t){return t.split("")}function _r(t,a){return a.indexOf(t)>=0}function bf(t,a){for(var u=a.length;--u>=0;)if(t(a[u]))return a[u]}function ts(t,a){var u=t.name+": "+t.message;Object.defineProperty(t,"stack",{get:function(){if(a){a.name=""+t.name,u=""+a.stack;var s=""+a.message;a=null;var w=u.indexOf(s);w<0?w=0:(w+=s.length,w=u.indexOf(`
`,w)+1),u=u.slice(0,w)+u.slice(u.indexOf(`
`,w)+1)}return u}})}function Qa(t,a){this.message=t,this.defs=a;try{throw new Error(t)}catch(u){ts(this,u)}}Qa.prototype=Object.create(Error.prototype),Qa.prototype.constructor=Qa,Qa.prototype.name="DefaultsError";function qr(t,a,u){if(u){for(var s in t)if(Rt(t,s)&&!Rt(a,s))throw new Qa("`"+s+"` is not a supported option",a)}for(var s in t)Rt(t,s)&&(a[s]=t[s]);return a}function Gt(){}function An(){return!1}function nt(){return!0}function Or(){return this}function aa(){return null}var Ct=function(){function t(s,w){for(var O=[],J=0;J<s.length;J++){var V=w(s[J],J);V!==a&&(V instanceof u?O.push.apply(O,V.v):O.push(V))}return O}t.is_op=function(s){return s===a||s instanceof u},t.splice=function(s){return new u(s)};var a=t.skip={};function u(s){this.v=s}return t}();function zi(t,a){if(t.indexOf(a)<0)return t.push(a)}function ef(t,a){return t.replace(/\{([^{}]+)\}/g,function(u,s){var w=s=="this"?a:a[s];return w instanceof M?w.print_to_string():w instanceof tf?w.file+":"+w.line+","+w.col:w})}function nf(t,a){var u=t.indexOf(a);u>=0&&t.splice(u,1)}function jn(t){Array.isArray(t)||(t=t.split(" "));var a=Object.create(null);return t.forEach(function(u){a[u]=!0}),a}function Ve(t,a){for(var u=t.length;--u>=0;)if(!a(t[u],u))return!1;return!0}function Jn(){this.values=Object.create(null)}Jn.prototype={set:function(t,a){return t=="__proto__"?this.proto_value=a:this.values[t]=a,this},add:function(t,a){var u=this.get(t);return u?u.push(a):this.set(t,[a]),this},get:function(t){return t=="__proto__"?this.proto_value:this.values[t]},del:function(t){return t=="__proto__"?delete this.proto_value:delete this.values[t],this},has:function(t){return t=="__proto__"?"proto_value"in this:t in this.values},all:function(t){for(var a in this.values)if(!t(this.values[a],a))return!1;return!("proto_value"in this&&!t(this.proto_value,"__proto__"))},each:function(t){for(var a in this.values)t(this.values[a],a);"proto_value"in this&&t(this.proto_value,"__proto__")},size:function(){return Object.keys(this.values).length+("proto_value"in this)},map:function(t){var a=[];for(var u in this.values)a.push(t(this.values[u],u));return"proto_value"in this&&a.push(t(this.proto_value,"__proto__")),a},clone:function(){var t=new Jn;return this.each(function(a,u){t.set(u,a)}),t},toObject:function(){var t={};return this.each(function(a,u){t["$"+u]=a}),t}},Jn.fromObject=function(t){var a=new Jn;for(var u in t)Rt(t,u)&&a.set(u.slice(1),t[u]);return a};function Rt(t,a){return Object.prototype.hasOwnProperty.call(t,a)}function Oa(t,a,u){for(var s=t.parent(-1),w=0,O;O=t.parent(w++);s=O){if(qt(O))return a&&O.value===s;if(O instanceof ae){if(O.left===s)continue}else if(O.TYPE=="Call"){if(O.expression===s)continue}else if(O instanceof bn){if(O.condition===s)continue}else{if(O instanceof ji)return u;if(O instanceof on){if(O.expression===s)continue}else if(O instanceof Ze){if(O.expressions[0]===s)continue}else{if(O instanceof He)return!0;if(O instanceof Yt){if(O.tag===s)continue}else if(O instanceof Cr&&O.expression===s)continue}}return!1}}function is(t,a){if(a.length>31)throw new Error("Too many properties: "+a.length+`
`+a.join(", "));a.forEach(function(u,s){var w=1<<s;Object.defineProperty(t.prototype,u,{get:function(){return!!(this._bits&w)},set:function(O){O?this._bits|=w:this._bits&=~w}})})}function ve(t,a,u,s){typeof s>"u"&&(s=M),a=a?a.split(/\s+/):[];var w=a;s&&s.PROPS&&(a=a.concat(s.PROPS));var O=["return function AST_",t,"(props){","this._bits=0;","if(props){"];a.forEach(function(ue){O.push("this.",ue,"=props.",ue,";")}),O.push("}");var J=Object.create(s&&s.prototype);(u.initialize||J.initialize)&&O.push("this.initialize();"),O.push("};");var V=new Function(O.join(""))();V.prototype=J,V.prototype.CTOR=V,V.prototype.TYPE=V.TYPE=t,s&&(V.BASE=s,s.SUBCLASSES.push(V)),V.DEFMETHOD=function(ue,F){this.prototype[ue]=F},V.PROPS=a,V.SELF_PROPS=w,V.SUBCLASSES=[];for(var Be in u)Rt(u,Be)&&(/^\$/.test(Be)?V[Be.substr(1)]=u[Be]:V.DEFMETHOD(Be,u[Be]));return Xi["AST_"+t]=V,V}var tf=ve("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),M=ve("Node","start end",{_clone:function(t){if(t){var a=this.clone();return a.transform(new ei(function(u){if(u!==a)return u.clone(!0)}))}return new this.CTOR(this)},clone:function(t){return this._clone(t)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},equals:function(t){return this.TYPE==t.TYPE&&this._equals(t)},walk:function(t){t.visit(this)},_validate:function(){if(this.TYPE=="Node")throw new Error("should not instantiate AST_Node")},validate:function(){var t=this.CTOR;do t.prototype._validate.call(this);while(t=t.BASE)},validate_ast:function(){var t={};this.walk(new un(function(a){if(a.validate_visited===t)throw new Error(ef("cannot reuse AST_{TYPE} from [{start}]",a));a.validate_visited=t}))}},null);is(M,["_optimized","_squeezed","call_only","collapse_scanning","defined","evaluating","falsy","in_arg","in_bool","is_undefined","inlined","length_read","nested","new","optional","private","pure","single_use","static","terminal","truthy","uses_eval","uses_with"]),(M.log_function=function(t,a){if(typeof t!="function"){M.info=M.warn=Gt;return}var u=Object.create(null);M.info=a?function(w,O){s("INFO: "+ef(w,O))}:Gt,M.warn=function(w,O){s("WARN: "+ef(w,O))};function s(w){u[w]||(u[w]=!0,t(w))}})();var rs=[];M.enable_validation=function(){M.disable_validation(),function t(a){if(a.SUBCLASSES.forEach(t),!!Rt(a.prototype,"transform")){var u=a.prototype.transform;a.prototype.transform=function(s,w){var O=u.call(this,s,w);if(O instanceof M)O.validate();else if(!(O===null||w&&Ct.is_op(O)))throw new Error("invalid transformed value: "+O);return O},rs.push(function(){a.prototype.transform=u})}}(this)},M.disable_validation=function(){for(var t;t=rs.pop();)t()};function mi(t,a){return t.length==a.length&&Ve(t,function(u,s){return u.equals(a[s])})}function zs(t,a){return t.length==a.length&&Ve(t,function(u,s){return u==a[s]})}function Wt(t,a){return t===a?!0:t==null?a==null:t instanceof M&&a instanceof M&&t.equals(a)}var Fi=ve("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if(this.TYPE=="Statement")throw new Error("should not instantiate AST_Statement")}}),za=ve("Debugger",null,{$documentation:"Represents a debugger statement",_equals:nt},Fi),ci=ve("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_equals:function(t){return this.value==t.value},_validate:function(){if(this.quote!=null){if(typeof this.quote!="string")throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if(typeof this.value!="string")throw new Error("value must be string")}},Fi),Qn=ve("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_equals:nt},Fi);function pr(t){return t instanceof Fi&&!(t instanceof xr)&&!(t instanceof St)}function as(t,a,u,s,w){if(u=u?"contain":"be",!(t instanceof M))throw new Error(a+" must "+u+" AST_Node");if(t instanceof Fn)throw new Error(a+" cannot "+u+" AST_DefaultValue");if(t instanceof Nn)throw new Error(a+" cannot "+u+" AST_Destructured");if(t instanceof Jt&&!w)throw new Error(a+" cannot "+u+" AST_Hole");if(t instanceof On&&!s)throw new Error(a+" cannot "+u+" AST_Spread");if(pr(t))throw new Error(a+" cannot "+u+" AST_Statement");if(t instanceof et)throw new Error(a+" cannot "+u+" AST_SymbolDeclaration")}function lt(t,a){as(t[a],a)}var He=ve("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_equals:function(t){return this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.body.walk(t)})},_validate:function(){lt(this,"body")}},Fi),li=ve("BlockScope","_var_names enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any inner scopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---> SymbolDef for all variables/functions defined in this scope"},clone:function(t){var a=this._clone(t);return this.enclosed&&(a.enclosed=this.enclosed.slice()),this.functions&&(a.functions=this.functions.clone()),this.variables&&(a.variables=this.variables.clone()),a},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if(this.TYPE=="BlockScope")throw new Error("should not instantiate AST_BlockScope");if(this.parent_scope!=null){if(!(this.parent_scope instanceof li))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof rn))throw new Error("must be contained within AST_Scope")}}},Fi);function ti(t,a){t.body.forEach(function(u){u.walk(a)})}var ii=ve("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},_equals:function(t){return mi(this.body,t.body)},walk:function(t){var a=this;t.visit(a,function(){ti(a,t)})},_validate:function(){if(this.TYPE=="Block")throw new Error("should not instantiate AST_Block");this.body.forEach(function(t){if(!pr(t))throw new Error("body must contain AST_Statement")})}},li),Ge=ve("BlockStatement",null,{$documentation:"A block statement"},ii),$a=ve("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if(this.TYPE=="StatementWithBody")throw new Error("should not instantiate AST_StatementWithBody");if(!pr(this.body))throw new Error("body must be AST_Statement")}},li),ri=ve("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_equals:function(t){return this.label.equals(t.label)&&this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.label.walk(t),a.body.walk(t)})},clone:function(t){var a=this._clone(t);if(t){var u=a.label,s=this.label;a.walk(new un(function(w){if(w instanceof $r)return!w.label||w.label.thedef!==s?void 0:(w.label.thedef=u,u.references.push(w),!0);if(w instanceof rn)return!0}))}return a},_validate:function(){if(!(this.label instanceof Ra))throw new Error("label must be AST_Label")}},$a),Ii=ve("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if(this.TYPE=="IterationStatement")throw new Error("should not instantiate AST_IterationStatement")}},$a),ga=ve("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_equals:function(t){return this.body.equals(t.body)&&this.condition.equals(t.condition)},_validate:function(){if(this.TYPE=="DWLoop")throw new Error("should not instantiate AST_DWLoop");lt(this,"condition")}},Ii),Lr=ve("Do",null,{$documentation:"A `do` statement",walk:function(t){var a=this;t.visit(a,function(){a.body.walk(t),a.condition.walk(t)})}},ga),fa=ve("While",null,{$documentation:"A `while` statement",walk:function(t){var a=this;t.visit(a,function(){a.condition.walk(t),a.body.walk(t)})}},ga),jt=ve("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_equals:function(t){return Wt(this.init,t.init)&&Wt(this.condition,t.condition)&&Wt(this.step,t.step)&&this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.init&&a.init.walk(t),a.condition&&a.condition.walk(t),a.step&&a.step.walk(t),a.body.walk(t)})},_validate:function(){if(this.init!=null){if(!(this.init instanceof M))throw new Error("init must be AST_Node");if(pr(this.init)&&!(this.init instanceof gt))throw new Error("init cannot be AST_Statement")}this.condition!=null&&lt(this,"condition"),this.step!=null&&lt(this,"step")}},Ii),Xt=ve("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},_equals:function(t){return this.init.equals(t.init)&&this.object.equals(t.object)&&this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.init.walk(t),a.object.walk(t),a.body.walk(t)})},_validate:function(){if(this.TYPE=="ForEnumeration")throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof gt){if(this.init.definitions.length!=1)throw new Error("init must have single declaration")}else Sr(this.init,function(t){if(!(t instanceof on||t instanceof X))throw new Error("init must be assignable: "+t.TYPE)});lt(this,"object")}},Ii),ba=ve("ForIn",null,{$documentation:"A `for ... in` statement"},Xt),Ca=ve("ForOf",null,{$documentation:"A `for ... of` statement"},Xt),Na=ve("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},Ca),kr=ve("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_equals:function(t){return this.expression.equals(t.expression)&&this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t),a.body.walk(t)})},_validate:function(){lt(this,"expression")}},$a),rn=ve("Scope","fn_defs may_call_this uses_eval uses_with",{$documentation:"Base class for all statements introducing a lambda scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:Or,_validate:function(){if(this.TYPE=="Scope")throw new Error("should not instantiate AST_Scope")}},ii),Et=ve("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---> SymbolDef for all undeclared names"},wrap:function(t){var a=this.body;return Ua(["(function(exports){'$ORIG';})(typeof ",t,"=='undefined'?(",t,"={}):",t,");"].join(""),{filename:"wrap="+JSON.stringify(t)}).transform(new ei(function(u){if(u instanceof ci&&u.value=="$ORIG")return Ct.splice(a)}))},enclose:function(t){typeof t!="string"&&(t="");var a=t.indexOf(":");a<0&&(a=t.length);var u=this.body;return Ua(["(function(",t.slice(0,a),'){"$ORIG"})(',t.slice(a+1),")"].join(""),{filename:"enclose="+JSON.stringify(t)}).transform(new ei(function(s){if(s instanceof ci&&s.value=="$ORIG")return Ct.splice(u)}))}},rn),yf=ve("ClassInitBlock",null,{$documentation:"Value for `class` static initialization blocks"},rn),yn=ve("Lambda","argnames length_read rest safe_ids uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean|number/S] whether this function accesses the arguments array"},each_argname:function(t){var a=new un(function(u){if(u instanceof Fn)return u.name.walk(a),!0;if(u instanceof Pt)return u.value.walk(a),!0;u instanceof $n&&t(u)});this.argnames.forEach(function(u){u.walk(a)}),this.rest&&this.rest.walk(a)},_equals:function(t){return Wt(this.rest,t.rest)&&Wt(this.name,t.name)&&Wt(this.value,t.value)&&mi(this.argnames,t.argnames)&&mi(this.body,t.body)},walk:function(t){var a=this;t.visit(a,function(){a.name&&a.name.walk(t),a.argnames.forEach(function(u){u.walk(t)}),a.rest&&a.rest.walk(t),ti(a,t)})},_validate:function(){if(this.TYPE=="Lambda")throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(t){Sr(t,function(a){if(!(a instanceof $n))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),this.rest!=null&&Sr(this.rest,function(t){if(!(t instanceof $n))throw new Error("rest must be AST_SymbolFunarg")})}},rn),Mi=ve("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(this.name!=null)throw new Error("name must be null")}},yn),St=ve("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if(this.TYPE=="LambdaExpression")throw new Error("should not instantiate AST_LambdaExpression")}},yn);function qt(t){return t instanceof Zi||t instanceof gr}function wi(t){return t instanceof gr||t instanceof Ur||t instanceof rr||t instanceof zr||t instanceof Qi}function Ui(t){return t instanceof zr||t instanceof Qi||t instanceof Xr||t instanceof br}function Lf(t,a){qt(t)&&t.value?t.value.walk(a):ti(t,a)}var Zi=ve("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var a=this;t.visit(a,function(){a.argnames.forEach(function(u){u.walk(t)}),a.rest&&a.rest.walk(t),a.value?a.value.walk(t):ti(a,t)})},_validate:function(){if(this.name!=null)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(this.value!=null&&(lt(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},St),gr=ve("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(t){var a=this;t.visit(a,function(){a.argnames.forEach(function(u){u.walk(t)}),a.rest&&a.rest.walk(t),a.value?a.value.walk(t):ti(a,t)})},_validate:function(){if(this.name!=null)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(this.value!=null&&(lt(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},St),rr=ve("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(this.name!=null&&!(this.name instanceof Ei))throw new Error("name must be AST_SymbolLambda")}},St),Qi=ve("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(this.name!=null&&!(this.name instanceof Ei))throw new Error("name must be AST_SymbolLambda")}},St),Tt=ve("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(this.name!=null&&!(this.name instanceof Ei))throw new Error("name must be AST_SymbolLambda")}},St),br=ve("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(this.name!=null&&!(this.name instanceof Ei))throw new Error("name must be AST_SymbolLambda")}},St),kt=ve("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if(this.TYPE=="LambdaDefinition")throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof nr))throw new Error("name must be AST_SymbolDefun")}},yn),Ur=ve("AsyncDefun",null,{$documentation:"An asynchronous function definition"},kt),zr=ve("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},kt),Ri=ve("Defun",null,{$documentation:"A function definition"},kt),Xr=ve("GeneratorDefun",null,{$documentation:"A generator function definition"},kt),Nt=ve("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},_equals:function(t){return Wt(this.name,t.name)&&Wt(this.extends,t.extends)&&mi(this.properties,t.properties)},resolve:function(t){return t?this:this.parent_scope.resolve()},walk:function(t){var a=this;t.visit(a,function(){a.name&&a.name.walk(t),a.extends&&a.extends.walk(t),a.properties.forEach(function(u){u.walk(t)})})},_validate:function(){if(this.TYPE=="Class")throw new Error("should not instantiate AST_Class");this.extends!=null&&lt(this,"extends"),this.properties.forEach(function(t){if(!(t instanceof ar))throw new Error("properties must contain AST_ClassProperty")})}},li),Si=ve("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof uf))throw new Error("name must be AST_SymbolDefClass")}},Nt),xr=ve("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(this.name!=null&&!(this.name instanceof Ia))throw new Error("name must be AST_SymbolClass")}},Nt),ar=ve("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node?] property name (AST_Node for computed property, null for initialization block)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},_equals:function(t){return!this.private==!t.private&&!this.static==!t.static&&Wt(this.key,t.key)&&Wt(this.value,t.value)},walk:function(t){var a=this;t.visit(a,function(){a.key instanceof M&&a.key.walk(t),a.value&&a.value.walk(t)})},_validate:function(){if(this.TYPE=="ClassProperty")throw new Error("should not instantiate AST_ClassProperty");if(this instanceof Mr){if(this.key!=null)throw new Error("key must be null")}else if(typeof this.key!="string"){if(!(this.key instanceof M))throw new Error("key must be string or AST_Node");if(this.private)throw new Error("computed key cannot be private");lt(this,"key")}else if(this.private&&!/^#/.test(this.key))throw new Error("private key must prefix with #");if(this.value!=null&&!(this.value instanceof M))throw new Error("value must be AST_Node")}}),Wr=ve("ClassField",null,{$documentation:"A `class` field",_validate:function(){this.value!=null&&lt(this,"value")}},ar),rf=ve("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof Mi))throw new Error("value must be AST_Accessor")}},ar),af=ve("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof Mi))throw new Error("value must be AST_Accessor")}},ar),ya=ve("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof St))throw new Error("value must be AST_LambdaExpression");if(qt(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(this.value.name!=null)throw new Error("name of class method's lambda must be null")}},ar),Mr=ve("ClassInit",null,{$documentation:"A `class` static initialization block",_validate:function(){if(!this.static)throw new Error("static must be true");if(!(this.value instanceof yf))throw new Error("value must be AST_ClassInitBlock")},initialize:function(){this.static=!0}},ar),ff=ve("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if(this.TYPE=="Jump")throw new Error("should not instantiate AST_Jump")}},Fi),Mt=ve("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_equals:function(t){return Wt(this.value,t.value)},walk:function(t){var a=this;t.visit(a,function(){a.value&&a.value.walk(t)})},_validate:function(){if(this.TYPE=="Exit")throw new Error("should not instantiate AST_Exit")}},ff),tt=ve("Return",null,{$documentation:"A `return` statement",_validate:function(){this.value!=null&&lt(this,"value")}},Mt),sf=ve("Throw",null,{$documentation:"A `throw` statement",_validate:function(){lt(this,"value")}},Mt),$r=ve("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_equals:function(t){return Wt(this.label,t.label)},walk:function(t){var a=this;t.visit(a,function(){a.label&&a.label.walk(t)})},_validate:function(){if(this.TYPE=="LoopControl")throw new Error("should not instantiate AST_LoopControl");if(this.label!=null&&!(this.label instanceof wf))throw new Error("label must be AST_LabelRef")}},ff),fr=ve("Break",null,{$documentation:"A `break` statement"},$r),Zr=ve("Continue",null,{$documentation:"A `continue` statement"},$r),Un=ve("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_equals:function(t){return this.body.equals(t.body)&&this.condition.equals(t.condition)&&Wt(this.alternative,t.alternative)},walk:function(t){var a=this;t.visit(a,function(){a.condition.walk(t),a.body.walk(t),a.alternative&&a.alternative.walk(t)})},_validate:function(){if(lt(this,"condition"),this.alternative!=null&&!pr(this.alternative))throw new Error("alternative must be AST_Statement")}},$a),ki=ve("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_equals:function(t){return this.expression.equals(t.expression)&&mi(this.body,t.body)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t),ti(a,t)})},_validate:function(){lt(this,"expression"),this.body.forEach(function(t){if(!(t instanceof yr))throw new Error("body must be AST_SwitchBranch[]")})}},ii),yr=ve("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if(this.TYPE=="SwitchBranch")throw new Error("should not instantiate AST_SwitchBranch")}},ii),Vr=ve("Default",null,{$documentation:"A `default` switch branch"},yr),sr=ve("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_equals:function(t){return this.expression.equals(t.expression)&&mi(this.body,t.body)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t),ti(a,t)})},_validate:function(){lt(this,"expression")}},yr),ai=ve("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_equals:function(t){return mi(this.body,t.body)&&Wt(this.bcatch,t.bcatch)&&Wt(this.bfinally,t.bfinally)},walk:function(t){var a=this;t.visit(a,function(){ti(a,t),a.bcatch&&a.bcatch.walk(t),a.bfinally&&a.bfinally.walk(t)})},_validate:function(){if(this.bcatch!=null&&!(this.bcatch instanceof er))throw new Error("bcatch must be AST_Catch");if(this.bfinally!=null&&!(this.bfinally instanceof sa))throw new Error("bfinally must be AST_Finally")}},ii),er=ve("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},_equals:function(t){return Wt(this.argname,t.argname)&&mi(this.body,t.body)},walk:function(t){var a=this;t.visit(a,function(){a.argname&&a.argname.walk(t),ti(a,t)})},_validate:function(){this.argname!=null&&Sr(this.argname,function(t){if(!(t instanceof tr))throw new Error("argname must be AST_SymbolCatch")})}},ii),sa=ve("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},ii),gt=ve("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_equals:function(t){return mi(this.definitions,t.definitions)},walk:function(t){var a=this;t.visit(a,function(){a.definitions.forEach(function(u){u.walk(t)})})},_validate:function(){if(this.TYPE=="Definitions")throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},Fi),Er=ve("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(t){if(!(t instanceof Vn))throw new Error("definitions must be AST_VarDef[]");Sr(t.name,function(a){if(!(a instanceof xi))throw new Error("name must be AST_SymbolConst")})})}},gt),Wi=ve("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(t){if(!(t instanceof Vn))throw new Error("definitions must be AST_VarDef[]");Sr(t.name,function(a){if(!(a instanceof Nr))throw new Error("name must be AST_SymbolLet")})})}},gt),bt=ve("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(t){if(!(t instanceof Vn))throw new Error("definitions must be AST_VarDef[]");Sr(t.name,function(a){if(!(a instanceof vi))throw new Error("name must be AST_SymbolVar")})})}},gt),Vn=ve("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_equals:function(t){return this.name.equals(t.name)&&Wt(this.value,t.value)},walk:function(t){var a=this;t.visit(a,function(){a.name.walk(t),a.value&&a.value.walk(t)})},_validate:function(){this.value!=null&&lt(this,"value")}}),Ti=ve("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},_equals:function(t){return this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.body.walk(t)})},_validate:function(){if(!(this.body instanceof Si||this.body instanceof gt||this.body instanceof kt))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},Fi),ji=ve("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},_equals:function(t){return this.body.equals(t.body)},walk:function(t){var a=this;t.visit(a,function(){a.body.walk(t)})},_validate:function(){this.body instanceof Si||this.body instanceof kt||lt(this,"body")}},Fi),Pa=ve("ExportForeign","aliases keys path",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[AST_String*] array of aliases to export",keys:"[AST_String*] array of keys to import",path:"[AST_String] the path to import module"},_equals:function(t){return this.path.equals(t.path)&&mi(this.aliases,t.aliases)&&mi(this.keys,t.keys)},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(t){if(!(t instanceof Dn))throw new Error("aliases must contain AST_String")}),this.keys.forEach(function(t){if(!(t instanceof Dn))throw new Error("keys must contain AST_String")}),!(this.path instanceof Dn))throw new Error("path must be AST_String")}},Fi),da=ve("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},_equals:function(t){return mi(this.properties,t.properties)},walk:function(t){var a=this;t.visit(a,function(){a.properties.forEach(function(u){u.walk(t)})})},_validate:function(){this.properties.forEach(function(t){if(!(t instanceof ja))throw new Error("properties must contain AST_SymbolExport")})}},Fi),Fa=ve("Import","all default path properties",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[AST_String] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified"},_equals:function(t){return this.path.equals(t.path)&&Wt(this.all,t.all)&&Wt(this.default,t.default)&&!this.properties==!t.properties&&(!this.properties||mi(this.properties,t.properties))},walk:function(t){var a=this;t.visit(a,function(){a.all&&a.all.walk(t),a.default&&a.default.walk(t),a.properties&&a.properties.forEach(function(u){u.walk(t)})})},_validate:function(){if(this.all!=null){if(!(this.all instanceof ur))throw new Error("all must be AST_SymbolImport");if(this.properties!=null)throw new Error("cannot import both * and {} in the same statement")}if(this.default!=null){if(!(this.default instanceof ur))throw new Error("default must be AST_SymbolImport");if(this.default.key.value!=="")throw new Error("invalid default key: "+this.default.key.value)}if(!(this.path instanceof Dn))throw new Error("path must be AST_String");this.properties!=null&&this.properties.forEach(function(t){if(!(t instanceof ur))throw new Error("properties must contain AST_SymbolImport")})}},Fi),Fn=ve("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},_equals:function(t){return this.name.equals(t.name)&&this.value.equals(t.value)},walk:function(t){var a=this;t.visit(a,function(){a.name.walk(t),a.value.walk(t)})},_validate:function(){lt(this,"value")}});function df(t,a,u,s){t[a].forEach(function(w){as(w,a,!0,u,s)})}var hn=ve("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[boolean/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},_equals:function(t){return!this.optional==!t.optional&&this.expression.equals(t.expression)&&mi(this.args,t.args)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t),a.args.forEach(function(u){u.walk(t)})})},_validate:function(){lt(this,"expression"),df(this,"args",!0)}}),$i=ve("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},hn),Ze=ve("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_equals:function(t){return mi(this.expressions,t.expressions)},walk:function(t){var a=this;t.visit(a,function(){a.expressions.forEach(function(u){u.walk(t)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");df(this,"expressions")}});function mf(t){for(;t instanceof on;)t=t.expression;return t}var on=ve("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},_equals:function(t){return!this.optional==!t.optional&&Wt(this.property,t.property)&&this.expression.equals(t.expression)},get_property:function(){var t=this.property;if(t instanceof st)return t.value;if(!(t instanceof We&&t.operator=="void"&&t.expression instanceof st))return t},_validate:function(){if(this.TYPE=="PropAccess")throw new Error("should not instantiate AST_PropAccess");lt(this,"expression")}}),Mn=ve("Dot","quoted",{$documentation:"A dotted property access expression",$propdoc:{quoted:"[boolean] whether property is transformed from a quoted string"},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t)})},_validate:function(){if(typeof this.property!="string")throw new Error("property must be string")}},on),ht=ve("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t),a.property.walk(t)})},_validate:function(){lt(this,"property")}},on),On=ve("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},_equals:function(t){return this.expression.equals(t.expression)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t)})},_validate:function(){lt(this,"expression")}}),at=ve("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_equals:function(t){return this.operator==t.operator&&this.expression.equals(t.expression)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t)})},_validate:function(){if(this.TYPE=="Unary")throw new Error("should not instantiate AST_Unary");if(typeof this.operator!="string")throw new Error("operator must be string");lt(this,"expression")}}),We=ve("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},at),Cr=ve("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},at),ae=ve("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_equals:function(t){return this.operator==t.operator&&this.left.equals(t.left)&&this.right.equals(t.right)},walk:function(t){var a=this;t.visit(a,function(){a.left.walk(t),a.right.walk(t)})},_validate:function(){if(this instanceof ze||lt(this,"left"),typeof this.operator!="string")throw new Error("operator must be string");lt(this,"right")}}),bn=ve("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_equals:function(t){return this.condition.equals(t.condition)&&this.consequent.equals(t.consequent)&&this.alternative.equals(t.alternative)},walk:function(t){var a=this;t.visit(a,function(){a.condition.walk(t),a.consequent.walk(t),a.alternative.walk(t)})},_validate:function(){lt(this,"condition"),lt(this,"consequent"),lt(this,"alternative")}}),ze=ve("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof Nn){if(this.operator!="=")throw new Error("invalid destructuring operator: "+this.operator);Sr(this.left,function(t){if(!(t instanceof on||t instanceof X))throw new Error("left must be assignable: "+t.TYPE)})}else if(!(this.left instanceof Gr||this.left instanceof Ya||this.left instanceof on&&!this.left.optional||this.left instanceof X||this.left instanceof yt))throw new Error("left must be assignable")}},ae),wt=ve("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},_equals:function(t){return this.expression.equals(t.expression)},walk:function(t){var a=this;t.visit(a,function(){a.expression.walk(t)})},_validate:function(){lt(this,"expression")}}),Ai=ve("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},_equals:function(t){return!this.nested==!t.nested&&Wt(this.expression,t.expression)},walk:function(t){var a=this;t.visit(a,function(){a.expression&&a.expression.walk(t)})},_validate:function(){if(this.expression!=null)lt(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),xn=ve("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_equals:function(t){return mi(this.elements,t.elements)},walk:function(t){var a=this;t.visit(a,function(){a.elements.forEach(function(u){u.walk(t)})})},_validate:function(){df(this,"elements",!0,!0)}}),Nn=ve("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if(this.TYPE=="Destructured")throw new Error("should not instantiate AST_Destructured")}});function Sr(t,a,u){if(t instanceof Fn&&u)return Sr(t.name,a);if(t instanceof Nn){if(t.rest!=null&&Sr(t.rest,a),t instanceof At)return t.elements.forEach(function(s){s instanceof Jt||Sr(s,a,!0)});if(t instanceof hi)return t.properties.forEach(function(s){Sr(s.value,a,!0)})}a(t)}var At=ve("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},_equals:function(t){return Wt(this.rest,t.rest)&&mi(this.elements,t.elements)},walk:function(t){var a=this;t.visit(a,function(){a.elements.forEach(function(u){u.walk(t)}),a.rest&&a.rest.walk(t)})}},Nn),Pt=ve("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},_equals:function(t){return Wt(this.key,t.key)&&this.value.equals(t.value)},walk:function(t){var a=this;t.visit(a,function(){a.key instanceof M&&a.key.walk(t),a.value.walk(t)})},_validate:function(){if(typeof this.key!="string"){if(!(this.key instanceof M))throw new Error("key must be string or AST_Node");lt(this,"key")}if(!(this.value instanceof M))throw new Error("value must be AST_Node")}}),hi=ve("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},_equals:function(t){return Wt(this.rest,t.rest)&&mi(this.properties,t.properties)},walk:function(t){var a=this;t.visit(a,function(){a.properties.forEach(function(u){u.walk(t)}),a.rest&&a.rest.walk(t)})},_validate:function(){this.properties.forEach(function(t){if(!(t instanceof Pt))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},Nn),ft=ve("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},_equals:function(t){return mi(this.properties,t.properties)},walk:function(t){var a=this;t.visit(a,function(){a.properties.forEach(function(u){u.walk(t)})})},_validate:function(){this.properties.forEach(function(t){if(!(t instanceof Ci||t instanceof On))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),Ci=ve("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},_equals:function(t){return Wt(this.key,t.key)&&this.value.equals(t.value)},walk:function(t){var a=this;t.visit(a,function(){a.key instanceof M&&a.key.walk(t),a.value.walk(t)})},_validate:function(){if(this.TYPE=="ObjectProperty")throw new Error("should not instantiate AST_ObjectProperty");if(typeof this.key!="string"){if(!(this.key instanceof M))throw new Error("key must be string or AST_Node");lt(this,"key")}if(!(this.value instanceof M))throw new Error("value must be AST_Node")}}),fi=ve("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){lt(this,"value")}},Ci),Qr=ve("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof St))throw new Error("value must be AST_LambdaExpression");if(qt(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(this.value.name!=null)throw new Error("name of object method's lambda must be null")}},fi),ea=ve("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof Mi))throw new Error("value must be AST_Accessor")}},Ci),ua=ve("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof Mi))throw new Error("value must be AST_Accessor")}},Ci),Ht=ve("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_equals:function(t){return this.thedef?this.thedef===t.thedef:this.name==t.name},_validate:function(){if(this.TYPE=="Symbol")throw new Error("should not instantiate AST_Symbol");if(typeof this.name!="string")throw new Error("name must be string")}}),et=ve("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},Ht),xi=ve("SymbolConst",null,{$documentation:"Symbol defining a constant"},et),ur=ve("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[AST_String] the original `export` name"},_equals:function(t){return this.name==t.name&&this.key.equals(t.key)},_validate:function(){if(!(this.key instanceof Dn))throw new Error("key must be AST_String")}},xi),Nr=ve("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},et),vi=ve("SymbolVar",null,{$documentation:"Symbol defining a variable"},et),$n=ve("SymbolFunarg","unused",{$documentation:"Symbol naming a function argument"},vi),nr=ve("SymbolDefun",null,{$documentation:"Symbol defining a function"},et),Ei=ve("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},et),uf=ve("SymbolDefClass",null,{$documentation:"Symbol defining a class"},xi),Ia=ve("SymbolClass",null,{$documentation:"Symbol naming a class expression"},xi),tr=ve("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},et),Ra=ve("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},Ht),X=ve("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},Ht),ja=ve("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[AST_String] the `export` alias"},_equals:function(t){return this.name==t.name&&this.alias.equals(t.alias)},_validate:function(){if(!(this.alias instanceof Dn))throw new Error("alias must be AST_String")}},X),wf=ve("LabelRef",null,{$documentation:"Reference to a label symbol"},Ht),Vi=ve("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_equals:nt,_validate:function(){if(this.TYPE=="ObjectIdentity")throw new Error("should not instantiate AST_ObjectIdentity")}},Ht),ma=ve("Super",null,{$documentation:"The `super` symbol",_validate:function(){if(this.name!=="super")throw new Error('name must be "super"')}},Vi),Ha=ve("This",null,{$documentation:"The `this` symbol",_validate:function(){if(this.TYPE=="This"&&this.name!=="this")throw new Error('name must be "this"')}},Vi),of=ve("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if(this.name!=="new.target")throw new Error('name must be "new.target": '+this.name)}},Ha),Yt=ve("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node?] tag function, or null if absent"},_equals:function(t){return Wt(this.tag,t.tag)&&zs(this.strings,t.strings)&&mi(this.expressions,t.expressions)},walk:function(t){var a=this;t.visit(a,function(){a.tag&&a.tag.walk(t),a.expressions.forEach(function(u){u.walk(t)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");df(this,"expressions"),this.strings.forEach(function(t){if(typeof t!="string")throw new Error("strings must contain string")}),this.tag!=null&&lt(this,"tag")}}),st=ve("Constant",null,{$documentation:"Base class for all constants",_equals:function(t){return this.value===t.value},_validate:function(){if(this.TYPE=="Constant")throw new Error("should not instantiate AST_Constant")}}),Dn=ve("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(this.quote!=null){if(typeof this.quote!="string")throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if(typeof this.value!="string")throw new Error("value must be string")}},st),dn=ve("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if(typeof this.value!="number")throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},st),cf=ve("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if(typeof this.value!="string")throw new Error("value must be string");if(this.value[0]=="-")throw new Error("value cannot be negative")}},st),ir=ve("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_equals:function(t){return""+this.value==""+t.value},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},st),oa=ve("Atom",null,{$documentation:"Base class for atoms",_equals:nt,_validate:function(){if(this.TYPE=="Atom")throw new Error("should not instantiate AST_Atom")}},st),Pr=ve("Null",null,{$documentation:"The `null` atom",value:null},oa),Ya=ve("NaN",null,{$documentation:"The impossible value",value:NaN},oa),yt=ve("Undefined",null,{$documentation:"The `undefined` value",value:function(){}()},oa),Jt=ve("Hole",null,{$documentation:"A hole in an array",value:function(){}()},oa),Gr=ve("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},oa),Ba=ve("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if(this.TYPE=="Boolean")throw new Error("should not instantiate AST_Boolean")}},oa),Fr=ve("False",null,{$documentation:"The `false` atom",value:!1},Ba),Ir=ve("True",null,{$documentation:"The `true` atom",value:!0},Ba);function un(t){this.callback=t,this.directives=Object.create(null),this.stack=[]}un.prototype={visit:function(t,a){this.push(t);var u=this.callback(t,a||Gt);!u&&a&&a(),this.pop()},parent:function(t){return this.stack[this.stack.length-2-(t||0)]},push:function(t){var a;t instanceof Nt?(this.directives=Object.create(this.directives),a="use strict"):t instanceof ci?a=t.value:t instanceof yn&&(this.directives=Object.create(this.directives)),a&&!this.directives[a]&&(this.directives[a]=t),this.stack.push(t)},pop:function(){var t=this.stack.pop();(t instanceof Nt||t instanceof yn)&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(t){for(var a=this.stack,u=a.length-1;--u>=0;){var s=a[u];if(s instanceof t)return s}},has_directive:function(t){var a=this.directives[t];if(a)return a;var u=this.stack[this.stack.length-1];if(u instanceof rn)for(var s=0;s<u.body.length;++s){var w=u.body[s];if(!(w instanceof ci))break;if(w.value==t)return w}},loopcontrol_target:function(t){var a=this.stack;if(t.label)for(var u=a.length;--u>=0;){var s=a[u];if(s instanceof ri&&s.label.name==t.label.name)return s.body}else for(var u=a.length;--u>=0;){var s=a[u];if(s instanceof Ii||t instanceof fr&&s instanceof ki)return s}},in_boolean_context:function(){for(var t=!0,a=0,u,s=this.self();u=this.parent(a++);s=u){if(u instanceof ae)switch(u.operator){case"&&":case"||":u.left===s&&(t=!1);continue;default:return!1}if(u instanceof bn){if(u.condition===s)return!0;continue}if(u instanceof ga||u instanceof jt||u instanceof Un)return u.condition===s;if(u instanceof tt){if(u.in_bool)return!0;for(;u=this.parent(a++);)if(u instanceof yn){if(u.name||(u=this.parent(a++),u.TYPE!="Call"))return!1;break}}if(u instanceof Ze){if(u.tail_node()===s)continue;return t?"d":!0}return u instanceof He?t?"d":!0:u instanceof We?u.operator=="!":!1}}};function ei(t,a){un.call(this),this.before=t,this.after=a}ei.prototype=new un,function(t){function a(s,w){return Ct(s,function(O){return O.transform(w,!0)})}t(M,Gt),t(ri,function(s,w){s.label=s.label.transform(w),s.body=s.body.transform(w)}),t(He,function(s,w){s.body=s.body.transform(w)}),t(ii,function(s,w){s.body=a(s.body,w)}),t(Lr,function(s,w){s.body=s.body.transform(w),s.condition=s.condition.transform(w)}),t(fa,function(s,w){s.condition=s.condition.transform(w),s.body=s.body.transform(w)}),t(jt,function(s,w){s.init&&(s.init=s.init.transform(w)),s.condition&&(s.condition=s.condition.transform(w)),s.step&&(s.step=s.step.transform(w)),s.body=s.body.transform(w)}),t(Xt,function(s,w){s.init=s.init.transform(w),s.object=s.object.transform(w),s.body=s.body.transform(w)}),t(kr,function(s,w){s.expression=s.expression.transform(w),s.body=s.body.transform(w)}),t(Mt,function(s,w){s.value&&(s.value=s.value.transform(w))}),t($r,function(s,w){s.label&&(s.label=s.label.transform(w))}),t(Un,function(s,w){s.condition=s.condition.transform(w),s.body=s.body.transform(w),s.alternative&&(s.alternative=s.alternative.transform(w))}),t(ki,function(s,w){s.expression=s.expression.transform(w),s.body=a(s.body,w)}),t(sr,function(s,w){s.expression=s.expression.transform(w),s.body=a(s.body,w)}),t(ai,function(s,w){s.body=a(s.body,w),s.bcatch&&(s.bcatch=s.bcatch.transform(w)),s.bfinally&&(s.bfinally=s.bfinally.transform(w))}),t(er,function(s,w){s.argname&&(s.argname=s.argname.transform(w)),s.body=a(s.body,w)}),t(gt,function(s,w){s.definitions=a(s.definitions,w)}),t(Vn,function(s,w){s.name=s.name.transform(w),s.value&&(s.value=s.value.transform(w))}),t(Fn,function(s,w){s.name=s.name.transform(w),s.value=s.value.transform(w)}),t(yn,function(s,w){s.name&&(s.name=s.name.transform(w)),s.argnames=a(s.argnames,w),s.rest&&(s.rest=s.rest.transform(w)),s.body=a(s.body,w)});function u(s,w){s.argnames=a(s.argnames,w),s.rest&&(s.rest=s.rest.transform(w)),s.value?s.value=s.value.transform(w):s.body=a(s.body,w)}t(Zi,u),t(gr,u),t(Nt,function(s,w){s.name&&(s.name=s.name.transform(w)),s.extends&&(s.extends=s.extends.transform(w)),s.properties=a(s.properties,w)}),t(ar,function(s,w){s.key instanceof M&&(s.key=s.key.transform(w)),s.value&&(s.value=s.value.transform(w))}),t(hn,function(s,w){s.expression=s.expression.transform(w),s.args=a(s.args,w)}),t(Ze,function(s,w){s.expressions=a(s.expressions,w)}),t(wt,function(s,w){s.expression=s.expression.transform(w)}),t(Ai,function(s,w){s.expression&&(s.expression=s.expression.transform(w))}),t(Mn,function(s,w){s.expression=s.expression.transform(w)}),t(ht,function(s,w){s.expression=s.expression.transform(w),s.property=s.property.transform(w)}),t(On,function(s,w){s.expression=s.expression.transform(w)}),t(at,function(s,w){s.expression=s.expression.transform(w)}),t(ae,function(s,w){s.left=s.left.transform(w),s.right=s.right.transform(w)}),t(bn,function(s,w){s.condition=s.condition.transform(w),s.consequent=s.consequent.transform(w),s.alternative=s.alternative.transform(w)}),t(xn,function(s,w){s.elements=a(s.elements,w)}),t(At,function(s,w){s.elements=a(s.elements,w),s.rest&&(s.rest=s.rest.transform(w))}),t(Pt,function(s,w){s.key instanceof M&&(s.key=s.key.transform(w)),s.value=s.value.transform(w)}),t(hi,function(s,w){s.properties=a(s.properties,w),s.rest&&(s.rest=s.rest.transform(w))}),t(ft,function(s,w){s.properties=a(s.properties,w)}),t(Ci,function(s,w){s.key instanceof M&&(s.key=s.key.transform(w)),s.value=s.value.transform(w)}),t(Ti,function(s,w){s.body=s.body.transform(w)}),t(ji,function(s,w){s.body=s.body.transform(w)}),t(da,function(s,w){s.properties=a(s.properties,w)}),t(Fa,function(s,w){s.all&&(s.all=s.all.transform(w)),s.default&&(s.default=s.default.transform(w)),s.properties&&(s.properties=a(s.properties,w))}),t(Yt,function(s,w){s.tag&&(s.tag=s.tag.transform(w)),s.expressions=a(s.expressions,w)})}(function(t,a){t.DEFMETHOD("transform",function(u,s){var w,O;return u.push(this),u.before&&(w=u.before(this,a,s)),typeof w>"u"&&(w=this,a(w,u),u.after&&(O=u.after(w,s),typeof O<"u"&&(w=O))),u.pop(),w})});var La="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with",kf="false null true",wa=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",kf,La].join(" "),Uf="return new delete throw else case";La=jn(La),wa=jn(wa),Uf=jn(Uf),kf=jn(kf);var $s=/^0b([01]+)$/i,Cs=/^0x([0-9a-f]+)$/i,Ns=/^0o?([0-7]+)$/i,fs=jn(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),ka=`
\r\u2028\u2029`,xf="+-*&%=<>!?|~^",Ps="[{(",ss=",;:",us=")}]",Wf=ss+us,Ef=Ps+ss,Sf=Ef+"`"+us,Tf=ka+"  	\f\v​             　\uFEFF",os=jn(ra(`./'"#`+xf+Sf+Tf));ka=jn(ra(ka)),xf=jn(ra(xf)),Wf=jn(ra(Wf)),Ef=jn(ra(Ef)),Sf=jn(ra(Sf)),Tf=jn(ra(Tf));function Fs(t){return t>=55296&&t<=56319}function cs(t){return t>=56320&&t<=57343}function ls(t){return t>=48&&t<=57}function Af(t){return!os[t]}function xa(t){return/^[a-z_$][a-z0-9_$]*$/i.test(t)}function hs(t){switch(t[0]){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"u":var a;if(t[1]=="{"&&t.slice(-1)=="}")a=t.slice(2,-1);else if(t.length==5)a=t.slice(1);else return;var u=parseInt(a,16);return u<0||isNaN(u)?void 0:u<65536?String.fromCharCode(u):u>1114111?void 0:String.fromCharCode((u>>10)+55232)+String.fromCharCode((u&1023)+56320);case"v":return"\v";case"x":if(t.length!=3)return;var u=parseInt(t.slice(1),16);return u<0||isNaN(u)?void 0:String.fromCharCode(u);case"\r":case`
`:return"";default:return t=="0"?"\0":t[0]>="0"&&t[0]<="9"?void 0:t}}function Is(t){var a;if(a=$s.exec(t))return parseInt(a[1],2);if(a=Cs.exec(t))return parseInt(a[1],16);if(a=Ns.exec(t))return parseInt(a[1],8);var u=parseFloat(t);if(u==t)return u}function lf(t,a,u,s,w){this.message=t,this.filename=a,this.line=u,this.col=s,this.pos=w;try{throw new SyntaxError(t,a,u,s)}catch(O){ts(this,O)}}lf.prototype=Object.create(SyntaxError.prototype),lf.prototype.constructor=lf;function Vf(t,a,u,s,w){throw new lf(t,a,u,s,w)}function Ni(t,a,u){return t.type==a&&(u==null||t.value==u)}var Gf={};function Rs(t,a,u,s){var w={text:t,filename:a,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:Object.create(null),read_template:Yn("Unterminated template literal",function(Ae){for(var Re="";;){var Qe=_n();switch(Qe){case"\\":Qe+=_n();break;case"`":Ae.push(Re);return;case"$":if(J()=="{")return V(),Ae.push(Re),w.regex_allowed=!0,!0}Re+=Qe}function _n(){var vt=V(!0,!0);return vt=="\r"?`
`:vt}})},O=!1;function J(){return w.text.charAt(w.pos)}function V(Ae,Re){var Qe=w.text.charAt(w.pos++);if(Ae&&!Qe)throw Gf;return ka[Qe]?(w.col=0,w.line++,Re||(w.newline_before=!0),Qe=="\r"&&J()==`
`&&(w.pos++,Qe=`
`)):w.col++,Qe}function Be(Ae){for(;Ae-- >0;)V()}function ue(Ae){return w.text.substr(w.pos,Ae.length)==Ae}function F(){for(var Ae=w.text,Re=w.pos;Re<w.text.length;++Re)if(ka[Ae[Re]])return Re;return-1}function ie(Ae,Re){var Qe=w.text.indexOf(Ae,w.pos);if(Qe==-1)throw Gf;return Qe}function ge(){w.tokline=w.line,w.tokcol=w.col,w.tokpos=w.pos}function we(Ae,Re,Qe){w.regex_allowed=Ae=="operator"&&!Ea[Re]||Ae=="keyword"&&Uf[Re]||Ae=="punc"&&Ef[Re],Ae=="punc"&&Re=="."?O=!0:Qe||(O=!1);var _n={type:Ae,value:Re,line:w.tokline,col:w.tokcol,pos:w.tokpos,endline:w.line,endcol:w.col,endpos:w.pos,nlb:w.newline_before,file:a};return/^(?:num|string|regexp)$/i.test(Ae)&&(_n.raw=t.substring(_n.pos,_n.endpos)),Qe||(_n.comments_before=w.comments_before,_n.comments_after=w.comments_before=[]),w.newline_before=!1,new tf(_n)}function ye(){for(;Tf[J()];)V()}function L(Ae){for(var Re="",Qe;(Qe=J())&&Ae(Qe,Re);)Re+=V();return Re}function ke(Ae){Vf(Ae,a,w.tokline,w.tokcol,w.tokpos)}function vn(Ae){return/^0[0-7_]+$/.test(Ae)}function Hn(Ae){var Re=!1,Qe=!1,_n=!1,vt=Ae==".",Wn=L(function(d,Y){switch(d){case"x":case"X":return _n?!1:_n=!0;case"e":case"E":return _n?!0:Re?!1:Re=Qe=!0;case"+":case"-":return Qe;case(Qe=!1,"."):return vt||Re||_n||vn(Y)?!1:vt=!0}return/[_0-9a-dfo]/i.test(d)});Ae&&(Wn=Ae+Wn),vn(Wn)?Vt.has_directive("use strict")&&ke("Legacy octal literals are not allowed in strict mode"):Wn=Wn.replace(_n?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");var l=Is(Wn);return isNaN(l)&&ke("Invalid syntax: "+Wn),vt||Re||J()!="n"?we("num",l):(V(),we("bigint",Wn.toLowerCase()))}function E(Ae){var Re=V(!0,Ae);if(Re>="0"&&Re<="7")return m(Re);if(Re=="u"){var Qe=V(!0,Ae);if(Re+=Qe,Qe!="{")Re+=V(!0,Ae)+V(!0,Ae)+V(!0,Ae);else do Qe=V(!0,Ae),Re+=Qe;while(Qe!="}")}else Re=="x"&&(Re+=V(!0,Ae)+V(!0,Ae));var _n=hs(Re);return typeof _n!="string"&&ke("Invalid escape sequence: \\"+Re),_n}function m(Ae){var Re=J();return Re>="0"&&Re<="7"&&(Ae+=V(!0),Ae[0]<="3"&&(Re=J())>="0"&&Re<="7"&&(Ae+=V(!0))),Ae==="0"?"\0":(Ae.length>0&&Vt.has_directive("use strict")&&ke("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(Ae,8)))}var G=Yn("Unterminated string constant",function(Ae){for(var Re=V(),Qe="";;){var _n=V(!0,!0);if(_n=="\\")_n=E(!0);else if(ka[_n])ke("Unterminated string constant");else if(_n==Re)break;Qe+=_n}var vt=we("string",Qe);return vt.quote=Ae,vt});function ce(Ae){var Re=w.regex_allowed,Qe=F(),_n;return Qe==-1?(_n=w.text.substr(w.pos),w.pos=w.text.length):(_n=w.text.substring(w.pos,Qe),w.pos=Qe),w.col=w.tokcol+(w.pos-w.tokpos),w.comments_before.push(we(Ae,_n,!0)),w.regex_allowed=Re,Vt}var wn=Yn("Unterminated multiline comment",function(){var Ae=w.regex_allowed,Re=ie("*/",!0),Qe=w.text.substring(w.pos,Re).replace(/\r\n|\r|\u2028|\u2029/g,`
`);return Be(Qe.length+2),w.comments_before.push(we("comment2",Qe,!0)),w.regex_allowed=Ae,Vt});function In(){for(var Ae=!1,Re,Qe=!1,_n=J()=="#"?V():"";Re=J();)if(Ae)Re!="u"&&ke("Expecting UnicodeEscapeSequence -- uXXXX"),Re=E(),Af(Re)||ke("Unicode char: "+Re.charCodeAt(0)+" is not valid in identifier"),_n+=Re,Ae=!1;else if(Re=="\\")Qe=Ae=!0,V();else if(Af(Re))_n+=V();else break;if(La[_n]&&Qe){var vt=_n.charCodeAt(0).toString(16).toUpperCase();_n="\\u"+"0000".substr(vt.length)+vt+_n.slice(1)}return _n}var c=Yn("Unterminated regular expression",function(Ae){for(var Re=!1,Qe,_n=!1;Qe=V(!0);)if(ka[Qe])ke("Unexpected line terminator");else if(Re)Ae+="\\"+Qe,Re=!1;else if(Qe=="[")_n=!0,Ae+=Qe;else if(Qe=="]"&&_n)_n=!1,Ae+=Qe;else{if(Qe=="/"&&!_n)break;Qe=="\\"?Re=!0:Ae+=Qe}var vt=In();try{var Wn=new RegExp(Ae,vt);return Wn.raw_source=Ae,we("regexp",Wn)}catch(l){ke(l.message)}});function pe(Ae){function Re(Qe){if(!J())return Qe;var _n=Qe+J();return fs[_n]?(V(),Re(_n)):Qe}return we("operator",Re(Ae||V()))}function _i(){switch(V(),J()){case"/":return V(),ce("comment1");case"*":return V(),wn()}return w.regex_allowed?c(""):pe("/")}function dt(){return V(),ue("..")?we("operator","."+V()+V()):ls(J().charCodeAt(0))?Hn("."):we("punc",".")}function xt(){var Ae=In();return O?we("name",Ae):kf[Ae]?we("atom",Ae):La[Ae]?fs[Ae]?we("operator",Ae):we("keyword",Ae):we("name",Ae)}function Yn(Ae,Re){return function(Qe){try{return Re(Qe)}catch(_n){if(_n===Gf)ke(Ae);else throw _n}}}function Vt(Ae){if(Ae!=null)return c(Ae);for(s&&w.pos==0&&ue("#!")&&(ge(),Be(2),ce("comment5"));;){if(ye(),ge(),u){if(ue("<!--")){Be(4),ce("comment3");continue}if(ue("-->")&&w.newline_before){Be(3),ce("comment4");continue}}var Re=J();if(!Re)return we("eof");var Qe=Re.charCodeAt(0);switch(Qe){case 34:case 39:return G(Re);case 46:return dt();case 47:var _n=_i();if(_n===Vt)continue;return _n}if(ls(Qe))return Hn();if(Sf[Re])return we("punc",V());if(ue("=>"))return we("punc",V()+V());if(xf[Re])return pe();if(Qe==35||Qe==92||!os[Re])return xt();break}ke("Unexpected character '"+Re+"'")}return Vt.context=function(Ae){return Ae&&(w=Ae),w},Vt.add_directive=function(Ae){w.directives[Ae]=!0},Vt.push_directives_stack=function(){w.directives=Object.create(w.directives)},Vt.pop_directives_stack=function(){w.directives=Object.getPrototypeOf(w.directives)},Vt.has_directive=function(Ae){return!!w.directives[Ae]},Vt}var js=jn("typeof void delete -- ++ ! ~ - +"),Ea=jn("-- ++"),Hs=jn("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),dr=function(t,a){for(var u=0;u<t.length;)for(var s=t[u++],w=0;w<s.length;w++)a[s[w]]=u;return a}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),Ys=jn("atom bigint num regexp string");function Ua(t,a){a=qr(a,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var u={input:typeof t=="string"?Rs(t,a.filename,a.html5_comments,a.shebang):t,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};u.token=O();function s(A,K){return Ni(u.token,A,K)}function w(){return u.peeked||(u.peeked=u.input())}function O(){return u.prev=u.token,u.peeked?(u.token=u.peeked,u.peeked=null):u.token=u.input(),u.in_directives=u.in_directives&&(u.token.type=="string"||s("punc",";")),u.token}function J(){return u.prev}function V(A,K,Z,_e){var an=u.input.context();Vf(A,an.filename,K??an.tokline,Z??an.tokcol,an.tokpos)}function Be(A,K){V(K,A.line,A.col)}function ue(A,K){return A+(K===void 0?"":" «"+K+"»")}function F(A){A==null&&(A=u.token),Be(A,"Unexpected token: "+ue(A.type,A.value))}function ie(A,K){if(s(A,K))return O();Be(u.token,"Unexpected token: "+ue(u.token.type,u.token.value)+", expected: "+ue(A,K))}function ge(A){return ie("punc",A)}function we(A){return A.nlb||!Ve(A.comments_before,function(K){return!K.nlb})}function ye(){return!a.strict&&(s("eof")||s("punc","}")||we(u.token))}function L(A){s("punc",";")?O():!A&&!ye()&&ge(";")}function ke(){ge("(");var A=ui();return ge(")"),A}function vn(A){return function(){var K=u.token,Z=A.apply(null,arguments),_e=J();return Z.start=K,Z.end=_e,Z}}function Hn(){(s("operator","/")||s("operator","/="))&&(u.peeked=null,u.token=u.input(u.token.value.substr(1)))}var E=vn(function(A){switch(Hn(),u.token.type){case"string":var K=u.in_directives,Z=ui();if(K)if(Z instanceof Dn){var _e=Z.start.raw.slice(1,-1);u.input.add_directive(_e),Z.value=_e}else u.in_directives=K=!1;return L(),K?new ci(Z):new He({body:Z});case"num":case"bigint":case"regexp":case"operator":case"atom":return G();case"name":switch(u.token.value){case"async":if(Ni(w(),"keyword","function"))return O(),O(),s("operator","*")?(O(),Yn(zr)):Yn(Ur);break;case"await":if(u.in_async)return G();break;case"export":return!A&&a.module!==""&&F(),O(),_n();case"import":var an=w();if(an.type=="punc"&&/^[(.]$/.test(an.value))break;return!A&&a.module!==""&&F(),O(),d();case"let":if(pi()){O();var Ke=Jr();return L(),Ke}break;case"yield":if(u.in_generator)return G();break}return Ni(w(),"punc",":")?m():G();case"punc":switch(u.token.value){case"{":return new Ge({start:u.token,body:Y(),end:J()});case"[":case"(":case"`":return G();case";":return u.in_directives=!1,O(),new Qn;default:F()}case"keyword":switch(u.token.value){case"break":return O(),ce(fr);case"class":return O(),In(Si);case"const":O();var Ke=Di();return L(),Ke;case"continue":return O(),ce(Zr);case"debugger":return O(),L(),new za;case"do":O();var Z=va(E);ie("keyword","while");var zn=ke();return L(!0),new Lr({body:Z,condition:zn});case"while":return O(),new fa({condition:ke(),body:va(E)});case"for":return O(),c();case"function":return O(),s("operator","*")?(O(),Yn(Xr)):Yn(Ri);case"if":return O(),Vt();case"return":u.in_function==0&&!a.bare_returns&&V("'return' outside of function"),O();var _e=null;return s("punc",";")?O():ye()||(_e=ui(),L()),new tt({value:_e});case"switch":return O(),new ki({expression:ke(),body:va(Ee)});case"throw":O(),we(u.token)&&V("Illegal newline after 'throw'");var _e=ui();return L(),new sf({value:_e});case"try":return O(),mn();case"var":O();var Ke=Ar();return L(),Ke;case"with":return u.input.has_directive("use strict")&&V("Strict mode may not include a with statement"),O(),new kr({expression:ke(),body:E()})}}F()});function m(){var A=De(Ra);Ve(u.labels,function(Z){return Z.name!=A.name})||V("Label "+A.name+" defined twice"),ge(":"),u.labels.push(A);var K=E();return u.labels.pop(),K instanceof Ii||A.references.forEach(function(Z){Z instanceof Zr&&Be(Z.label.start,"Continue label `"+A.name+"` must refer to IterationStatement")}),new ri({body:K,label:A})}function G(){var A=ui();return L(),new He({body:A})}function ce(A){var K=null,Z;ye()||(K=De(wf,!0)),K!=null?(Z=bf(function(an){return an.name==K.name},u.labels),Z||Be(K.start,"Undefined label "+K.name),K.thedef=Z):u.in_loop==0&&V(A.TYPE+" not inside a loop or switch"),L();var _e=new A({label:K});return Z&&Z.references.push(_e),_e}function wn(A,K){if(s("name",A)){var Z=w();if(Z&&!Ni(Z,"operator","=")&&!(Z.type=="punc"&&/^[(;}]$/.test(Z.value))&&!(K&&we(Z)))return O()}}function In(A){var K=u.in_async,Z=u.in_generator;u.input.push_directives_stack(),u.input.add_directive("use strict");var _e;A===Si?_e=De(uf):_e=De(Ia,!0);var an=null;s("keyword","extends")&&(O(),Hn(),an=it(!0)),ge("{");for(var Ke=[];!s("punc","}");){if(s("punc",";")){O();continue}var zn=u.token,Xn=!!wn("static"),rt=wn("async",!0);if(s("operator","*")){O();var vr=s("name")&&/^#/.test(u.token.value),jr=cr(),Kt=u.token,Yi=Yn(rt?Qi:br);Yi.start=Kt,Yi.end=J(),Ke.push(new ya({start:zn,static:Xn,private:vr,key:jr,value:Yi,end:J()}));continue}if(Xn&&s("punc","{")){Ke.push(new Mr({start:zn,value:new yf({start:zn,body:Y(),end:J()}),end:J()}));continue}var vr=s("name")&&/^#/.test(u.token.value),jr=cr();if(s("punc","(")){var _a=u.token,Aa=Yn(rt?rr:Tt);Aa.start=_a,Aa.end=J(),Ke.push(new ya({start:zn,static:Xn,private:vr,key:jr,value:Aa,end:J()}));continue}rt&&F(rt);var Dr=null;if(s("operator","="))O(),u.in_async=!1,u.in_generator=!1,Dr=si(),u.in_generator=Z,u.in_async=K;else if(!(s("punc",";")||s("punc","}"))){var pa=null;switch(jr){case"get":pa=rf;break;case"set":pa=af;break}if(pa){Ke.push(new pa({start:zn,static:Xn,private:s("name")&&/^#/.test(u.token.value),key:cr(),value:or(),end:J()}));continue}}L(),Ke.push(new Wr({start:zn,static:Xn,private:vr,key:jr,value:Dr,end:J()}))}return O(),u.input.pop_directives_stack(),u.in_generator=Z,u.in_async=K,new A({extends:an,name:_e,properties:Ke})}function c(){var A=s("name","await")&&O();ge("(");var K=null;if(A||!s("punc",";")){K=s("keyword","const")?(O(),Di(!0)):s("name","let")&&pi()?(O(),Jr(!0)):s("keyword","var")?(O(),Ar(!0)):ui(!0);var Z;if(A?(ie("name","of"),Z=Na):s("operator","in")?(O(),Z=ba):s("name","of")&&(O(),Z=Ca),Z)return K instanceof gt?(K.definitions.length>1&&Be(K.start,"Only one variable declaration allowed in for..in/of loop"),Z!==ba&&K.definitions[0].value&&Be(K.definitions[0].value.start,"No initializers allowed in for..of loop")):hr(K)||(K=Rr(K))instanceof Nn||Be(K.start,"Invalid left-hand side in for..in/of loop"),_i(Z,K)}return pe(K)}function pe(A){ge(";");var K=s("punc",";")?null:ui();ge(";");var Z=s("punc",")")?null:ui();return ge(")"),new jt({init:A,condition:K,step:Z,body:va(E)})}function _i(A,K){Hn();var Z=ui();return ge(")"),new A({init:K,object:Z,body:va(E)})}function dt(A){if(A instanceof xn){var K=null;return A.elements[A.elements.length-1]instanceof On&&(K=dt(A.elements.pop().expression)),new At({start:A.start,elements:A.elements.map(dt),rest:K,end:A.end})}if(A instanceof ze)return new Fn({start:A.start,name:dt(A.left),value:A.right,end:A.end});if(A instanceof Fn)return A.name=dt(A.name),A;if(A instanceof At)return A.elements=A.elements.map(dt),A.rest&&(A.rest=dt(A.rest)),A;if(A instanceof hi)return A.properties.forEach(function(Z){Z.value=dt(Z.value)}),A.rest&&(A.rest=dt(A.rest)),A;if(A instanceof Jt)return A;if(A instanceof ft){var K=null;return A.properties[A.properties.length-1]instanceof On&&(K=dt(A.properties.pop().expression)),new hi({start:A.start,properties:A.properties.map(function(_e){return _e instanceof fi||Be(_e.start,"Invalid destructuring assignment"),new Pt({start:_e.start,key:_e.key,value:dt(_e.value),end:_e.end})}),rest:K,end:A.end})}if(A instanceof $n)return A;if(A instanceof X)return new $n(A);if(A instanceof Ai)return new $n({start:A.start,name:"yield",end:A.end});Be(A.start,"Invalid arrow parameter")}function xt(A,K,Z){var _e=u.in_async,an=u.in_generator;u.in_async=Z,u.in_generator=!1;var Ke=u.in_funarg;u.in_funarg=u.in_function;var zn=A.map(dt),Xn=A.rest||null;Xn&&(Xn=dt(Xn)),u.in_funarg=Ke,ge("=>");var rt,Kt,Yi=u.in_loop,vr=u.labels;++u.in_function,u.input.push_directives_stack(),u.in_loop=0,u.labels=[],s("punc","{")?(u.in_directives=!0,rt=Y(),Kt=null):(rt=[],Hn(),Kt=si());var jr=u.input.has_directive("use strict");u.input.pop_directives_stack(),--u.in_function,u.in_loop=Yi,u.labels=vr,u.in_generator=an,u.in_async=_e;var _a=new(Z?gr:Zi)({start:K,argnames:zn,rest:Xn,body:rt,value:Kt,end:J()});return jr&&_a.each_argname(re),_a}var Yn=function(A){var K=u.in_async,Z=u.in_generator,_e;/Defun$/.test(A.TYPE)?(_e=De(nr),u.in_async=/^Async/.test(A.TYPE),u.in_generator=/Generator/.test(A.TYPE)):(u.in_async=/^Async/.test(A.TYPE),u.in_generator=/Generator/.test(A.TYPE),_e=De(Ei,!0)),_e&&A!==Mi&&!(_e instanceof et)&&F(J()),ge("(");var an=u.in_funarg;u.in_funarg=u.in_function;var Ke=qi(")",!a.strict,!1,function(){return _t($n)});u.in_funarg=an;var zn=u.in_loop,Xn=u.labels;++u.in_function,u.in_directives=!0,u.input.push_directives_stack(),u.in_loop=0,u.labels=[];var rt=Y(),Kt=u.input.has_directive("use strict");u.input.pop_directives_stack(),--u.in_function,u.in_loop=zn,u.labels=Xn,u.in_generator=Z,u.in_async=K;var Yi=new A({name:_e,argnames:Ke,rest:Ke.rest||null,body:rt});return Kt&&(_e&&re(_e),Yi.each_argname(re)),Yi};function Vt(){var A=ke(),K=E(),Z=null;return s("keyword","else")&&(O(),Z=E()),new Un({condition:A,body:K,alternative:Z})}function Ae(){return s("name")||s("string")||xa(u.token.value)}function Re(A){return new Dn({start:A,quote:A.quote,value:A.value,end:A})}function Qe(){var A=u.token;return ie("string"),L(),Re(A)}function _n(){if(s("operator","*")){var A=u.token,K=A;return O(),s("name","as")&&(O(),Ae()||ie("name"),K=u.token,O()),ie("name","from"),new Pa({aliases:[Re(K)],keys:[Re(A)],path:Qe()})}if(s("punc","{")){O();for(var Z=[],_e=[];Ae();){var A=u.token;O(),_e.push(A),s("name","as")?(O(),Ae()||ie("name"),Z.push(u.token),O()):Z.push(A),s("punc","}")||ge(",")}return ge("}"),s("name","from")?(O(),new Pa({aliases:Z.map(Re),keys:_e.map(Re),path:Qe()})):(L(),new da({properties:_e.map(function(zn,Xn){Ni(zn,"name")||Be(zn,"Name expected");var rt=Hi(ja,zn);return rt.alias=Re(Z[Xn]),rt})}))}if(s("keyword","default")){O();var an=u.token,Ke=Wn();return Ke?(Ke.start=an,Ke.end=J()):(Hn(),Ke=ui(),L()),new ji({body:Ke})}return new Ti({body:l()})}function vt(A,K){return K.name&&(K=new A(K),K.name=new(A===Si?uf:nr)(K.name)),K}function Wn(){if(s("name","async"))return Ni(w(),"keyword","function")?(O(),O(),s("operator","*")?(O(),vt(zr,Yn(Qi))):vt(Ur,Yn(rr))):void 0;if(s("keyword"))switch(u.token.value){case"class":return O(),vt(Si,In(xr));case"function":return O(),s("operator","*")?(O(),vt(Xr,Yn(br))):vt(Ri,Yn(Tt))}}var l=vn(function(){if(s("name"))switch(u.token.value){case"async":return O(),ie("keyword","function"),s("operator","*")?(O(),Yn(zr)):Yn(Ur);case"let":O();var A=Jr();return L(),A}else if(s("keyword"))switch(u.token.value){case"class":return O(),In(Si);case"const":O();var A=Di();return L(),A;case"function":return O(),s("operator","*")?(O(),Yn(Xr)):Yn(Ri);case"var":O();var A=Ar();return L(),A}F()});function d(){var A=null,K=De(ur,!0),Z=null,_e;if(K?(K.key=new Dn({start:K.start,value:"",end:K.end}),(_e=s("punc",","))&&O()):_e=!s("string"),_e)if(s("operator","*")){var an=u.token;O(),ie("name","as"),A=De(ur),A.key=Re(an)}else{for(ge("{"),Z=[];Ae();){var Ke;if(Ni(w(),"name","as")){var an=u.token;O(),O(),Ke=De(ur),Ke.key=Re(an)}else Ke=De(ur),Ke.key=new Dn({start:Ke.start,value:Ke.name,end:Ke.end});Z.push(Ke),s("punc","}")||ge(",")}ge("}")}return(A||K||Z)&&ie("name","from"),new Fa({all:A,default:K,path:Qe(),properties:Z})}function Y(){ge("{");for(var A=[];!s("punc","}");)s("eof")&&ge("}"),A.push(E());return O(),A}function Ee(){ge("{");for(var A=[],K,Z,_e,an;!s("punc","}");)s("eof")&&ge("}"),s("keyword","case")?(K&&(K.end=J()),Z=[],K=new sr({start:(an=u.token,O(),an),expression:ui(),body:Z}),A.push(K),ge(":")):s("keyword","default")?(K&&(K.end=J()),_e&&V("More than one default clause in switch statement"),Z=[],K=new Vr({start:(an=u.token,O(),ge(":"),an),body:Z}),A.push(K),_e=K):(Z||F(),Z.push(E()));return K&&(K.end=J()),O(),A}function mn(){var A=Y(),K=null,Z=null;if(s("keyword","catch")){var _e=u.token;O();var an=null;s("punc","(")&&(O(),an=qn(tr),ge(")")),K=new er({start:_e,argname:an,body:Y(),end:J()})}if(s("keyword","finally")){var _e=u.token;O(),Z=new sa({start:_e,body:Y(),end:J()})}return!K&&!Z&&V("Missing catch/finally blocks"),new ai({body:A,bcatch:K,bfinally:Z})}function ut(A,K){for(var Z=[];;){var _e=u.token,an=qn(A),Ke=null;if(s("operator","=")?(O(),Ke=si(K)):!K&&(A===xi||an instanceof Nn)&&V("Missing initializer in declaration"),Z.push(new Vn({start:_e,name:an,value:Ke,end:J()})),!s("punc",","))break;O()}return Z}function pi(){var A=w();return Ni(A,"name")||Ni(A,"punc","[")||Ni(A,"punc","{")}var Di=function(A){return new Er({start:J(),definitions:ut(xi,A),end:J()})},Jr=function(A){return new Wi({start:J(),definitions:ut(Nr,A),end:J()})},Ar=function(A){return new bt({start:J(),definitions:ut(vi,A),end:J()})},wr=function(A){var K=u.token;ie("operator","new");var Z;if(s("punc",".")&&Ni(w(),"name","target"))O(),O(),Z=new of;else{var _e=it(!1),an;s("punc","(")?(O(),an=qi(")",!a.strict)):an=[],Z=new $i({expression:_e,args:an})}return Z.start=K,Z.end=J(),Bt(Z,A)};function gi(){var A,K=u.token,Z=K.value;switch(K.type){case"num":isFinite(Z)?A=new dn({value:Z}):(A=new Gr,Z<0&&(A=new We({operator:"-",expression:A})));break;case"bigint":A=new cf({value:Z});break;case"string":A=new Dn({value:Z,quote:K.quote});break;case"regexp":A=new ir({value:Z});break;case"atom":switch(Z){case"false":A=new Fr;break;case"true":A=new Ir;break;case"null":A=new Pr;break;default:F()}break;default:F()}return O(),A.start=A.end=K,A}var it=function(A){if(s("operator","new"))return wr(A);var K=u.token;if(s("punc")){switch(K.value){case"`":return Bt(ot(null),A);case"(":if(O(),s("punc",")"))return O(),xt([],K);var Z=ui(!1,!0),_e=K.comments_before.length;if([].unshift.apply(Z.start.comments_before,K.comments_before),K.comments_before.length=0,K.comments_before=Z.start.comments_before,K.comments_before_length=_e,_e==0&&K.comments_before.length>0){var an=K.comments_before[0];an.nlb||(an.nlb=K.nlb,K.nlb=!1)}K.comments_after=Z.start.comments_after,Z.start=K,ge(")");var Ke=J();return Ke.comments_before=Z.end.comments_before,Ke.comments_after.forEach(function(vr){Z.end.comments_after.push(vr),vr.nlb&&(u.token.nlb=!0)}),Ke.comments_after.length=0,Ke.comments_after=Z.end.comments_after,Z.end=Ke,s("punc","=>")?xt(Z instanceof Ze?Z.expressions:[Z],K):Bt(Z,A);case"[":return Bt(la(),A);case"{":return Bt(ha(),A)}F()}if(s("keyword"))switch(K.value){case"class":O();var zn=In(xr);return zn.start=K,zn.end=J(),Bt(zn,A);case"function":O();var Xn;return s("operator","*")?(O(),Xn=Yn(br)):Xn=Yn(Tt),Xn.start=K,Xn.end=J(),Bt(Xn,A)}if(s("name")){var rt=Hi(X,K);if(O(),rt.name=="async"){if(s("keyword","function")){O();var Xn;return s("operator","*")?(O(),Xn=Yn(Qi)):Xn=Yn(rr),Xn.start=K,Xn.end=J(),Bt(Xn,A)}if(s("name")&&Ni(w(),"punc","=>"))return K=u.token,rt=Hi(X,K),O(),xt([rt],K,!0);if(s("punc","(")){var Kt=Bt(rt,A);if(!s("punc","=>"))return Kt;var Yi=Kt.args;return Yi[Yi.length-1]instanceof On&&(Yi.rest=Yi.pop().expression),xt(Yi,K,!0)}}return s("punc","=>")?xt([rt],K):Bt(rt,A)}if(Ys[u.token.type])return Bt(gi(),A);F()};function qi(A,K,Z,_e){_e||(_e=si);for(var an=!0,Ke=[];!s("punc",A)&&(an?an=!1:ge(","),!(K&&s("punc",A)));)if(Z&&s("punc",","))Ke.push(new Jt({start:u.token,end:u.token}));else if(!s("operator","..."))Ke.push(_e());else if(_e===si)Ke.push(new On({start:u.token,expression:(O(),_e()),end:J()}));else{O(),Ke.rest=_e(),Ke.rest instanceof Fn&&Be(Ke.rest.start,"Invalid rest parameter");break}return ge(A),Ke}var la=vn(function(){return ge("["),new xn({elements:qi("]",!a.strict,!0)})}),or=vn(function(){return Yn(Mi)}),ha=vn(function(){ge("{");for(var A=!0,K=[];!s("punc","}")&&(A?A=!1:ge(","),!(!a.strict&&s("punc","}")));){var Z=u.token;if(s("operator","*")){O();var zn=cr(),_e=u.token,an=Yn(br);an.start=_e,an.end=J(),K.push(new Qr({start:Z,key:zn,value:an,end:J()}));continue}if(s("operator","...")){O(),K.push(new On({start:Z,expression:si(),end:J()}));continue}if(Ni(w(),"operator","=")){var Ke=De(X);O(),K.push(new fi({start:Z,key:Z.value,value:new ze({start:Z,left:Ke,operator:"=",right:si(),end:J()}),end:J()}));continue}if(Ni(w(),"punc",",")||Ni(w(),"punc","}")){K.push(new fi({start:Z,key:Z.value,value:De(X),end:J()}));continue}var zn=cr();if(s("punc","(")){var Xn=u.token,rt=Yn(Tt);rt.start=Xn,rt.end=J(),K.push(new Qr({start:Z,key:zn,value:rt,end:J()}));continue}if(s("punc",":")){O(),K.push(new fi({start:Z,key:zn,value:si(),end:J()}));continue}if(Z.type=="name")switch(zn){case"async":var Kt=s("operator","*")&&O();zn=cr();var Xn=u.token,rt=Yn(Kt?Qi:rr);rt.start=Xn,rt.end=J(),K.push(new Qr({start:Z,key:zn,value:rt,end:J()}));continue;case"get":K.push(new ua({start:Z,key:cr(),value:or(),end:J()}));continue;case"set":K.push(new ea({start:Z,key:cr(),value:or(),end:J()}));continue}F()}return O(),new ft({properties:K})});function cr(){var A=u.token;switch(A.type){case"operator":La[A.value]||F();case"num":case"string":case"name":case"keyword":case"atom":return O(),""+A.value;case"punc":ge("[");var K=si();return ge("]"),K;default:F()}}function Wa(){var A=u.token.value;return ie("name"),A}function Hi(A,K){var Z=K.value;switch(Z){case"await":u.in_async&&F(K);break;case"super":A=ma;break;case"this":A=Ha;break;case"yield":u.in_generator&&F(K);break}return new A({name:""+Z,start:K,end:K})}function re(A){(A.name=="arguments"||A.name=="eval"||A.name=="let")&&Be(A.start,"Unexpected "+A.name+" in strict mode")}function De(A,K){if(!s("name"))return K||V("Name expected"),null;var Z=Hi(A,u.token);return u.input.has_directive("use strict")&&Z instanceof et&&re(Z),O(),Z}function qn(A){var K=u.token;if(s("punc","[")){O();var Z=qi("]",!a.strict,!0,function(){return _t(A)});return new At({start:K,elements:Z,rest:Z.rest||null,end:J()})}if(s("punc","{")){O();for(var _e=!0,an=[],Ke=null;!s("punc","}")&&(_e?_e=!1:ge(","),!(!a.strict&&s("punc","}")));){var zn=u.token;if(s("punc","[")||Ni(w(),"punc",":")){var Xn=cr();ge(":"),an.push(new Pt({start:zn,key:Xn,value:_t(A),end:J()}));continue}if(s("operator","...")){O(),Ke=qn(A);break}var rt=De(A);s("operator","=")&&(O(),rt=new Fn({start:rt.start,name:rt,value:si(),end:J()})),an.push(new Pt({start:zn,key:zn.value,value:rt,end:J()}))}return ge("}"),new hi({start:K,properties:an,rest:Ke,end:J()})}return De(A)}function _t(A){var K=u.token,Z=qn(A);return s("operator","=")?(O(),new Fn({start:K,name:Z,value:si(),end:J()})):Z}function ot(A){for(var K=A?A.start:u.token,Z=u.input.context().read_template,_e=[],an=[];Z(_e);)O(),an.push(ui()),s("punc","}")||F();return O(),new Yt({start:K,expressions:an,strings:_e,tag:A,end:J()})}function Bt(A,K){for(var Z=A.start,_e=null;;)if(s("operator","?")&&Ni(w(),"punc",".")&&(O(),O(),_e=A),s("punc","[")){O();var an=ui();ge("]"),A=new ht({start:Z,optional:_e===A,expression:A,property:an,end:J()})}else if(K&&s("punc","("))O(),A=new hn({start:Z,optional:_e===A,expression:A,args:qi(")",!a.strict),end:J()});else if(_e===A||s("punc","."))_e!==A&&O(),A=new Mn({start:Z,optional:_e===A,expression:A,property:Wa(),end:J()});else if(s("punc","`"))_e&&V("Invalid template on optional chain"),A=ot(A);else break;if(_e&&(A.terminal=!0),A instanceof hn&&!A.pure){for(var Z=A.start,Ke=Z.comments_before,zn=Rt(Z,"comments_before_length")?Z.comments_before_length:Ke.length;--zn>=0;)if(/[@#]__PURE__/.test(Ke[zn].value)){A.pure=!0;break}}return A}function Zt(A){var K=u.token;if(u.in_async&&s("name","await"))return u.in_funarg===u.in_function&&V("Invalid use of await in function argument"),u.input.context().regex_allowed=!0,O(),new wt({start:K,expression:Zt(A),end:J()});if(u.in_generator&&s("name","yield")){u.in_funarg===u.in_function&&V("Invalid use of yield in function argument"),u.input.context().regex_allowed=!0,O();var Z=null,_e=!1;return s("operator","*")?(O(),Z=si(A),_e=!0):(s("punc")?!Wf[u.token.value]:!ye())&&(Z=si(A)),new Ai({start:K,expression:Z,nested:_e,end:J()})}if(s("operator")&&js[K.value]){O(),Hn();var an=Ta(We,K,Zt(A));return an.start=K,an.end=J(),an}for(var Ke=it(!0);s("operator")&&Ea[u.token.value]&&!we(u.token);)Ke=Ta(Cr,u.token,Ke),Ke.start=K,Ke.end=u.token,O();return Ke}function Ta(A,K,Z){var _e=K.value;switch(_e){case"++":case"--":hr(Z)||Be(K,"Invalid use of "+_e+" operator");break;case"delete":Z instanceof X&&u.input.has_directive("use strict")&&Be(Z.start,"Calling delete on expression not allowed in strict mode");break}return new A({operator:_e,expression:Z})}var Ji=function(A,K,Z){var _e=s("operator")?u.token.value:null;_e=="in"&&Z&&(_e=null);var an=_e!=null?dr[_e]:null;if(an!=null&&an>K){O();var Ke=Ji(Zt(Z),_e=="**"?an-1:an,Z);return Ji(new ae({start:A.start,left:A,operator:_e,right:Ke,end:Ke.end}),K,Z)}return A};function lr(A){return Ji(Zt(A),0,A)}var ia=function(A){var K=u.token,Z=lr(A);if(s("operator","?")){O();var _e=si();return ge(":"),new bn({start:K,condition:Z,consequent:_e,alternative:si(A),end:J()})}return Z};function hr(A){return A instanceof on&&!A.optional||A instanceof X}function Rr(A){if(A instanceof xn){var _e=null;if(A.elements[A.elements.length-1]instanceof On&&(_e=Rr(A.elements.pop().expression),!(_e instanceof Nn||hr(_e))))return A;var K=A.elements.map(Rr);return Ve(K,function(Kt){return Kt instanceof Fn||Kt instanceof Nn||Kt instanceof Jt||hr(Kt)})?new At({start:A.start,elements:K,rest:_e,end:A.end}):A}if(A instanceof ze){var Z=Rr(A.left);return Z instanceof Nn||hr(Z)?new Fn({start:A.start,name:Z,value:A.right,end:A.end}):A}if(!(A instanceof ft))return A;var _e=null;if(A.properties[A.properties.length-1]instanceof On&&(_e=Rr(A.properties.pop().expression),!(_e instanceof Nn||hr(_e))))return A;for(var an=[],Ke=0;Ke<A.properties.length;Ke++){var zn=A.properties[Ke];if(!(zn instanceof fi))return A;var Xn=Rr(zn.value);if(!(Xn instanceof Fn||Xn instanceof Nn||hr(Xn)))return A;an.push(new Pt({start:zn.start,key:zn.key,value:Xn,end:zn.end}))}return new hi({start:A.start,properties:an,rest:_e,end:A.end})}function si(A){var K=u.token,Z=ia(A),_e=u.token.value;if(s("operator")&&Hs[_e]){if(hr(Z)||_e=="="&&(Z=Rr(Z))instanceof Nn)return O(),new ze({start:K,left:Z,operator:_e,right:si(A),end:J()});V("Invalid assignment")}return Z}function ui(A,K){for(var Z=u.token,_e=[];;){if(K&&s("operator","...")){O(),_e.rest=qn($n);break}if(_e.push(si(A)),!s("punc",",")||(O(),K&&s("punc",")")&&Ni(w(),"punc","=>")))break}return _e.length==1&&!_e.rest?_e[0]:new Ze({start:Z,expressions:_e,end:J()})}function va(A){++u.in_loop;var K=A();return--u.in_loop,K}if(a.expression){Hn();var Cf=ui();return ie("eof"),Cf}return function(){var A=u.token,K=[];for(a.module&&(u.in_async=!0,u.input.add_directive("use strict")),u.input.push_directives_stack();!s("eof");)K.push(E(!0));u.input.pop_directives_stack();var Z=J()||A,_e=a.toplevel;return _e?(_e.body=_e.body.concat(K),_e.end=Z):_e=new Et({start:A,body:K,end:Z}),_e}()}function Jf(t,a,u,s){this._bits=0,this.defun=void 0,this.eliminated=0,this.id=t,this.init=s,this.mangled_name=null,this.name=u.name,this.orig=[u],this.references=[],this.replaced=0,this.safe_ids=void 0,this.scope=a}Jf.prototype={forEach:function(t){this.orig.forEach(t),this.references.forEach(t)},mangle:function(t){if(!this.mangled_name){var a=this.global&&t.cache&&t.cache.props;if(a&&a.has(this.name))this.mangled_name=a.get(this.name);else if(!this.unmangleable(t)){var u=this.redefined();u?this.mangled_name=u.mangled_name||u.name:this.mangled_name=Bs(this,t),a&&a.set(this.name,this.mangled_name)}}},redefined:function(){var t=this,a=t.defun;if(a){var u=t.name,s=a.variables.get(u)||a instanceof Et&&a.globals.get(u)||t.orig[0]instanceof xi&&bf(function(w){return w.name==u},a.enclosed);if(s&&s!==t)return s.redefined()||s}},unmangleable:function(t){if(this.exported||this.undeclared||!t.eval&&this.scope.pinned()||t.keep_fargs&&Tr(this))return!0;if(t.keep_fnames){var a=this.orig[0];if(a instanceof Ia||a instanceof uf||a instanceof nr||a instanceof Ei)return!0}return!!(!t.toplevel&&this.global)}},is(Jf,["const_redefs","cross_loop","direct_access","exported","global","undeclared"]);function Tr(t){return t.orig[0]instanceof $n||t.orig[1]instanceof $n}var Sa=jn("delete ++ --");function Gi(t,a){if(a instanceof ze)return a.left===t&&t;if(a instanceof Fn)return a.name===t&&t;if(a instanceof Nn||a instanceof Pt)return t;if(a instanceof Xt)return a.init===t&&t;if(a instanceof at)return Sa[a.operator]&&a.expression}Et.DEFMETHOD("figure_out_scope",function(t){t=qr(t,{cache:null,ie:!1});var a=this,u=null,s=!1,w=0,O=a.parent_scope=null,V=new un(function(F,ie){if(F instanceof Si){var ge=s;return s=V.parent()instanceof Ti,F.name.walk(V),s=ge,L(function(){F.extends&&F.extends.walk(V),F.properties.forEach(function(ke){ke.walk(V)})}),!0}if(F instanceof gt){var ge=s;return s=V.parent()instanceof Ti,ie(),s=ge,!0}if(F instanceof kt){var ge=s;return s=V.parent()instanceof Ti,F.name.walk(V),s=ge,L(function(){F.argnames.forEach(function(vn){vn.walk(V)}),F.rest&&F.rest.walk(V),ti(F,V)}),!0}if(F instanceof ki)return F.expression.walk(V),L(function(){ti(F,V)}),!0;if(F instanceof yr)return F.init_vars(O),ie(),!0;if(F instanceof ai)return L(function(){ti(F,V)}),F.bcatch&&F.bcatch.walk(V),F.bfinally&&F.bfinally.walk(V),!0;if(F instanceof kr){var we=O;do{if(we=we.resolve(),we.uses_with)break;we.uses_with=!0}while(we=we.parent_scope);return L(ie),!0}if(F instanceof li)return L(ie),!0;if(F instanceof Ht&&(F.scope=O),F instanceof Ra&&(F.thedef=F,F.references=[]),F instanceof tr)O.def_variable(F).defun=u;else if(F instanceof xi){var ye=O.def_variable(F);ye.defun=u,s&&(ye.exported=!0)}else if(F instanceof nr){var ye=u.def_function(F,V.parent());s&&(ye.exported=!0)}else if(F instanceof $n)u.def_variable(F);else if(F instanceof Ei){var ye=u.def_function(F,F.name=="arguments"?void 0:u);t.ie&&F.name!="arguments"&&(ye.defun=u.parent_scope.resolve())}else if(F instanceof Nr){var ye=O.def_variable(F);s&&(ye.exported=!0)}else if(F instanceof vi){var ye=u.def_variable(F,F instanceof ur?void 0:null);s&&(ye.exported=!0)}function L(ke){F.init_vars(O);var vn=u,Hn=O;F instanceof rn&&(u=F),O=F,ke(),O=Hn,u=vn}});a.make_def=function(F,ie){return new Jf(++w,this,F,ie)},a.walk(V),a.globals=new Jn;var J=[],V=new un(function(F){if(F instanceof er)return F.argname instanceof Nn?(J.push(F),F.argname.walk(V),J.pop(),ti(F,V),!0):void 0;if(F instanceof yn)return J.push(F),F.name&&F.name.walk(V),F.argnames.forEach(function(m){m.walk(V)}),F.rest&&F.rest.walk(V),J.pop(),Lf(F,V),!0;if(F instanceof $r)return F.label&&F.label.thedef.references.push(F),!0;if(F instanceof et){var ie=F.definition();if(ie.preinit=ie.references.length,F instanceof tr){var ge=ie.redefined();if(ge)for(var we=F.scope;we&&!(!zi(we.enclosed,ge)||we===ge.scope);we=we.parent_scope);}else if(F instanceof xi){var ge=ie.redefined();ge&&(ge.const_redefs=!0)}else if(ie.scope!==F.scope&&(F instanceof nr||F instanceof $n||F instanceof vi)){F.mark_enclosed(t);var ge=F.scope.find_variable(F.name);F.thedef!==ge&&(F.thedef=ge,ge.orig.push(F),F.mark_enclosed(t))}if(F.name!="arguments")return!0;var ye=F instanceof vi&&V.parent();if(ye instanceof Vn&&!ye.value)return!0;var L=F.scope.resolve().find_variable("arguments");return L&&Be(L)&&(L.scope.uses_arguments=3),!0}if(F instanceof X){for(var ke=F.name,L=F.scope.find_variable(ke),vn=J.length;vn>0&&L&&(vn=J.lastIndexOf(L.scope,vn-1),!(vn<0));){var Hn=L.orig[0];if(Hn instanceof tr||Hn instanceof $n||Hn instanceof Ei){F.in_arg=!0;break}L=L.scope.parent_scope.find_variable(ke)}if(!L)L=a.def_global(F);else if(ke=="arguments"&&Be(L)){var ye=V.parent();Gi(F,ye)?L.scope.uses_arguments=3:L.scope.uses_arguments<2&&!(ye instanceof on&&ye.expression===F)?L.scope.uses_arguments=2:L.scope.uses_arguments||(L.scope.uses_arguments=!0)}if(ke=="eval"){var ye=V.parent();if(ye.TYPE=="Call"&&ye.expression===F){var we=F.scope;do{if(we=we.resolve(),we.uses_eval)break;we.uses_eval=!0}while(we=we.parent_scope)}else L.undeclared&&(a.uses_eval=!0)}if(L.init instanceof kt&&L.scope!==L.init.name.scope){var E=F.scope;do if(E===L.init.name.scope)break;while(E=E.parent_scope);E||(L.init=void 0)}return F.thedef=L,F.reference(t),!0}});a.walk(V),t.ie&&a.walk(new un(function(F){if(F instanceof tr){var ie=F.thedef,ge=ie.defun;return ie.name!="arguments"&&ge.name instanceof Ei&&ge.name.name==ie.name&&(ge=ge.parent_scope.resolve()),ue(F,ge),!0}if(F instanceof Ei){var ie=F.thedef;return ue(F,F.scope.parent_scope.resolve())?typeof F.thedef.init<"u"?F.thedef.init=!1:ie.init&&(F.thedef.init=ie.init):ie.defun=void 0,!0}}));function Be(F){return F.orig[0]instanceof $n&&!(F.orig[1]instanceof $n||F.orig[2]instanceof $n)&&!qt(F.scope)}function ue(F,ie){var ge=F.name,we=F.thedef;if(!Ve(we.orig,function(ke){return!(ke instanceof xi||ke instanceof Nr)}))return!1;var ye=ie.find_variable(ge);if(ye){var L=ye.redefined();L&&(ye=L)}else ye=a.globals.get(ge);return ye?ye.orig.push(F):ye=ie.def_variable(F),ye.undeclared&&a.variables.set(ge,ye),ge=="arguments"&&Be(we)&&F instanceof Ei||(we.defun=ye.scope,we.forEach(function(ke){ke.redef=we,ke.thedef=ye,ke.reference(t)})),!0}}),Et.DEFMETHOD("def_global",function(t){var a=this.globals,u=t.name;if(a.has(u))return a.get(u);var s=this.make_def(t);return s.undeclared=!0,s.global=!0,a.set(u,s),s});function vs(t,a,u){t.enclosed=u?u.enclosed.slice():[],t.functions=u?u.functions.clone():new Jn,t.variables=u?u.variables.clone():new Jn,a&&(t.make_def=a.make_def,t.parent_scope=a)}function Df(t,a,u){vs(t,a,u),t.uses_eval=!1,t.uses_with=!1}li.DEFMETHOD("init_vars",function(t,a){vs(this,t,a)}),rn.DEFMETHOD("init_vars",function(t,a){Df(this,t,a)}),Zi.DEFMETHOD("init_vars",function(t,a){return Df(this,t,a),this}),gr.DEFMETHOD("init_vars",function(t,a){Df(this,t,a)}),yn.DEFMETHOD("init_vars",function(t,a){return Df(this,t,a),this.uses_arguments=!1,this.def_variable(new $n({name:"arguments",scope:this,start:this.start,end:this.end})),this}),Ht.DEFMETHOD("mark_enclosed",function(t){for(var a=this.definition(),u=this.scope;u&&!(!zi(u.enclosed,a)||(t?(t.keep_fargs&&u instanceof yn&&u.each_argname(function(s){zi(a.scope.enclosed,s.definition())}),t.keep_fnames&&u.functions.each(function(s){zi(a.scope.enclosed,s)})):u._var_names=void 0,u===a.scope));u=u.parent_scope);}),Ht.DEFMETHOD("reference",function(t){this.definition().references.push(this),this.mark_enclosed(t)}),li.DEFMETHOD("find_variable",function(t){return this.variables.get(t)||this.parent_scope&&this.parent_scope.find_variable(t)}),li.DEFMETHOD("def_function",function(t,a){var u=this.def_variable(t,a);return(!u.init||u.init instanceof kt)&&(u.init=a),this.functions.set(t.name,u),u}),li.DEFMETHOD("def_variable",function(t,a){var u=this.variables.get(t.name);return u?(u.orig.push(t),u.init instanceof St&&(u.init=a)):(u=this.make_def(t,a),this.variables.set(t.name,u),u.global=!this.parent_scope),t.thedef=u});function qf(t,a){var u=t.names_in_use;if(!u){t.cname=-1,t.cname_holes=[],t.names_in_use=u=new Jn;var s=a.cache&&a.cache.props;t.enclosed.forEach(function(w){w.unmangleable(a)&&u.set(w.name,!0),w.global&&s&&s.has(w.name)&&u.set(s.get(w.name),!0)})}return u}function Bs(t,a){var u=t.scope,s=qf(u,a),w=u.cname_holes,O=new Jn,J=[u];t.forEach(function(ue){var F=ue.scope;do{if(_r(F,J))break;qf(F,a).each(function(ie,ge){O.set(ge,ie)}),J.push(F)}while(F=F.parent_scope)});for(var V,Be=0;Be<w.length;Be++)if(V=mr(w[Be]),!O.has(V))return w.splice(Be,1),s.set(V,!0),V;for(;;)if(V=mr(++u.cname),!(s.has(V)||wa[V]||a.reserved.has[V])){if(!O.has(V))break;w.push(u.cname)}return s.set(V,!0),V}Ht.DEFMETHOD("unmangleable",function(t){var a=this.definition();return!a||a.unmangleable(t)}),Ra.DEFMETHOD("unmangleable",An),Ht.DEFMETHOD("definition",function(){return this.thedef});function Kf(t){return t=qr(t,{eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(t.reserved)||(t.reserved=[]),zi(t.reserved,"arguments"),t.reserved.has=jn(t.reserved),t}Et.DEFMETHOD("mangle_names",function(t){if(t=Kf(t),t.cache&&t.cache.props){var a=qf(this,t);t.cache.props.each(function(ue){a.set(ue,!0)})}var u=36,s=-1,w=[],O=new un(function(ue,F){var ie;if(ue instanceof li){ue instanceof ri&&(ie=s),t.webkit&&ue instanceof Ii&&ue.init instanceof Wi&&ue.init.definitions.forEach(function(ke){ke.name.match_symbol(function(vn){if(vn instanceof Nr){var Hn=vn.definition(),E=vn.scope.parent_scope,m=E.def_variable(vn);vn.thedef=Hn,E.to_mangle.push(m),Hn.redefined=function(){return m}}})},!0);var ge=ue.to_mangle=[];if(ue.variables.each(function(ke,vn){ke.unmangleable(t)?qf(ue,t).set(vn,!0):V(ke)||ge.push(ke)}),F(),t.cache&&ue instanceof Et&&ue.globals.each(J),ue instanceof Ri&&O.has_directive("use asm")){var we=new X(ue.name);we.scope=ue,we.reference(t)}if(ge.length>u){var ye=ge.map(function(ke,vn){return vn}).sort(function(ke,vn){return ge[vn].references.length-ge[ke].references.length||ke-vn});ge=ye.slice(0,u).sort(function(ke,vn){return ke-vn}).map(function(ke){return ge[ke]}).concat(ye.slice(u).sort(function(ke,vn){return ke-vn}).map(function(ke){return ge[ke]}))}return ge.forEach(J),ue instanceof ri&&!(t.v8&&Be(O))&&(s=ie),!0}if(ue instanceof Ra){var L;do L=mr(++s);while(wa[L]);return ue.mangled_name=L,!0}});this.walk(O),w.forEach(J);function J(ue){t.reserved.has[ue.name]||ue.mangle(t)}function V(ue){var F=ue.orig[0],ie=ue.redefined();if(!ie){if(!(F instanceof xi))return!1;var ge=ue.scope.resolve();if(ue.scope===ge||ue.scope.parent_scope.find_variable(F.name))return!1;ie=ge.def_variable(F),ge.to_mangle.push(ie)}return w.push(ue),ue.references.forEach(we),(F instanceof tr||F instanceof xi)&&(we(F),ue.redefined=function(){return ie}),!0;function we(ye){ye.thedef=ie,ye.reference(t),ye.thedef=ue}}function Be(ue){for(var F=0,ie;ie=ue.parent(F++);){if(ie instanceof ii)return ie instanceof Et&&!t.toplevel;if(ie instanceof ri)return!0}}}),Et.DEFMETHOD("find_colliding_names",function(t){var a=t.cache&&t.cache.props,u=Object.create(wa);return t.reserved.forEach(s),this.globals.each(w),this.walk(new un(function(O){O instanceof li&&O.variables.each(w)})),u;function s(O){u[O]=!0}function w(O){var J=O.name;if(O.global&&a&&a.has(J))J=a.get(J);else if(!O.unmangleable(t))return;s(J)}}),Et.DEFMETHOD("expand_names",function(t){mr.reset(),mr.sort(),t=Kf(t);var a=this.find_colliding_names(t),u=0;this.globals.each(w),this.walk(new un(function(O){O instanceof li&&O.variables.each(w)}));function s(){var O;do O=mr(u++);while(a[O]);return O}function w(O){if(!(O.global&&t.cache)&&!O.unmangleable(t)&&!t.reserved.has[O.name]){var J=O.redefined(),V=J?J.rename||J.name:s();O.rename=V,O.forEach(function(Be){Be.definition()===O&&(Be.name=V)})}}}),M.DEFMETHOD("tail_node",Or),Ze.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),Et.DEFMETHOD("compute_char_frequency",function(t){t=Kf(t),mr.reset();var a=Ht.prototype.add_source_map;try{Ht.prototype.add_source_map=function(){this.unmangleable(t)||mr.consider(this.name,-1)},t.properties&&(Mn.prototype.add_source_map=function(){mr.consider(this.property,-1)},ht.prototype.add_source_map=function(){u(this.property)}),mr.consider(this.print_to_string(),1)}finally{Ht.prototype.add_source_map=a,delete Mn.prototype.add_source_map,delete ht.prototype.add_source_map}mr.sort();function u(s){s instanceof Dn?mr.consider(s.value,-1):s instanceof bn?(u(s.consequent),u(s.alternative)):s instanceof Ze&&u(s.tail_node())}});var mr=function(){var t=Object.create(null);function a(ue){for(var F=[],ie=0;ie<ue.length;ie++){var ge=ue[ie];F.push(ge),t[ge]=-.01*ie}return F}var u=a("0123456789"),s=a("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_"),w,O;function J(){w=null,O=Object.create(t)}Be.consider=function(ue,F){for(var ie=ue.length;--ie>=0;)O[ue[ie]]+=F};function V(ue,F){return O[F]-O[ue]}Be.sort=function(){w=s.sort(V).concat(u).sort(V)},Be.reset=J,J();function Be(ue){var F=s[ue%54];for(ue=Math.floor(ue/54);--ue>=0;ue>>=6)F+=w[ue&63];return F}return Be}();function ca(t,a){if(!(this instanceof ca))return new ca(t,a);ei.call(this,this.before,this.after),this.options=qr(t,{annotations:!a,arguments:!a,arrows:!a,assignments:!a,awaits:!a,booleans:!a,collapse_vars:!a,comparisons:!a,conditionals:!a,dead_code:!a,default_values:!a,directives:!a,drop_console:!1,drop_debugger:!a,evaluate:!a,expression:!1,functions:!a,global_defs:!1,hoist_exports:!a,hoist_funs:!1,hoist_props:!a,hoist_vars:!1,ie:!1,if_return:!a,imports:!a,inline:!a,join_vars:!a,keep_fargs:a,keep_fnames:!1,keep_infinity:!1,loops:!a,merge_vars:!a,module:!1,negate_iife:!a,objects:!a,optional_chains:!a,passes:1,properties:!a,pure_funcs:null,pure_getters:!a&&"strict",reduce_funcs:!a,reduce_vars:!a,rests:!a,sequences:!a,side_effects:!a,spreads:!a,strings:!a,switches:!a,templates:!a,top_retain:null,toplevel:!!(t&&!t.expression&&t.top_retain),typeofs:!a,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!a,varify:!a,webkit:!1,yields:!a},!0);var u=this.options.evaluate;this.eval_threshold=/eager/.test(u)?1/0:+u;var s=this.options.global_defs;if(typeof s=="object")for(var w in s)/^@/.test(w)&&Rt(s,w)&&(s[w.slice(1)]=Ua(s[w],{expression:!0}));this.options.inline===!0&&(this.options.inline=4),this.drop_fargs=this.options.keep_fargs?An:function(ue,F){if(ue.length_read)return!1;var ie=ue.name;if(!ie)return F&&F.TYPE=="Call"&&F.expression===ue;if(ie.fixed_value()!==ue)return!1;var ge=ie.definition();if(ge.direct_access)return!1;var we=ge.escaped;return we&&we.depth!=1},this.options.module&&(this.directives["use strict"]=!0);var O=this.options.pure_funcs;typeof O=="function"?this.pure_funcs=O:typeof O=="string"?this.pure_funcs=function(ue){var F;return ue instanceof hn?F=ue.expression:ue instanceof Yt&&(F=ue.tag),!(F&&O===F.print_to_string())}:Array.isArray(O)?this.pure_funcs=function(ue){var F;return ue instanceof hn?F=ue.expression:ue instanceof Yt&&(F=ue.tag),!(F&&_r(F.print_to_string(),O))}:this.pure_funcs=nt;var J=this.options.sequences;this.sequences_limit=J==1?800:J|0;var V=this.options.top_retain;V instanceof RegExp?this.top_retain=function(ue){return V.test(ue.name)}:typeof V=="function"?this.top_retain=V:V&&(typeof V=="string"&&(V=V.split(/,/)),this.top_retain=function(ue){return _r(ue.name,V)});var Be=this.options.toplevel;this.toplevel=typeof Be=="string"?{funcs:/funcs/.test(Be),vars:/vars/.test(Be)}:{funcs:Be,vars:Be}}ca.prototype=new ei(function(t,a){if(t._squeezed)return t;var u=t instanceof rn;u&&(this.option("arrows")&&qt(t)&&t.value&&(t.body=[t.first_statement()],t.value=null),t.hoist_properties(this),t.hoist_declarations(this),t.process_returns(this)),a(t,this),a(t,this);var s=t.optimize(this);if(u&&(s===t&&!this.has_directive("use asm")&&!s.pinned()&&(s.drop_unused(this),s.merge_variables(this)&&s.drop_unused(this),a(s,this)),this.option("arrows")&&qt(s)&&s.body.length==1)){var w=s.body[0];w instanceof tt&&(s.body.length=0,s.value=w.value)}return s===t&&(s._squeezed=!0),s}),ca.prototype.option=function(t){return this.options[t]},ca.prototype.exposed=function(t){if(t.exported||t.undeclared)return!0;if(!(t.global||t.scope.resolve()instanceof Et))return!1;var a=this.toplevel;return!Ve(t.orig,function(u){return a[u instanceof nr?"funcs":"vars"]})},ca.prototype.compress=function(t){t=t.resolve_defines(this),t.hoist_exports(this),this.option("expression")&&t.process_expression(!0);for(var a=this.options.merge_vars,u=+this.options.passes||1,s=1/0,w=!1,O={ie:this.option("ie")},J=0;J<u;J++)if(t.figure_out_scope(O),(J>0||this.option("reduce_vars"))&&t.reset_opt_flags(this),this.options.merge_vars=a&&(w||J==u-1),t=t.transform(this),u>1){var V=0;if(t.walk(new un(function(){V++})),M.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:J,min_count:s,count:V}),V<s)s=V,w=!1;else{if(w)break;w=!0}}return this.option("expression")&&t.process_expression(!1),t},function(t){t(M,function(e){return e}),Et.DEFMETHOD("hoist_exports",function(e){if(!e.option("hoist_exports"))return;for(var n=this.body,r=[],i=0;i<n.length;i++){var f=n[i];f instanceof Ti?(n[i]=f=f.body,f instanceof gt?f.definitions.forEach(function(g){g.name.match_symbol(o,!0)}):o(f.name)):f instanceof da&&(n.splice(i--,1),[].push.apply(r,f.properties))}r.length&&n.push(c(da,this,{properties:r}));function o(g){if(g instanceof et){var v=c(ja,g);v.alias=c(Dn,v,{value:v.name}),r.push(v)}}}),rn.DEFMETHOD("process_expression",function(e,n){var r=this,i=new ei(function(f){if(e){if(f instanceof ci&&(f=c(He,f,{body:c(Dn,f)})),f instanceof He)return n?n(f):c(tt,f,{value:f.body})}else if(f instanceof tt){if(n)return n(f);var o=f.value;return o instanceof Dn?c(ci,o):c(He,f,{body:o||c(We,f,{operator:"void",expression:c(dn,f,{value:0})})})}if(f instanceof ii){if(f instanceof yn){if(f!==r)return f}else if(e==="awaits"&&f instanceof ai&&f.bfinally)return f;for(var g=f.body.length;--g>=0;){var v=f.body[g];if(!pi(v,!0)){f.body[g]=v.transform(i);break}}}else f instanceof Un?(f.body=f.body.transform(i),f.alternative&&(f.alternative=f.alternative.transform(i))):f instanceof kr&&(f.body=f.body.transform(i));return f});r.transform(i)}),Et.DEFMETHOD("unwrap_expression",function(){var e=this;switch(e.body.length){case 0:return c(We,e,{operator:"void",expression:c(dn,e,{value:0})});case 1:var n=e.body[0];if(n instanceof ci)return c(Dn,n);if(n instanceof He)return n.body;default:return c(hn,e,{expression:c(Tt,e,{argnames:[],body:e.body}).init_vars(e,e),args:[]})}}),M.DEFMETHOD("wrap_expression",function(){var e=this;return pr(e)||(e=c(He,e,{body:e})),e instanceof Et||(e=c(Et,e,{body:[e]})),e});function a(e,n){var r=n.get_property();if(!(r instanceof M)){var i;if(e instanceof xn){var f=e.elements;if(r=="length")return _i(f.length,e);typeof r=="number"&&r in f&&(i=f[r])}else if(e instanceof yn){if(r=="length")return e.length_read=!0,_i(e.argnames.length,e)}else if(e instanceof ft){r=""+r;for(var o=e.properties,g=o.length;--g>=0;){var v=o[g];if(!Rf(v))return;!i&&o[g].key===r&&(i=o[g].value)}}return i instanceof X&&i.fixed_value()||i}}function u(e,n){if(e instanceof Ba)return De.Boolean[n];if(e instanceof dn)return De.Number[n];if(e instanceof Dn)return De.String[n];if(n=="valueOf")return!1;if(e instanceof xn)return De.Array[n];if(e instanceof yn)return De.Function[n];if(e instanceof ft)return De.Object[n];if(e instanceof ir)return De.RegExp[n]&&!e.value.global}function s(e,n,r,i,f,o,g){var v=n.parent(f);if(!(e.option("unsafe")&&v instanceof Mn&&u(i,v.property))){var y=Gi(r,v);if(y)return y;if(!(f==0&&i&&i.is_constant())){if(v instanceof xn)return s(e,n,v,v,f+1);if(v instanceof ze)switch(v.operator){case"=":return s(e,n,v,i,f+1,o,g);case"&&=":case"||=":case"??=":return s(e,n,v,v,f+1);default:return}if(v instanceof ae)return it[v.operator]?s(e,n,v,v,f+1):void 0;if(v instanceof hn)return!o&&v.expression===r&&!v.is_expr_pure(e)&&(!(i instanceof St)||!(v instanceof $i)&&i.contains_this());if(v instanceof bn)return v.condition===r?void 0:s(e,n,v,v,f+1);if(v instanceof Xt)return v.init===r;if(v instanceof fi){if(v.value!==r)return;var T=n.parent(f+1);return s(e,n,T,T,f+2)}if(v instanceof on){if(v.expression!==r)return;var k=a(i,v);return(!o||g)&&s(e,n,v,k,f+1)}if(v instanceof Ze)return v.tail_node()!==r?void 0:s(e,n,v,i,f+1,o,g)}}}function w(e){return e instanceof Nt||e instanceof yn}function O(e){return e instanceof Nt||e instanceof Ri||e instanceof Tt}function J(e){return e.name=="arguments"&&e.scope.uses_arguments}function V(e,n){do{if(e===n)return!1;if(n instanceof rn)return!0}while(n=n.parent_scope)}function Be(e,n,r){var i=e.redef||e.definition();return e.in_arg&&Tr(i)?!1:Ve(i.orig,function(f){return f instanceof xi||f instanceof Nr?f instanceof ur?!0:n&&_a(n,f):!(r&&f instanceof Ei)})}function ue(e,n,r,i){if(i instanceof ze)return i.operator=="="&&i.right===r;if(i instanceof hn)return i.expression!==r||i instanceof $i;if(i instanceof Wr)return i.value===r&&!i.static;if(i instanceof Mt)return i.value===r&&n.resolve()!==e.scope.resolve();if(i instanceof Vn)return i.value===r}function F(e,n){var r=c(X,e);return r.fixed=n||c(yt,e),r}function ie(e,n){return function(f){var i=e(f),f=F(i,n),o=i.definition();return o.references.push(f),o.replaced++,f}}var ge=/^(0|[1-9][0-9]*)$/;(function(e){e(M,Gt);function n(p,R,S){S.assignments=0,S.bool_return=0,S.cross_loop=!1,S.direct_access=!1,S.drop_return=0,S.escaped=[],S.first_decl=null,S.fixed=!S.const_redefs&&!S.scope.pinned()&&!R.exposed(S)&&!(S.init instanceof St&&S.init!==S.scope)&&S.init,S.reassigned=0,S.recursive_refs=0,S.references=[],S.single_use=void 0}function r(p,R,S){S.variables.each(function(b){n(p,R,b)})}function i(p,R,S){S.fn_defs=[],S.variables.each(function(b){n(p,R,b);var x=b.init;x instanceof kt&&(S.fn_defs.push(x),x.safe_ids=null),b.fixed===null?(b.safe_ids=p.safe_ids,D(p,b)):b.fixed&&(p.loop_ids[b.id]=p.in_loop,D(p,b))}),S.may_call_this=function(){S.may_call_this=S.contains_this()?nt:An},S.uses_arguments&&S.each_argname(function(b){b.definition().last_ref=!1}),R.option("ie")&&S.variables.each(function(b){var x=b.orig[0].definition();x!==b&&(x.fixed=!1)})}function f(p,R){var S=R.safe_ids;return S===void 0||S===p.safe_ids}function o(p,R){var S=p.fn_scanning;p.fn_scanning=R,R.walk(p),p.fn_scanning=S}function g(p,R){R.enclosed.forEach(function(S){if(R.variables.get(S.name)!==S&&!j(p,S)){S.single_use=!1;var b=S.fixed;if(typeof b=="function"&&(b=b()),b instanceof yn){var x=b.safe_ids;switch(x){case null:case!1:return;default:if(x&&x.seq!==p.safe_ids.seq)return}}S.fixed=!1}})}function v(p,R,S){var b=S.safe_ids;if(b!==void 0&&b!==!1)if(S.parent_scope.resolve().may_call_this===nt)_r(S,p.fn_visited)&&g(p,S);else if(b){var x=_r(S,p.fn_visited);b===p.safe_ids?x||o(p,S):x?g(p,S):S.safe_ids=!1}else p.fn_scanning&&p.fn_scanning!==R.scope.resolve()?S.safe_ids=!1:(S.safe_ids=p.safe_ids,o(p,S))}function y(p,R){k(p);var S=R.fn_defs;S.forEach(function(b){b.safe_ids=p.safe_ids,o(p,b)}),S.forEach(function(b){b.safe_ids=void 0}),R.fn_defs=void 0,R.may_call_this=void 0}function T(p,R,S){var b=Object.create(p.defined_ids);(!R||S)&&(b.seq=Object.create(null)),p.defined_ids=b;var x=Object.create(p.safe_ids);R||(x.seq={}),S&&(x.cond=!0),p.safe_ids=x}function k(p){p.defined_ids=Object.getPrototypeOf(p.defined_ids),p.safe_ids=Object.getPrototypeOf(p.safe_ids)}function z(p,R){var S=p.defined_ids.seq;p.defined_ids[R.id]=S,S[R.id]=!0}function $(p,R){var S=p.defined_ids.seq;p.assigned_ids[R.id]=S,S[R.id]=!1}function N(p,R){var S=p.defined_ids.seq,b=p.defined_ids[R.id];if(b!==S||!b[R.id])return!1;var x=p.assigned_ids[R.id];return!x||x===S}function D(p,R){p.safe_ids[R.id]={}}function W(p,R){p.references.push(R),p.last_ref!==!1&&(p.last_ref=R)}function j(p,R){if(R.single_use=="m")return!1;var S=p.safe_ids[R.id];if(S){var b=Rt(p.safe_ids,R.id);if(!b){var x=p.safe_ids.seq;S.read?S.read!==x&&(S.read=!0):S.read=x}return R.fixed==null?J(R)||R.global&&R.name=="arguments"?!1:(p.loop_ids[R.id]=null,R.fixed=c(yt,R.orig[0]),b&&(R.safe_ids=void 0),!0):!S.assign||S.assign===p.safe_ids}return R.fixed instanceof kt}function ee(p,R,S){if(!S&&(Tr(R)&&R.scope.uses_arguments&&!p.has_directive("use strict")||!Ve(R.orig,function(P){return!(P instanceof xi)})))return!1;if(R.fixed===void 0)return S||Ve(R.orig,function(P){return!(P instanceof Nr)});if(R.fixed===!1||R.fixed===0)return!1;var b=p.safe_ids[R.id];if(R.safe_ids)return R.safe_ids[R.id]=!1,R.safe_ids=void 0,R.fixed===null||Rt(p.safe_ids,R.id)&&!b.read;if(!Rt(p.safe_ids,R.id)){if(!b)return!1;if(b.read||p.in_loop){var x=p.find_parent(li);if(x instanceof Nt||R.scope.resolve()!==x.resolve())return!1}b.assign=b.assign&&b.assign!==p.safe_ids?!0:p.safe_ids}return R.fixed!=null&&b.read&&(b.read!==p.safe_ids.seq||p.loop_ids[R.id]!==p.in_loop)?!1:j(p,R)&&Ve(R.orig,function(P){return!(P instanceof Ei)})}function Se(p,R){return p.option("unused")&&!R.scope.pinned()&&R.single_use!==!1&&R.references.length-R.recursive_refs==1&&!(Tr(R)&&R.scope.uses_arguments)}function $e(p){if(!p)return!1;if(p instanceof ze){var R=p.operator;return R=="="?$e(p.right):!it[R.slice(0,-1)]}return p instanceof Ze?$e(p.tail_node()):p.is_constant()||w(p)||p instanceof Vi}function tn(p,R){if(R instanceof xn)return!0;if(R instanceof ae)return it[R.operator];if(R instanceof bn)return R.condition!==p;if(R instanceof Ze)return R.tail_node()===p;if(R instanceof On)return!0}function qe(p,R,S,b,x,P,U){var B=p.parent(P);if(!(x&&x.is_constant())){if(ue(R,S,b,B)){R.escaped.push(B),U>1&&!(x&&x.is_constant_expression(S))&&(U=1),(!R.escaped.depth||R.escaped.depth>U)&&(R.escaped.depth=U),R.scope.resolve()!==S.resolve()&&(R.escaped.cross_scope=!0),R.fixed&&(R.fixed.escaped=R.escaped);return}else if(tn(b,B))qe(p,R,S,B,B,P+1,U);else if(B instanceof fi&&B.value===b){var te=p.parent(P+1);qe(p,R,S,te,te,P+2,U)}else if(B instanceof on&&B.expression===b&&(x=a(x,B),qe(p,R,S,B,x,P+1,U+1),x))return;P>0||B instanceof hn&&B.expression===b||B instanceof Ze&&B.tail_node()!==b||B instanceof He||B instanceof at&&!Sa[B.operator]||(R.direct_access=!0,R.fixed&&(R.fixed.direct_access=!0))}}function fe(p){if(p instanceof ht){var R=p.expression;if(R instanceof X){var S=R.definition();if(J(S)){var b=p.property;b.is_constant()&&(b=b.value),!(!(b instanceof M)&&!ge.test(b))&&(S.reassigned++,(b instanceof M?S.scope.argnames:[S.scope.argnames[b]]).forEach(function(x){x instanceof $n&&(x.definition().fixed=!1)}))}}}}function le(p,R){var S,b;return function(){var x=p();return S!==x&&(S=x,b=R(x)),b}}function Q(p,R,S){var b,x;return function(){if(x===R)return R;var P=S(),U=zn(p,P,!0);return U instanceof M?x=R:b!==P&&(b=P,x=U===void 0?pe(R,[P,R.value]):P),x}}function Ce(p,R,S,b,x){var P=new un(function(U){if(U instanceof Fn){we(U),T(p,!0,!0),U.value.walk(p),k(p);var B=b;return B&&(b=Q(R,U,B)),U.name.walk(P),b=B,!0}if(U instanceof At){we(U);var B=b;if(U.elements.forEach(function(ne,Pe){if(ne instanceof Jt)return we(ne);B&&(b=le(B,function(Oe){return c(ht,ne,{expression:Oe,property:c(dn,ne,{value:Pe})})})),ne.walk(P)}),U.rest){var te;B&&(b=R.option("rests")&&le(B,function(ne){if(!(ne instanceof xn))return U;for(var Pe=0,Oe=U.elements.length;Pe<Oe;Pe++)if(ne.elements[Pe]instanceof On)return U;return te||(te=c(xn,U,{})),te.elements=ne.elements.slice(Oe),te})),U.rest.walk(P)}return b=B,!0}if(U instanceof hi){we(U);var B=b;return U.properties.forEach(function(ne){we(ne),ne.key instanceof M&&(T(p),ne.key.walk(p),k(p)),B&&(b=le(B,function(Pe){var Oe=ne.key,kn=ht;return typeof Oe=="string"&&(xa(Oe)?kn=Mn:Oe=_i(Oe,ne)),c(kn,ne,{expression:Pe,property:Oe})})),ne.value.walk(P)}),U.rest&&(b=!1,U.rest.walk(P)),b=B,!0}return x(U,b,function(){for(var C=p.stack.length,ne=0,Pe=P.stack.length-1;ne<Pe;ne++)p.stack.push(P.stack[ne]);U.walk(p),p.stack.length=C}),!0});S.walk(P)}function fn(p,R,S){var b=this;b.inlined=!1;var x=p.parent(),P=!wi(b)&&!Ui(b),U=!P,B=!1;b.walk(new un(function(Fe){if(U)return B=!0;if(Fe instanceof tt)return U=!0;if(Fe instanceof rn&&Fe!==b)return!0})),B&&T(p,P),i(p,S,b);var te=!b.uses_arguments||p.has_directive("use strict");b.argnames.forEach(function(Fe,Ne){var h=x.args[Ne];Ce(p,S,Fe,function(){var q=b.argnames.indexOf(Fe),he=q<0?h:x.args[q];return he instanceof Ze&&he.expressions.length<2&&(he=he.expressions[0]),he||c(yt,x)},kn)});var C=b.rest,ne;C&&Ce(p,S,C,S.option("rests")&&function(){return b.rest!==C?C:(ne||(ne=c(xn,b,{})),ne.elements=x.args.slice(b.argnames.length),ne)},kn),Lf(b,p);var Pe=p.defined_ids,Oe=p.safe_ids;return y(p,b),B||(p.defined_ids=Pe,p.safe_ids=Oe),!0;function kn(Fe,Ne){var h=Fe.definition();!h.first_decl&&h.references.length==0&&(h.first_decl=Fe),Ne&&te&&h.fixed===void 0?(D(p,h),p.loop_ids[h.id]=p.in_loop,h.fixed=Ne,h.fixed.assigns=[Fe]):h.fixed=!1}}e(ze,function(p,R,S){var b=this,x=b.left,P=b.right,U=x instanceof X&&x.definition(),B=U||x instanceof Nn;switch(b.operator){case"=":if(x.equals(P)&&!x.has_side_effects(S))return P.walk(p),Pe(x),!0;if(U&&P instanceof St)return Oe(),P.parent_scope.resolve().fn_defs.push(P),P.safe_ids=null,(!U.fixed||!b.write_only||p.safe_ids.cond)&&v(p,U,P),!0;if(B)return P.walk(p),Oe(),!0;fe(x);return;case"&&=":case"||=":case"??=":var te=!0;default:if(!B)return fe(x),kn();$(p,U),U.assignments++;var C=U.fixed;if(s(S,p,b,b,0))return U.fixed=!1,kn();var ne=j(p,U);return te&&T(p,!0,!0),P.walk(p),te&&k(p),ne&&!x.in_arg&&ee(p,U)?(W(U,x),D(p,U),U.single_use&&(U.single_use=!1),x.fixed=U.fixed=function(){return c(ae,b,{operator:b.operator.slice(0,-1),left:F(x,C),right:b.right})},x.fixed.assigns=!C||!C.assigns?[U.orig[0]]:C.assigns.slice(),x.fixed.assigns.push(b),x.fixed.to_binary=ie(function(Fe){return Fe.left},C)):(x.walk(p),U.fixed=!1),!0}function Pe(Fe){if(we(Fe),Fe instanceof Mn)Pe(Fe.expression);else if(Fe instanceof ht)Pe(Fe.expression),Fe.property.walk(p);else if(Fe instanceof X){var Ne=Fe.definition();W(Ne,Fe),Ne.fixed&&(Fe.fixed=Ne.fixed,Fe.fixed.assigns?Fe.fixed.assigns.push(b):Fe.fixed.assigns=[b])}else Fe.walk(p)}function Oe(){var Fe=U&&_f(p,U),Ne=s(S,p,b,P,0,$e(P),Fe);Ce(p,S,x,function(){return b.right},function(h,q,he){if(!(h instanceof X)){fe(h),he();return}var se=h.definition();$(p,se),se.assignments++,!q||h.in_arg||!ee(p,se)?(he(),se.fixed=!1):(W(se,h),D(p,se),(x instanceof Nn||se.orig.length==1&&se.orig[0]instanceof nr)&&(se.single_use=!1),p.loop_ids[se.id]=p.in_loop,se.fixed=Ne?0:q,h.fixed=q,h.fixed.assigns=[b],qe(p,se,h.scope,b,P,0,1))})}function kn(){if(te)return x.walk(p),T(p,!0,!0),P.walk(p),k(p),!0}}),e(ae,function(p){if(it[this.operator])return this.left.walk(p),T(p,!0,!0),this.right.walk(p),k(p),!0}),e(li,function(p,R,S){r(p,S,this)}),e(hn,function(p){var R=this,S=R.expression;if(S instanceof St){var b=d(R);return R.args.forEach(function(te){te.walk(p),te instanceof On&&(b=!1)}),b&&(S.reduce_vars=fn),S.walk(p),b&&delete S.reduce_vars,!0}if(R.TYPE=="Call")switch(p.in_boolean_context()){case"d":var x=!0;case!0:B(S,x)}S.walk(p);var P=R.optional;P&&T(p,!0,!0),R.args.forEach(function(te){te.walk(p)}),P&&k(p);var U=S instanceof X&&S.fixed_value();return U instanceof yn?v(p,S.definition(),U):(p.defined_ids.seq={},p.find_parent(rn).may_call_this()),!0;function B(te,C){if(te instanceof ze){if(te.operator!="=")return;B(te.left,C),B(te.right,C)}else if(te instanceof ae){if(!it[te.operator])return;B(te.left,C),B(te.right,C)}else if(te instanceof bn)B(te.consequent,C),B(te.alternative,C);else if(te instanceof X){var ne=te.definition();ne.bool_return++,C&&ne.drop_return++}}}),e(Nt,function(p,R,S){var b=this;r(p,S,b),b.extends&&b.extends.walk(p);var x=b.properties.filter(function(B){return we(B),B.key instanceof M&&(p.push(B),B.key.walk(p),p.pop()),B.value});if(b.name){var P=b.name.definition(),U=p.parent();(U instanceof Ti||U instanceof ji)&&(P.single_use=!1),ee(p,P,!0)?(D(p,P),p.loop_ids[P.id]=p.in_loop,P.fixed=function(){return b},P.fixed.assigns=[b],Kt(P)||(P.single_use=!1)):P.fixed=!1}return x.forEach(function(B){p.push(B),!B.static||mn(B)&&B.value.contains_this()?(T(p),B.value.walk(p),k(p)):B.value.walk(p),p.pop()}),!0}),e(yf,function(p,R,S){var b=this;return T(p,!0),i(p,S,b),R(),y(p,b),!0}),e(bn,function(p){return this.condition.walk(p),T(p,!0,!0),this.consequent.walk(p),k(p),T(p,!0,!0),this.alternative.walk(p),k(p),!0}),e(Fn,function(p){return T(p,!0,!0),this.value.walk(p),k(p),this.name.walk(p),!0}),e(Lr,function(p){var R=p.in_loop;return p.in_loop=this,T(p),this.body.walk(p),_e(this,p.parent())&&(k(p),T(p)),this.condition.walk(p),k(p),p.in_loop=R,!0}),e(Mn,function(p,R){R();var S=this,b=S.expression;if(!S.optional){for(;b instanceof ze&&b.operator=="=";){var x=b.left;x instanceof X&&z(p,x.definition()),b=b.right}b instanceof X&&z(p,b.definition())}return!0}),e(jt,function(p,R,S){var b=this;r(p,S,b),b.init&&b.init.walk(p);var x=p.in_loop;return p.in_loop=b,T(p),b.condition&&b.condition.walk(p),b.body.walk(p),b.step&&(_e(b,p.parent())&&(k(p),T(p)),b.step.walk(p)),k(p),p.in_loop=x,!0}),e(Xt,function(p,R,S){var b=this;r(p,S,b),b.object.walk(p);var x=p.in_loop;p.in_loop=b,T(p);var P=b.init;return P instanceof gt?P.definitions[0].name.mark_symbol(function(U){if(U instanceof et){var B=U.definition();B.assignments++,B.fixed=!1}},p):P instanceof Nn||P instanceof X?P.mark_symbol(function(U){if(U instanceof X){var B=U.definition();W(B,U),B.assignments++,U.is_immutable()||(B.fixed=!1)}},p):P.walk(p),b.body.walk(p),k(p),p.in_loop=x,!0}),e(Un,function(p){return this.condition.walk(p),T(p,!0,!0),this.body.walk(p),k(p),this.alternative&&(T(p,!0,!0),this.alternative.walk(p),k(p)),!0}),e(ri,function(p){return T(p,!0),this.body.walk(p),k(p),!0}),e(yn,function(p,R,S){var b=this;return!f(p,b)||!zi(p.fn_visited,b)||(b.inlined=!1,T(p),i(p,S,b),R(),y(p,b),b.name&&qe(p,b.name.definition(),b,b.name,b,0,1)),!0}),e(kt,function(p,R,S){var b=this,x=b.name.definition();Re(b)||(x.fixed=!1);var P=p.parent();return(P instanceof Ti||P instanceof ji)&&(x.single_use=!1),!f(p,b)||!zi(p.fn_visited,b)||(b.inlined=!1,T(p),i(p,S,b),R(),y(p,b)),!0}),e(ht,function(p,R){var S=this,b=S.expression;if(S.optional)b.walk(p),T(p,!0,!0),S.property.walk(p),k(p);else{for(R();b instanceof ze&&b.operator=="=";){var x=b.left;x instanceof X&&z(p,x.definition()),b=b.right}b instanceof X&&z(p,b.definition())}return!0}),e(ki,function(p,R,S){var b=this;r(p,S,b),b.expression.walk(p);var x=!0;return b.body.forEach(function(P){P instanceof Vr||(P.expression.walk(p),x&&(x=!1,T(p,!0,!0)))}),x||k(p),ti(b,p),!0}),e(yr,function(p){return T(p,!0,!0),ti(this,p),k(p),!0}),e(tr,function(){var p=this.definition();!p.first_decl&&p.references.length==0&&(p.first_decl=this),p.fixed=!1}),e(et,function(){var p=this.definition();!p.first_decl&&p.references.length==0&&(p.first_decl=this)}),e(nr,function(){var p=this.definition();!p.first_decl&&p.references.length==0&&(p.first_decl=this),p.orig.length>1&&p.scope.resolve()!==this.scope&&(p.fixed=!1)}),e(ur,function(){var p=this.definition();p.first_decl=this,p.fixed=!1}),e(X,function(p,R,S){var b=this,x=b.definition(),P=x.fixed||x.last_ref&&x.last_ref.fixed;W(x,b),N(p,x)&&(b.defined=!0),x.references.length==1&&!x.fixed&&x.orig[0]instanceof nr&&(p.loop_ids[x.id]=p.in_loop);var U=_f(p,x);switch(U&&U.enclosed.forEach(function(ne){if(x!==ne&&ne.scope.resolve()!==U){var Pe=ne.fixed&&ne.fixed.assigns;if(Pe&&!(Pe[Pe.length-1]instanceof Vn)){var Oe=p.safe_ids[ne.id];Oe&&(Oe.assign=!0)}}}),x.single_use=="m"&&x.fixed&&(x.fixed=0,x.single_use=!1),x.fixed){case 0:j(p,x)||(x.fixed=!1);case!1:var B=x.redefined();B&&V(x.scope,b.scope)&&(B.single_use=!1);break;case void 0:x.fixed=!1;break;default:if(!j(p,x)){x.fixed=!1;break}b.in_arg&&x.orig[0]instanceof Ei&&(b.fixed=x.scope);var te=b.fixed_value();U?x.recursive_refs++:te&&Se(S,x)?(x.in_loop=p.loop_ids[x.id]!==p.in_loop,x.single_use=w(te)&&!te.pinned()&&(!x.in_loop||p.parent()instanceof hn)||!x.in_loop&&x.scope===b.scope.resolve()&&te.is_constant_expression()):x.single_use=!1,s(S,p,b,te,0,$e(te),U)&&(x.single_use?x.single_use="m":x.fixed=0),x.fixed&&p.loop_ids[x.id]!==p.in_loop&&(x.cross_loop=!0),qe(p,x,b.scope,b,te,0,1);break}if(b.fixed||(b.fixed=x.fixed===0?P:x.fixed),!te&&P&&(te=P instanceof M?P:P()),te instanceof yn){if(x.fixed){var C=p.parent();if(C instanceof hn&&C.expression===b)return}v(p,x,te)}}),e(Yt,function(p){var R=this,S=R.tag;if(S){if(S instanceof St)return R.expressions.forEach(function(x){x.walk(p)}),S.walk(p),!0;S.walk(p),R.expressions.forEach(function(x){x.walk(p)});var b=S instanceof X&&S.fixed_value();return b instanceof yn?v(p,S.definition(),b):p.find_parent(rn).may_call_this(),!0}}),e(Et,function(p,R,S){var b=this;return b.globals.each(function(x){n(p,S,x)}),T(p,!0),i(p,S,b),R(),y(p,b),!0}),e(ai,function(p,R,S){var b=this;return r(p,S,b),T(p,!0),ti(b,p),k(p),b.bcatch&&(T(p,!0,!0),b.bcatch.walk(p),k(p)),b.bfinally&&b.bfinally.walk(p),!0}),e(at,function(p){var R=this;if(Ea[R.operator]){var S=R.expression;if(!(S instanceof X)){fe(S);return}var b=S.definition();b.assignments++;var x=b.fixed;return j(p,b)&&!S.in_arg&&ee(p,b)?(W(b,S),D(p,b),b.single_use&&(b.single_use=!1),b.fixed=function(){return c(ae,R,{operator:R.operator.slice(0,-1),left:c(We,R,{operator:"+",expression:F(S,x)}),right:c(dn,R,{value:1})})},b.fixed.assigns=x&&x.assigns?x.assigns.slice():[],b.fixed.assigns.push(R),R instanceof We?S.fixed=b.fixed:(S.fixed=function(){return c(We,R,{operator:"+",expression:F(S,x)})},S.fixed.assigns=x&&x.assigns,S.fixed.to_prefix=ie(function(P){return P.expression},b.fixed))):(S.walk(p),b.fixed=!1),!0}}),e(Vn,function(p,R,S){var b=this,x=b.value;if(x instanceof St&&b.name instanceof et){U(),x.parent_scope.resolve().fn_defs.push(x),x.safe_ids=null;var P=b.name.definition();P.fixed||v(p,P,x)}else x?(x.walk(p),U()):p.parent()instanceof Wi?U():b.name.walk(p);return!0;function U(){Ce(p,S,b.name,function(){return b.value||c(yt,b)},function(B,te){var C=B.definition();$(p,C),!C.first_decl&&C.references.length==0&&(C.first_decl=B),te&&ee(p,C,!0)?(D(p,C),p.loop_ids[C.id]=p.in_loop,C.fixed=te,C.fixed.assigns=[b],(B instanceof xi&&C.redefined()||!(Be(B)||Kt(C)))&&(C.single_use=!1)):C.fixed=!1})}}),e(fa,function(p,R){var S=p.in_loop;return p.in_loop=this,T(p),R(),k(p),p.in_loop=S,!0})})(function(e,n){e.DEFMETHOD("reduce_vars",n)});function we(e){e._squeezed=!1,e._optimized=!1,e.single_use=!1,e instanceof li&&(e._var_names=void 0),e instanceof X&&(e.fixed=void 0)}Et.DEFMETHOD("reset_opt_flags",function(e){var n=new un(e.option("reduce_vars")?function(r,i){return we(r),r.reduce_vars(n,i,e)}:we);n.assigned_ids=Object.create(null),n.defined_ids=Object.create(null),n.defined_ids.seq={},n.fn_scanning=null,n.fn_visited=[],n.in_loop=null,n.loop_ids=Object.create(null),n.safe_ids=Object.create(null),n.safe_ids.seq={},this.walk(n)}),Ht.DEFMETHOD("fixed_value",function(e){var n=this.definition(),r=n.fixed;if(r)return this.fixed&&(r=this.fixed),(r instanceof M?r:r()).tail_node();if(r=r===0&&this.fixed,!r)return r;var i=(r instanceof M?r:r()).tail_node();if(e&&n.escaped.depth!=1&&Ga(i,!0)||i.is_constant())return i}),X.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return e.orig[0]instanceof Ei?e.orig.length==1?!0:this.in_arg?!(e.orig[1]instanceof $n):!1:!1}),M.DEFMETHOD("convert_symbol",Gt);function ye(e,n){return this.transform(new ei(function(r,i){return r instanceof Fn?(r=r.clone(),r.name=r.name.transform(this),r):r instanceof Nn?(r=r.clone(),i(r,this),r):r instanceof Pt?(r=r.clone(),r.value=r.value.transform(this),r):r.convert_symbol(e,n)}))}Fn.DEFMETHOD("convert_symbol",ye),Nn.DEFMETHOD("convert_symbol",ye);function L(e,n){var r=c(e,this);return n(r,this)||r}et.DEFMETHOD("convert_symbol",L),X.DEFMETHOD("convert_symbol",L);function ke(e){var n=e.definition();n.assignments++,n.references.push(e)}function vn(e,n){var r=new un(function(i){return i instanceof Fn?(i.value.walk(n),i.name.walk(r),!0):i instanceof Pt?(i.key instanceof M&&i.key.walk(n),i.value.walk(r),!0):e(i)});this.walk(r)}Fn.DEFMETHOD("mark_symbol",vn),Nn.DEFMETHOD("mark_symbol",vn);function Hn(e){return e(this)}et.DEFMETHOD("mark_symbol",Hn),X.DEFMETHOD("mark_symbol",Hn),M.DEFMETHOD("match_symbol",function(e){return e(this)});function E(e,n){var r=!1,i=new un(function(f){if(r)return!0;if(f instanceof Fn)return n?(f.name.walk(i),!0):r=!0;if(f instanceof Pt)return!n&&f.key instanceof M?r=!0:(f.value.walk(i),!0);if(e(f))return r=!0});return this.walk(i),r}Fn.DEFMETHOD("match_symbol",E),Nn.DEFMETHOD("match_symbol",E);function m(e){return e instanceof zr||e instanceof Qi}function G(e){var n=0,r=e.self();do if(r.variables)return r;while(r=e.parent(n++))}function ce(e,n,r,i,f,o){for(var g;g=e.parent(n++);r=g){if(g===i)return!1;if(o&&g instanceof yn){if(g.name||wi(g)||Ui(g))return!0}else if(g instanceof ai&&(g.bfinally&&g.bfinally!==r||f&&g.bcatch&&g.bcatch!==r))return!0}return!1}var wn=jn("Infinity NaN undefined");function In(e,n){if(e instanceof ze)return e.operator!="="||e.right.tail_node().is_constant()?!0:In(e.left,n);if(e instanceof oa||e instanceof Vi)return!0;if(e instanceof on){if(e.property==="__proto__")return!0;if(e=e.expression,e instanceof X){if(e.is_immutable())return!1;e=e.fixed_value()}return!e||e.tail_node().is_constant()?!0:In(e,n)}if(e instanceof X){if(e.is_immutable())return!0;var r=e.definition();return n.exposed(r)&&wn[r.name]}return!1}function c(e,n,r){return r?(r.start=n.start,r.end=n.end):r=n,new e(r)}function pe(e,n){return n.length==1?n[0]:c(Ze,e,{expressions:n.reduce(Vt,[])})}function _i(e,n){switch(typeof e){case"string":return c(Dn,n,{value:e});case"number":return isNaN(e)?c(Ya,n):isFinite(e)?1/e<0?c(We,n,{operator:"-",expression:c(dn,n,{value:-e})}):c(dn,n,{value:e}):e<0?c(We,n,{operator:"-",expression:c(Gr,n)}):c(Gr,n);case"boolean":return c(e?Ir:Fr,n);case"undefined":return c(yt,n);default:if(e===null)return c(Pr,n);if(e instanceof RegExp)return c(ir,n,{value:e});throw new Error(ef("Can't handle constant of type: {type}",{type:typeof e}))}}function dt(e){return e instanceof on||Y(e)&&e.name=="eval"}function xt(e,n,r){var i=!1;return e.TYPE=="Call"?i=e.expression===n&&dt(r):e instanceof Yt?i=e.tag===n&&dt(r):e instanceof We&&(i=e.operator=="delete"||e.operator=="typeof"&&Y(r)),i?pe(n,[c(dn,n,{value:0}),r]):r}function Yn(e,n){var r=new Jn;return e.walk(new un(function(i){if(i instanceof X){var f=i.definition(),o=i.fixed;!o||!r.has(f.id)?r.set(f.id,o):r.get(f.id)!==o&&r.set(f.id,!1)}})),r.size()>0&&n.walk(new un(function(i){if(i instanceof X){var f=i.definition(),o=i.fixed;!o||!r.has(f.id)||r.get(f.id)!==o&&(i.fixed=!1)}})),n}function Vt(e,n){return n instanceof Ze?[].push.apply(e,n.expressions):e.push(n),e}function Ae(e){return e instanceof Er||e instanceof Si||e instanceof Wi}function Re(e){if(e instanceof kt){var n=e.name.definition(),r=e.name.scope;return n.orig.length>1&&n.scope.resolve()!==r?!1:n.scope===r||Ve(n.references,function(i){var f=i.scope;do if(f===r)return!0;while(f=f.parent_scope)})}return!Ae(e)}function Qe(e){if(e===null)return[];if(e instanceof Ge)return Ve(e.body,Re)?e.body:[e];if(e instanceof Qn)return[];if(pr(e))return[e];throw new Error("Can't convert thing to statement array")}function _n(e){return e===null||e instanceof Qn?!0:e instanceof Ge?e.body.length==0:!1}function vt(e){return Ve(e.body,function(n){return _n(n)||n instanceof Ri||n instanceof bt&&ut(n)})}function Wn(e){return e instanceof Ii&&e.body instanceof Ge?e.body:e}function l(e){if(e.TYPE!="Call")return!1;do e=e.expression;while(e instanceof on);return e instanceof St?!qt(e):l(e)}function d(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof $i))return!0;var r=!1;return n.walk(new un(function(i){if(r)return!0;if(i instanceof of)return r=!0;if(i instanceof rn&&i!==n)return!0})),!r}function Y(e){return e instanceof X&&e.definition().undeclared}var Ee=jn("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");X.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&Ee[this.name]});function mn(e){return e.static&&e.value&&(e instanceof Wr||e instanceof Mr)}function ut(e){return Ve(e.definitions,function(n){return!n.value})}function pi(e,n){return e instanceof Si?n&&!e.extends&&Ve(e.properties,function(r){return r.key instanceof M?!1:!mn(r)}):e instanceof gt?(n||e instanceof bt)&&ut(e):e instanceof Ti||e instanceof ji?pi(e.body,n):e instanceof kt}function Di(e,n){var r=e.lastIndexOf(n);if(r<0)return!1;for(;++r<e.length;)if(!pi(e[r],!0))return!1;return!0}function Jr(e,n){var r;if(e.init instanceof Ge&&(r=e.init,e.init=r.body.pop(),r.body.push(e)),e.init instanceof Ri?(r||(r=c(Ge,e,{body:[e]})),r.body.splice(-1,0,e.init),e.init=null):e.init instanceof He?e.init=e.init.body:_n(e.init)&&(e.init=null),!!r)return n?Ct.splice(r.body):r}function Ar(e,n){var r=$(n,function(b){return b instanceof yn}),i,f,o,g,v,y;N();var T,k,z=10;do{if(k=T,T=0,W(e)&&(T=1),!T&&k==1||n.option("dead_code")&&(ee(e,n)&&(T=2),!T&&k==2)||n.option("if_return")&&(j(e,n)&&(T=3),!T&&k==3)||n.option("awaits")&&n.option("side_effects")&&(Se(e,n)&&(T=4),!T&&k==4)||n.option("inline")>=4&&($e(e,n)&&(T=5),!T&&k==5)||n.sequences_limit>0&&(tn(e,n)&&(T=6),!T&&k==6||(fe(e,n)&&(T=7),!T&&k==7))||n.option("join_vars")&&(S(e)&&(T=8),!T&&k==8))break;n.option("collapse_vars")&&D(e,n)&&(T=9)}while(T&&z-- >0);return e;function $(b,x){var P=b.self(),U=0,B;do{if(P instanceof er)P=b.parent(U++);else if(P instanceof ri)P=P.body;else if(P instanceof yr){var te=b.parent(U);(te.body[te.body.length-1]===P||C(P.body))&&(U++,P=te)}do{if(B=P,x(B))return B;P=b.parent(U++)}while(P instanceof Un)}while(B&&(P instanceof Ge||P instanceof er||P instanceof rn||P instanceof yr||P instanceof ai)&&Di(P.body,B));function C(ne){for(var Pe=ne.length;--Pe>=0;)if(ne[Pe]instanceof fr)return!0;return!1}}function N(){var b=n.self(),x=0;do if(!i&&b.variables&&(i=b),b instanceof er)n.parent(x).bfinally&&(v||(v={}),v.bfinally=!0),x++;else if(b instanceof sa)x++;else if(b instanceof Ii)g=!0;else if(b instanceof rn){y=b;break}else b instanceof ai&&(v||(v={}),b.bcatch&&(v.bcatch=!0),b.bfinally&&(v.bfinally=!0));while(b=n.parent(x++))}function D(b,x){if(y.pinned())return;for(var P,U=new Jn,B=[],te=!1,C=new Jn,ne,Pe=b.length,Oe=new ei(function(_,H){if(oe)return _;if(!Ye)return _!==Fe[Ne]?_:(Ne++,Ne<Fe.length?Pi(_,Oe):(Ye=!0,Je=(de?di:Hf)(_,0),Je===_&&(oe=!0),_));var I=Oe.parent();if(!Cn&&Lt(_,I)&&(Cn=I),Ot&&Te&&Ie&&!Cn&&_ instanceof ze&&_.operator!="="&&_.left.equals(Le)){me++,te=!0,M.info("Cascading {this} [{start}]",_),Ie=!1,be=As(Le),_.right.transform(Oe),es(h);var Xe;return oe?Xe=h:(oe=!0,Xe=c(ae,h,{operator:Ot,left:Le.fixed&&Le.definition().fixed?Le.fixed.to_binary(h):Le,right:xe})),c(ze,_,{operator:"=",left:_.left,right:c(ae,_,{operator:_.operator.slice(0,-1),left:Xe,right:_.right})})}if(Ln(_,I))return oe=!0,_;if(_.single_use)return _;var ln;if(!(_ instanceof et)&&(Te&&Le.equals(_)||pt&&(ln=pt(_,this)))){if(!Ie||Cn&&(ln||!Me||!pn))return!ln&&!de&&(oe=!0),_;if(Gi(_,I))return de&&!ln&&(he=!0),_;if(!ln&&se&&_.fixed!==Le.fixed)return oe=!0,_;if(de)return Cn&&q==0&&(q=Ue-me),ln||me++,_;if(me++,te=oe=!0,M.info("Collapsing {this} [{start}]",_),h.TYPE=="Binary")return Ss(h,_),c(ze,h,{operator:"=",left:h.right.left,right:h.operator=="&&"?c(bn,h,{condition:h.left,consequent:h.right.right,alternative:_}):c(bn,h,{condition:h.left,consequent:_,alternative:h.right.right})});if(h instanceof Cr)return c(We,h,{operator:h.operator,expression:Le.fixed&&Le.definition().fixed?Le.fixed.to_prefix(h):Le});if(h instanceof We)return es(h),h;if(Ss(xe,_),h instanceof Vn){var en=h.name.definition();return en.references.length-en.replaced==1&&!x.exposed(en)?(en.replaced++,xt(I,_,xe)):c(ze,h,{operator:"=",left:_,right:xe})}es(xe);var gn=h.clone();return gn.right=xe,gn}if(ni(_,I))return oe=!0,_;if((yi(_,I)||ct(_))&&(Je=_,_ instanceof rn&&(oe=!0)),_ instanceof Mi){var Sn=Ie;return Ie=!1,H(_,Oe),Ie=Sn,Tn(_)}if(_ instanceof Nn){var Sn=Ie;return Ie=!1,H(_,Oe),Ie=Sn,Tn(_)}if(_ instanceof Fn){_.name=_.name.transform(Oe);var Sn=Ie;return Ie=!1,_.value=_.value.transform(Oe),Ie=Sn,Tn(_)}if(_ instanceof li&&!(_ instanceof rn)&&!(_.variables&&_.variables.all(function(Pn){return!bi.has(Pn.name)&&!be.has(Pn.name)}))){var Sn=Ie;return Ie=!1,Pi(_,Oe)||H(_,Oe),Ie=Sn,Tn(_)}if(Pi(_,Oe))return Tn(_)},Tn),kn=new ei(function(_){if(oe)return _;if(!Ye){if(_!==Fe[Ne])return _;switch(Ne++,Fe.length-Ne){case 0:if(Ye=!0,he||_!==h||_ instanceof Vn)return _;je.replaced++;var H=kn.parent();return H instanceof Ze&&H.tail_node()!==_?(de.replaced++,xe===sn?Ct.skip:pe(sn,sn.expressions.slice(0,-1))):xe;case 1:if(!he&&_.body===h)return Ye=!0,je.replaced++,de.replaced++,null;default:return Pi(_,kn)}}if(_ instanceof X&&_.definition()===je){if(Gi(_,kn.parent()))return _;--me||(oe=!0),M.info("Replacing {this} [{start}]",_);var I=xe.clone();return I.scope=_.scope,I.reference(),me==q?(oe=!0,c(ze,h,{operator:"=",left:_,right:I})):(je.replaced++,I)}if(_ instanceof Vr||_ instanceof rn)return _},function(_){return Ds(_,kn)});--Pe>=0;){Pe==0&&x.option("unused")&&pf();var Fe=[];for(Kn(b[Pe]);B.length>0;){Fe=B.pop();var Ne=0,h=Fe[Fe.length-1],q=-1,he=!1,se=!1,Ue,de=null,Je=null,Cn=null,Le=Hr(h),En=Le&&Le.has_side_effects(x),Te=Le&&(!En||Le instanceof X)&&!In(Le,x),pt=Qf(h);if(!(!Te&&!pt)){var Ot=h instanceof ze&&h.operator.slice(0,-1),Bn=h.name instanceof $n,ct=An;if(h.may_throw(x)){if(Bn&&wi(y))continue;ct=v?function(_){return _.has_side_effects(x)}:Ma}var Zn=!1,Qt=!1,Dt=iu(Le),bi=new Jn,oi=!0,be=As(h),Me=ru(Le),sn=Yr(h),xe=sn;En||(!Ot&&xe instanceof Ze&&(xe=xe.tail_node()),En=au());var nn=v||!Me?function(_){return _ instanceof Nn}:An,pn=fu(h),Ye=Bn,oe=!1,me=0,Ie=!P||!Ye;if(!Ie){for(var cn=h.arg_index+1;!oe&&cn<P.length;cn++)P[cn]&&P[cn].transform(Oe);Ie=!0}for(var Rn=Pe;!oe&&Rn<b.length;Rn++)b[Rn].transform(Oe);if(de){if(!me||Ue>me+he){B.push(Fe),ne=!0;continue}me==q&&(he=!0);var je=Le.definition();oe=!1,Ne=0,Ye=Bn;for(var Rn=Pe;!oe&&Rn<b.length;Rn++)b[Rn].transform(kn)||b.splice(Rn--,1);me=h instanceof Vn&&h===Fe[Fe.length-1]&&je.references.length==je.replaced&&!x.exposed(je),de.last_ref=!1,de.single_use=!1,te=!0}me&&tu(h)}}}return te;function Tn(_){return oe||(Je===_&&(oe=!0),Cn===_&&(Cn=null)),_}function Pi(_,H){if(_ instanceof li){if(_ instanceof rn)return _;if(_ instanceof Nt){var I=Ie;Ie=!1,_.name&&_.name.transform(H),!oe&&_.extends&&_.extends.transform(H);for(var Xe=[],ln=[],en=0;!oe&&en<_.properties.length;en++){var gn=_.properties[en];gn.key instanceof M&&(gn.key=gn.key.transform(H)),gn.static&&(gn instanceof Wr?gn.value&&Xe.push(gn):gn instanceof Mr&&[].push.apply(ln,gn.value.body))}for(var en=0;!oe&&en<ln.length;en++)ln[en].transform(H);for(var en=0;!oe&&en<Xe.length;en++)Xe[en].value.transform(H);return Ie=I,_}if(_ instanceof Xt)return _.object=_.object.transform(H),oe=!0,_;if(_ instanceof ki){_.expression=_.expression.transform(H);for(var en=0;!oe&&en<_.body.length;en++){var Sn=_.body[en];if(Sn instanceof sr){if(!Ye){if(Sn!==Fe[Ne])continue;Ne++}if(Sn.expression=Sn.expression.transform(H),!pn||se)break;pt=!1}}return oe=!0,_}}}function zt(_,H){if(H instanceof ze)return H.operator=="="&&H.left===_;if(H instanceof Fn)return H.name===_;if(H instanceof At)return!0;if(H instanceof Pt)return H.value===_}function Ln(_,H){return _===xe||H instanceof jt&&_!==H.init?!0:_ instanceof ze?_.operator!="="&&Le.equals(_.left):_ instanceof Ge?Dt&&!Ve(Dt,function(I){return _!==I}):_ instanceof hn?!(Le instanceof on)||!Le.equals(_.expression)?!1:!(xe instanceof St&&!xe.contains_this()):_ instanceof Nt?!x.has_directive("use strict"):_ instanceof za?!0:_ instanceof Ri?Bn&&Le.name===_.name.name:_ instanceof Pt?_.key instanceof M:_ instanceof ga||_ instanceof $r||_ instanceof ai||_ instanceof kr}function ni(_,H){if(!(_ instanceof X))return!1;if(_.is_declared(x)){if(_.fixed_value())return!1;if(Be(_))return!(H instanceof on&&H.expression===_)&&J(_.definition())}else if(zt(_,H))return!1;return pn?(pt=!1,!1):!0}function Lt(_,H){if(H instanceof ze)return H.left!==_&&it[H.operator.slice(0,-1)];if(H instanceof ae)return H.left!==_&&it[H.operator];if(H instanceof hn)return H.optional&&H.expression!==_;if(H instanceof sr)return H.expression!==_;if(H instanceof bn||H instanceof Un)return H.condition!==_;if(H instanceof ht)return H.optional&&H.expression!==_}function yi(_,H){if(_ instanceof wt)return!0;if(_.TYPE=="Binary")return!Ja(_,x);if(_ instanceof hn){var I,Xe=_.expression;if(Xe instanceof X&&(I=Xe.definition(),Xe=Xe.fixed_value()),!(Xe instanceof yn))return!_.is_expr_pure(x);if(I&&_f(x,I,Xe))return!0;if(Xe.collapse_scanning)return!1;Xe.collapse_scanning=!0;var ln=Ie;Ie=!1;for(var en=Je,gn=Cn,Sn=0;!oe&&Sn<Xe.argnames.length;Sn++)Ft(mt,Xe.argnames[Sn],_.args[Sn])&&(oe=!0);if(!oe)if(Xe.rest&&Ft(mt,Xe.rest,c(xn,_,{elements:_.args.slice(Sn)})))oe=!0;else if(qt(Xe)&&Xe.value)Xe.value.transform(Oe);else for(var Sn=0;!oe&&Sn<Xe.body.length;Sn++){var Pn=Xe.body[Sn];if(Pn instanceof tt){Pn.value&&Pn.value.transform(Oe);break}Pn.transform(Oe)}return Cn=gn,Je=en,Ie=ln,Xe.collapse_scanning=!1,oe?(oe=!1,!0):!1}if(_ instanceof Nt){if(!v)return!1;var It=_.extends;return It?(It instanceof X&&(It=It.fixed_value()),!O(It)):!1}if(_ instanceof Mt)return v&&(v.bfinally||v.bcatch&&_ instanceof sf)?!0:En||Le instanceof on||ns(Le);if(_ instanceof Tt)return x.option("ie")&&_.name&&be.has(_.name.name);if(_ instanceof Vi)return qs(_);if(_ instanceof on){var Gn=_.expression;return x.option("unsafe")&&(Y(Gn)&&Ee[Gn.name]||_t(Gn))?!1:Gn instanceof X&&J(Gn.definition())||En||!oi?!0:de||!v&&Me||_.optional?!1:Gn.may_throw_on_access(x)}if(_ instanceof On)return!0;if(_ instanceof X){var Ki=qs(_);if(Y(_)&&_.is_declared(x))return!1;if(Ki)return!zt(_,H);if(En&&ns(_))return!0;var I=_.definition();return(v||I.scope.resolve()!==y)&&!Be(_)}if(_ instanceof Yt)return!_.is_expr_pure(x);if(_ instanceof Vn)return nn(_.name)?!0:(_.value||H instanceof Wi)&&_.name.match_symbol(function(Li){return Li instanceof et&&(be.has(Li.name)||En&&ns(Li))},!0);if(_ instanceof Ai)return!0;var Bi=Gi(_.left,_);if(!Bi)return!1;if(Bi instanceof on||nn(Bi))return!0;return Bi.match_symbol(function(Li){if(Li instanceof on)return!0;if(Li instanceof X)return be.has(Li.name)||Zn&&x.exposed(Li.definition())},!0);function mt(Li){return Li.transform(Oe),oe}}function Ft(_,H,I){if(H instanceof Fn)return _(H.value)||Ft(_,H.name,H.value)||!gi(I)&&Ft(_,H.name,I);if(!I)return!(H instanceof Ht);if(H instanceof Nn){if(H.rest&&Ft(_,H.rest))return!0;if(H instanceof At)return I instanceof xn?!Ve(H.elements,function(Xe,ln){return!Ft(_,Xe,I[ln])}):I.is_string(x)?!Ve(H.elements,function(Xe){return!Ft(_,Xe)}):!0;if(H instanceof hi)return I.may_throw_on_access(x)?!0:!Ve(H.properties,function(Xe){return Xe.key instanceof M&&_(Xe.key)?!1:!Ft(_,Xe.value)})}}function pf(){if(o!==!1){var _=x.parent(),H=x.self();if(o===void 0){if(!(H instanceof St)||Ui(H)||H.uses_arguments||H.pinned()||!(_ instanceof hn)||_.expression!==H||!Ve(_.args,function(mt){return!(mt instanceof On)})){o=!1;return}if(!d(_))return;o=!0}var I=H.in_strict_mode(x)&&!H.parent_scope.resolve(!0).in_strict_mode(x),Xe;wi(H)?(Xe=function(mt){return mt instanceof Ht&&mt.name=="await"},f=!0):(Xe=function(mt){return mt instanceof wt&&!en.find_parent(rn)},f===void 0&&(f=ce(x,1,_,null,!0,!0)));var ln=null,en=new un(function(mt,Li){if(!Gn)return!0;if(Xe(mt)||mt instanceof Ai)return Gn=null,!0;if(mt instanceof Vi)return(I||!ln)&&(Gn=null),!0;if(mt instanceof X){var gf;return(mt.in_arg&&!Kt(mt.definition())||(gf=H.variables.get(mt.name))&&gf!==mt.definition())&&(Gn=null),!0}if(mt instanceof rn&&!qt(mt)){var su=ln;return ln=mt,Li(),ln=su,!0}});P=_.args.slice();for(var gn=P.length,Sn=new Jn,Pn=H.argnames.length;--Pn>=0;){var It=H.argnames[Pn],Gn=P[Pn],Ki=null;if(It instanceof Fn&&(Ki=It.value,It=It.name,P[gn+Pn]=Ki),It instanceof Nn){if(f&&Ft(function(mt){return mt.has_side_effects(x)},It,Gn)){B.length=0;break}P[gn+Pn]=H.argnames[Pn];continue}if(!Sn.has(It.name)&&(Sn.set(It.name,!0),Ki&&(Gn=gi(Gn)?Ki:null),!Gn&&!Ki?Gn=c(yt,It).transform(x):Gn instanceof yn&&Gn.pinned()?Gn=null:Gn&&Gn.walk(en),!!Gn)){var Bi=c(Vn,It,{name:It,value:Gn});Bi.name_index=Pn,Bi.arg_index=Ki?gn+Pn:Pn,B.unshift([Bi])}}H.rest&&P.push(H.rest)}}function Kn(_,H){if(Fe.push(_),_ instanceof xn)_.elements.forEach(function(gn){Kn(gn,H)});else if(_ instanceof ze){var I=_.left;I instanceof Nn||B.push(Fe.slice()),Kn(I),Kn(_.right),I instanceof X&&_.operator=="="&&U.set(I.name,(U.get(I.name)||0)+1)}else if(_ instanceof wt)Kn(_.expression,H);else if(_ instanceof ae){var Xe=it[_.operator];H&&Xe&&_.operator!="??"&&_.right instanceof ze&&_.right.operator=="="&&!(_.right.left instanceof Nn)&&B.push(Fe.slice()),Kn(_.left,!Xe&&H),Kn(_.right,H)}else if(_ instanceof hn)Kn(_.expression),_.args.forEach(Kn);else if(_ instanceof sr)Kn(_.expression);else if(_ instanceof bn)Kn(_.condition),Kn(_.consequent,H),Kn(_.alternative,H);else if(_ instanceof gt)_.definitions.forEach(Kn);else if(_ instanceof Mn)Kn(_.expression);else if(_ instanceof ga)Kn(_.condition),_.body instanceof ii||Kn(_.body);else if(_ instanceof Mt)_.value&&Kn(_.value);else if(_ instanceof jt)_.init&&Kn(_.init,!0),_.condition&&Kn(_.condition),_.step&&Kn(_.step,!0),_.body instanceof ii||Kn(_.body);else if(_ instanceof Xt)Kn(_.object),_.body instanceof ii||Kn(_.body);else if(_ instanceof Un)Kn(_.condition),_.body instanceof ii||Kn(_.body),_.alternative&&!(_.alternative instanceof ii)&&Kn(_.alternative);else if(_ instanceof ft)_.properties.forEach(function(gn){Fe.push(gn),gn.key instanceof M&&Kn(gn.key),gn instanceof fi&&Kn(gn.value,H),Fe.pop()});else if(_ instanceof Ze){var ln=_.expressions.length-(H?0:1);_.expressions.forEach(function(gn,Sn){Kn(gn,Sn<ln)})}else if(_ instanceof He)Kn(_.body,!0);else if(_ instanceof On)Kn(_.expression);else if(_ instanceof ht)Kn(_.expression),Kn(_.property);else if(_ instanceof ki)Kn(_.expression),_.body.forEach(Kn);else if(_ instanceof at)Ea[_.operator]?B.push(Fe.slice()):Kn(_.expression);else if(_ instanceof Vn){if(_.name instanceof vi)if(_.value){var en=_.name.definition();en.references.length>en.replaced&&B.push(Fe.slice())}else C.set(_.name.name,(C.get(_.name.name)||0)+1);_.value&&Kn(_.value)}else _ instanceof Ai&&_.expression&&Kn(_.expression);Fe.pop()}function Hf(_,H){var I=Oe.parent(H);return I instanceof xn||I instanceof ze||I instanceof wt||I instanceof ae||I instanceof hn||I instanceof sr||I instanceof bn?_:I instanceof gt?Ut(I,H+1):I instanceof Mt||I instanceof Un||I instanceof Ii||I instanceof Ci||I instanceof on?_:I instanceof Ze?(I.tail_node()===_?Hf:Ut)(I,H+1):I instanceof He?Ut(I,H+1):I instanceof On||I instanceof ki||I instanceof at||I instanceof Vn||I instanceof Ai?_:null}function Yf(_,H,I){var Xe;do Xe=_,_=Oe.parent(++I);while(_ instanceof ze&&_.operator.slice(0,-1)==H||_ instanceof ae&&_.operator==H);return Xe}function Bf(_,H,I,Xe,ln){var en=Ie;Ie=!1;var gn=Je,Sn=Cn,Pn=Oe.stack;return Oe.stack=[Xe],_.transform(Oe),Oe.stack=Pn,Cn=Sn,Je=gn,Ie=en,oe?(oe=!1,I):H(Xe,ln+1)}function di(_,H){var I=Oe.parent(H);if(I instanceof xn)return di(I,H+1);if(I instanceof ze){if(ct(I)||I.left.match_symbol(function(gn){return gn instanceof X&&(Le.name==gn.name||de.name==gn.name)}))return _;var Xe;return I.left===_||!it[Xe=I.operator.slice(0,-1)]?di(I,H+1):Yf(I,Xe,H)}if(I instanceof wt)return di(I,H+1);if(I instanceof ae){var Xe;return I.left===_||!it[Xe=I.operator]?di(I,H+1):Yf(I,Xe,H)}if(I instanceof hn)return I;if(I instanceof sr)return I.expression!==_?_:di(I,H+1);if(I instanceof bn)return I.condition!==_?_:di(I,H+1);if(I instanceof gt)return Ut(I,H+1);if(I instanceof Lr)return _;if(I instanceof Mt)return Ut(I,H+1);if(I instanceof jt)return I.init!==_&&I.condition!==_?_:di(I,H+1);if(I instanceof Xt)return I.init!==_?_:di(I,H+1);if(I instanceof Un)return I.condition!==_?_:di(I,H+1);if(I instanceof Ci){var ln=Oe.parent(H+1);return Ve(ln.properties,function(gn){return gn instanceof fi})?di(ln,H+2):ln}if(I instanceof on){var en=I.expression;return en===_?di(I,H+1):_}return I instanceof Ze?(I.tail_node()===_?di:Ut)(I,H+1):I instanceof He?Ut(I,H+1):I instanceof On?di(I,H+1):I instanceof ki?I.expression!==_?_:di(I,H+1):I instanceof at?I.operator=="delete"?_:di(I,H+1):I instanceof Vn?I.name.match_symbol(function(gn){return gn instanceof et&&(Le.name==gn.name||de.name==gn.name)})?_:di(I,H+1):I instanceof fa?I.condition!==_?_:di(I,H+1):I instanceof Ai?di(I,H+1):null}function Ut(_,H){var I=Oe.parent(H);if(yi(_,I)||Lt(_,I))return _;if(I instanceof xn)return Ut(I,H+1);if(I instanceof ze)return en(I.left);if(I instanceof wt)return _;if(I instanceof ae||I instanceof hn||I instanceof sr||I instanceof bn||I instanceof gt||I instanceof Mt||I instanceof Un)return Ut(I,H+1);if(I instanceof Ii)return _;if(I instanceof Ci){var Xe=Oe.parent(H+1);return Ve(Xe.properties,function(gn){return gn instanceof fi})?Ut(Xe,H+2):Xe}if(I instanceof on){var ln=I.expression;return ln===_?Ut(I,H+1):Bf(ln,Ut,_,I,H)}if(I instanceof Ze||I instanceof He)return Ut(I,H+1);if(I instanceof On)return _;if(I instanceof ki||I instanceof at)return Ut(I,H+1);if(I instanceof Vn)return en(I.name);if(I instanceof Ai)return _;return null;function en(gn){return ct(I)?_:gn!==_&&gn instanceof Nn?Bf(gn,Ut,_,I,H):Ut(I,H+1)}}function qa(_){if(ne){ne=!1;return}if(!(Ue<1)){_=_.tail_node();var H=_ instanceof ze&&_.operator=="="?_.left:_;if(H instanceof X){var I=H.definition();if(!I.undeclared&&!J(I)){if(H!==_){if(In(H,x))return;var Xe=I.references.length-I.replaced;if(Xe<2)return;var ln=h.clone();ln[ln instanceof ze?"right":"value"]=H,h.name_index>=0&&(ln.name_index=h.name_index,ln.arg_index=h.arg_index),h=ln}return de=I}}}}function $t(_){return _.references.length-_.replaced-(U.get(_.name)||0)}function Hr(_){if(_ instanceof ze){var H=_.left;if(!(H instanceof X))return H;var I=H.definition();if(y.uses_arguments&&Tr(I)||x.exposed(I))return H;if(Ue=$t(I),I.fixed&&H.fixed){var Xe=I.references.filter(function(en){return en.fixed===H.fixed}).length-1;Xe<Ue&&(Ue=Xe,q=0,se=!0)}return _.operator=="="&&qa(_.right),H}if(_ instanceof ae)return _.right.left;if(_ instanceof at)return _.expression;if(_ instanceof Vn){var H=_.name,I=H.definition();if(I.const_redefs||!_r(H,I.orig)||y.uses_arguments&&Tr(I))return;var ln=I.orig.length-I.eliminated-(C.get(I.name)||0);return Ue=$t(I),I.fixed&&(Ue=Math.min(Ue,I.references.filter(function(Sn){if(!Sn.fixed||!Sn.fixed.assigns)return!0;var Pn=Sn.fixed.assigns[0];return Pn===H||Yr(Pn)===_.value}).length)),ln>1&&!(H instanceof $n)?(qa(_.value),c(X,H)):qa(_.value)||Ue==1&&!x.exposed(I)?c(X,H):void 0}}function Yr(_){if(_ instanceof ze)return _.right;if(_ instanceof ae){var H=_.clone();return H.right=_.right.right,H}if(_ instanceof Vn)return _.value}function Kr(_){return _ instanceof xn?!1:_ instanceof ae&&it[_.operator]?Kr(_.left)&&Kr(_.right):_ instanceof hn?!1:_ instanceof bn?Kr(_.consequent)&&Kr(_.alternative):_ instanceof ft?!1:!_.has_side_effects(x)}function Qf(_){if(_ instanceof ze&&_.right.single_use)return;for(var H=Object.create(null),I=new un(function(Sn){if(Sn instanceof X){for(var Pn=0,It,Gn=Sn;It=I.parent(Pn++);Gn=It){if(zt(Gn,It)){It instanceof Pt&&(It=I.parent(Pn++));continue}H[Sn.definition().id]=!0;return}H[Sn.definition().id]="a"}});_ instanceof ze&&_.operator=="=";)_.left.walk(I),_=_.right;if(_ instanceof Vi)return gn;if(_ instanceof X){if(H[_.definition().id]==="a")return;var Xe=_.evaluate(x);return Xe===_?gn:Br(Xe,gn)}if(_.is_truthy())return Br(!0,An);if(_.is_constant()){var ln=_.evaluate(x);if(!(ln instanceof M))return Br(ln,gn)}if(!(Le instanceof X)||!Kr(_))return!1;var en;return _.walk(new un(function(Sn){if(en)return!0;Sn instanceof X&&H[Sn.definition().id]&&(en=!0)})),!en&&gn;function gn(Sn){return _.equals(Sn)}}function Br(_,H){return function(I,Xe){if(Xe.in_boolean_context()){if(_&&I.is_truthy()&&!I.has_side_effects(x))return!0;if(I.is_constant()){var ln=I.evaluate(x);if(!(ln instanceof M))return!ln==!_}}return H(I)}}function es(_){for(;_.write_only&&(_.write_only=!1,_ instanceof ze);)_=_.right}function Ss(_,H){var I=H instanceof X&&!H.defined,Xe=H.scope||G(Oe)||i;_.walk(new un(function(ln){if(ln instanceof li)return!0;ln instanceof Ht&&(I&&ln instanceof X&&(ln.defined=!1),ln.scope=Xe)}))}function Ts(_){return _ instanceof X&&(_=_.fixed_value(),!_)?!0:_ instanceof ze?_.operator=="="&&Ts(_.right):_ instanceof on||_ instanceof Vi}function As(_){var H=new Jn;_ instanceof Vn&&(_.name.definition().fixed||(oi=!1),H.add(_.name.name,Le));var I=y.uses_arguments&&!x.has_directive("use strict"),Xe=y instanceof Et,ln=new un(function(en){en.inlined_node&&en.inlined_node.walk(ln);var gn;if(en instanceof X){if(gn=en.fixed_value(),!gn){gn=en;var Sn=en.definition(),Pn=en.fixed&&en.fixed.escaped||Sn.escaped;!Sn.undeclared&&(Sn.assignments||!Pn||Pn.cross_scope)&&(ue(Sn,en.scope,en,ln.parent())||!Ka(Sn))&&(oi=!1)}}else en instanceof Vi&&(gn=en);if(gn)H.add(en.name,s(x,ln,en,gn,0));else if(en instanceof yn){for(var It=0,Gn,Ki=en;Gn=ln.parent(It++);Ki=Gn){if(Gn instanceof ze){if(Gn.left===Ki)break;if(Gn.operator=="="||it[Gn.operator.slice(0,-1)])continue;break}if(Gn instanceof ae){if(it[Gn.operator])continue;break}if(Gn instanceof hn||Gn instanceof rn)return;if(Gn instanceof Ze){if(Gn.tail_node()===Ki)continue;break}if(Gn instanceof Yt){if(Gn.tag)return;break}}return en.enclosed.forEach(function(mt){mt.scope!==en&&bi.set(mt.name,!0)}),!0}else I&&en instanceof ht&&(y.each_argname(function(mt){(!x.option("reduce_vars")||mt.definition().assignments)&&(mt.definition().fixed||(oi=!1),H.add(mt.name,!0))}),I=!1);if(Xe)if(en.TYPE=="Call"){if(Qt)return;var Bi=en.expression;if(Bi instanceof on||Bi instanceof St&&!Bi.contains_this())return;Qt=!0}else en instanceof on&&Ts(en.expression)&&(en===Le&&!(_ instanceof at)?Qt=!0:Zn=!0)});return _.walk(ln),H}function tu(_){var H=xe===sn?null:pe(sn,sn.expressions.slice(0,-1)),I=_.name_index;if(I>=0){var Xe,ln=y.argnames[I];ln instanceof Fn?(y.argnames[I]=ln=ln.clone(),ln.value=H||c(dn,ln,{value:0})):(Xe=x.parent().args)[I]&&(y.argnames[I]=ln.clone(),Xe[I]=H||c(dn,Xe[I],{value:0}));return}var en=Fe.length-1,gn=Fe[en];(gn instanceof Vn||Fe[en-1].body===gn)&&en--;var Sn=new ei(function(Pn,It,Gn){if(Ye||Pn!==Fe[Ne])return Pn;if(Ne++,Ne<=en)return Pi(Pn,Sn);if(Ye=!0,Pn instanceof gt){C.set(gn.name.name,(C.get(gn.name.name)||0)+1),de&&de.replaced++;var Ki=Pn.definitions,Bi=Ki.indexOf(gn),mt=gn.clone();if(mt.value=null,!H)return Pn.definitions[Bi]=mt,Pn;var Li=[c(He,H,{body:H})];if(Bi>0){var gf=Pn.clone();gf.definitions=Ki.slice(0,Bi),Li.unshift(gf),Pn=Pn.clone(),Pn.definitions=Ki.slice(Bi)}return Li.push(Pn),Pn.definitions[0]=mt,Gn?Ct.splice(Li):c(Ge,Pn,{body:Li})}return H?pr(Pn)?c(He,H,{body:H}):H:Gn?Ct.skip:null},function(Pn,It){return Pn instanceof jt?Jr(Pn,It):Ds(Pn,Sn)});oe=!1,Ye=!1,Ne=0,(b[Pe]=b[Pe].transform(Sn))||b.splice(Pe,1)}function Ds(_,H){if(_ instanceof Ze)switch(_.expressions.length){case 0:return null;case 1:return xt(H.parent(),_,_.expressions[0])}}function iu(_){if(_ instanceof et||_ instanceof X||_ instanceof Nn){var H=[];if(_.mark_symbol(function(I){if(I instanceof Ht){var Xe=I.definition(),ln=Xe.scope.resolve();Xe.orig.forEach(function(en){en instanceof nr&&en.scope!==ln&&zi(H,en.scope)})}}),H.length!=0)return H}}function ru(_){var H=mf(_);if(!(H instanceof X)||H.definition().scope.resolve()!==y)return!1;if(!g)return!0;if(Ot||h instanceof at)return!1;var I=be.get(H.name);return!I||I[0]===_}function au(){return h instanceof at?!1:xe.has_side_effects(x)}function fu(_){if(_ instanceof at||En)return!1;if(de)return!0;if(!(Le instanceof X))return!1;var H;if(_ instanceof Vn)H=1;else if(_.operator=="=")H=2;else return!1;var I=Le.definition();if(I.references.length-I.replaced==H)return!0;if(!I.fixed||!Le.fixed)return!1;var Xe=Le.fixed.assigns,ln=0;return!Ve(I.references,function(en,gn){var Sn=en.fixed;return!Sn||Sn.to_binary||Sn.to_prefix?!1:Sn===Le.fixed?(ln++,!0):Xe&&Sn.assigns&&Xe[0]!==Sn.assigns[0]})||ln!=H?!1:(se=!0,!0)}function qs(_){var H=be.get(_.name);if(!(!H||Ve(H,function(I){return!I}))){if(H[0]!==Le)return!0;pt=!1}}function ns(_){var H=_.definition();return H.orig.length==1&&H.orig[0]instanceof nr?!1:H.scope.resolve()!==y||Qt&&x.exposed(H)?!0:!Ve(H.references,function(I){return I.scope.resolve(!0)===y})}function Ma(_,H){if(_ instanceof ze)return Ma(_.left,!0);if(_ instanceof at)return Ma(_.expression,!0);if(_ instanceof Vn)return _.value&&Ma(_.value);if(H){if(_ instanceof Mn||_ instanceof ht)return Ma(_.expression,!0);if(_ instanceof X)return _.definition().scope.resolve()!==y}return!1}}function W(b){for(var x=!1,P=[],U=0;U<b.length;){var B=b[U];if(B instanceof Ge&&Ve(B.body,Re)){x=!0,W(B.body),[].splice.apply(b,[U,1].concat(B.body)),U+=B.body.length;continue}if(B instanceof ci){if(_r(B.value,P)){x=!0,b.splice(U,1);continue}P.push(B.value)}if(B instanceof Qn){x=!0,b.splice(U,1);continue}U++}return x}function j(b,x){for(var P=!1,U=x.parent(),B=x.self(),te,C,ne,Pe=r&&U&&U.TYPE=="Call"&&U.expression===B,Oe=r&&x.option("conditionals")&&x.option("sequences"),kn=!(v&&v.bfinally&&m(y)),Fe=Zn(b),Ne=b.length;--Ne>=0;){var h=b[Ne],q=nn(Ne),he=b[q];if(r&&te&&!he&&h instanceof tt&&kn&&!(B instanceof yr)){var se=h.value;if(!se){P=!0,b.splice(Ne,1);continue}var Ue=se.tail_node();if(gi(Ue)){P=!0,se instanceof We?se=se.expression:Ue instanceof We&&(se=se.clone(),se.expressions[se.expressions.length-1]=Ue.expression),b[Ne]=c(He,h,{body:se});continue}}if(h instanceof Un){var de=Zt(h.body);if(oi(de)){de.label&&nf(de.label.thedef.references,de),P=!0,h=h.clone(),h.body=c(Ge,h,{body:sn(h.body,de)}),h.alternative=c(Ge,h,{body:Qe(h.alternative).concat(be(ne,C))}),xe(de.value,ne),b[Ne]=h,b[Ne]=h.transform(x);continue}if(de&&!h.alternative&&he instanceof ff){var Je=h.condition,Cn=Ne+1==q&&h.body instanceof Ge;if(Je=qi(Je,Je.negate(x),Cn),Je!==h.condition){P=!0,h=h.clone(),h.condition=Je;var se=h.body;h.body=c(Ge,he,{body:be(!0,null,q+1)}),b.splice(Ne,1,h,se),(!r||B instanceof ii&&B.body===b)&&(b[Ne]=h.transform(x));continue}}var Le=Zt(h.alternative);if(oi(Le)){Le.label&&nf(Le.label.thedef.references,Le),P=!0,h=h.clone(),h.body=c(Ge,h.body,{body:Qe(h.body).concat(be(ne,C))}),h.alternative=c(Ge,h.alternative,{body:sn(h.alternative,Le)}),xe(Le.value,ne),b[Ne]=h,b[Ne]=h.transform(x);continue}if(x.option("typeofs")){if(de&&!Le){var En=c(Ge,B,{body:b.slice(Ne+1)});Ke(h.condition,null,En)}if(!de&&Le){var En=c(Ge,B,{body:b.slice(Ne+1)});Ke(h.condition,En)}}}if(h instanceof Un&&h.body instanceof tt){var Te=h.body.value,pt=h.body.in_bool||he instanceof tt&&he.in_bool;if(!h.alternative&&he instanceof tt&&(kn||!Te==!he.value)){P=!0,h=h.clone(),h.alternative=c(Ge,he,{body:be(!0,null,q+1)}),b[Ne]=h,b[Ne]=h.transform(x);continue}if(r&&te&&!he&&!h.alternative&&(pt||Te&&Fe||Te instanceof bn&&(gi(Te.consequent,x)||gi(Te.alternative,x)))){P=!0,h=h.clone(),h.alternative=c(tt,h,{value:null}),b[Ne]=h,b[Ne]=h.transform(x);continue}var Ot,Bn;if(Oe&&!h.alternative&&(!(Bn=b[Ot=pn(Ne)])&&Pe||Bn instanceof Un&&Bn.body instanceof tt)&&(he?he instanceof He&&nn(q)==b.length:!te)){P=!0;var ct=[];h=h.clone(),ct.push(h.condition),h.condition=pe(h,ct),h.alternative=c(Ge,B,{body:be().concat(c(tt,B,{value:null}))}),b[Ne]=h.transform(x),Ne=Ot+1;continue}}if(h instanceof fr||h instanceof Mt){C=h;continue}te&&C&&C===he&&Ye(h)}return P;function Zn(oe){for(var me=0,Ie=oe.length;--Ie>=0;){var cn=oe[Ie];if(cn instanceof Un&&cn.body instanceof tt&&++me>1)return!0}return!1}function Qt(oe){return $(x,function(me){return me===oe})}function Dt(oe,me){if(!C||C.TYPE!=oe.TYPE)return!1;var Ie=oe.value;if(!Ie)return!1;var cn=C.equals(oe);return!cn&&Ie instanceof Ze&&(Ie=Ie.tail_node(),C.value&&C.value.equals(Ie)&&(cn=2)),!cn&&!me&&C.value instanceof Ze&&C.value.tail_node().equals(Ie)&&(cn=3),cn}function bi(oe){if(oe instanceof Mt){if(ne=Dt(oe))return!0;if(!r||!(oe instanceof tt))return!1;var me=oe.value;return me&&(!kn||!gi(me.tail_node()))?!1:B instanceof yr?!C||C instanceof Mt&&C.value?!1:(ne=4,!0):!0}if(!(oe instanceof $r))return!1;if(B instanceof yr){if(C instanceof Mt){if(!r||C.value)return!1;ne=!0}else if(C){if(x.loopcontrol_target(C)!==U)return!1;ne=!0}else if(C===!1)return!1}var Ie=x.loopcontrol_target(oe);return oe instanceof Zr?Qt(Wn(Ie)):Ie instanceof Ii?!1:Qt(Ie)}function oi(oe){if(ne=!1,!bi(oe))return!1;for(var me=b.length;--me>Ne;){var Ie=b[me];if(Ie instanceof Si){if(Ie.name.definition().preinit)return!1}else if((Ie instanceof Er||Ie instanceof Wi)&&!Ve(Ie.definitions,function(cn){return!cn.name.match_symbol(function(Rn){return Rn instanceof et&&Rn.definition().preinit})}))return!1}return!0}function be(oe,me,Ie){var cn=[],Rn=!1,je=Ne+1;oe?me?Ie=b.lastIndexOf(me):(me=b[Ie],me!==C&&(C=!1)):(Ie=b.length,C=null);var Tn=b.splice(je,Ie-je).filter(function(Pi){return Pi instanceof kt?(cn.push(Pi),!1):(Ae(Pi)&&(Rn=!0),!0)});return oe===3&&(Tn.push(c(He,me.value,{body:pe(me.value,me.value.expressions.slice(0,-1))})),me.value=me.value.tail_node()),[].push.apply(Rn?Tn:b,cn),Tn}function Me(oe,me){if(oe)switch(me){case 4:return oe;case 3:if(!(oe instanceof Ze))break;case 2:return pe(oe,oe.expressions.slice(0,-1))}}function sn(oe,me){for(var Ie=Qe(oe),cn=Ie,Rn;(Rn=cn[cn.length-1])!==me;)cn=Rn.body;cn.pop();var je=me.value;return ne&&(je=Me(je,ne)),je&&cn.push(c(He,je,{body:je})),Ie}function xe(oe,me){if(me&&oe){switch(me){case 4:return;case 3:case 2:oe=oe.tail_node()}Yn(oe,C.value)}}function nn(oe){te=!0;for(var me=oe;++me<b.length;){var Ie=b[me];if(!pi(Ie)){if(Ie instanceof bt){te=!1;continue}break}}return me}function pn(oe){for(var me=oe;--me>=0;){var Ie=b[me];if(!(Ie instanceof bt)&&!pi(Ie))break}return me}function Ye(oe,me,Ie){if(oe instanceof Mt){var cn=!(me&&oe instanceof sf)&&Dt(oe,!0);if(cn){P=!0;var Rn=Me(oe.value,cn);return Rn?c(He,Rn,{body:Rn}):Ie?null:c(Qn,oe)}}else if(oe instanceof Un)oe.body=Ye(oe.body,me),oe.alternative&&(oe.alternative=Ye(oe.alternative,me));else if(oe instanceof ri)oe.body=Ye(oe.body,me);else if(oe instanceof ai){if(!oe.bfinally||!C.value||C.value.is_constant()){oe.bcatch&&Ye(oe.bcatch,me);var je=Ye(oe.body.pop(),!0,!0);je&&oe.body.push(je)}}else if(oe instanceof ii&&!(oe instanceof rn||oe instanceof ki)){var je=Ye(oe.body.pop(),me,!0);je&&oe.body.push(je)}return oe}}function ee(b,x){var P,U=x.self();U instanceof er?U=x.parent():U instanceof ri&&(U=U.body);for(var B=0,te=0,C=b.length;B<C;B++){var ne=b[B];if(ne instanceof $r){var Pe=x.loopcontrol_target(ne);Wn(Pe)!==U||ne instanceof fr&&Pe instanceof Ii?b[te++]=ne:ne.label&&nf(ne.label.thedef.references,ne)}else b[te++]=ne;if(Zt(ne)){P=b.slice(B+1);break}}return b.length=te,P&&P.forEach(function(Oe){wr(x,Oe,b)}),b.length!=C}function Se(b,x){if(!(!r||v&&v.bfinally)){for(var P=!1,U=b.length;--U>=0;){var B=b[U];if(!(B instanceof He))break;var te=B.body.tail_node();if(!(te instanceof wt))break;var C=te.expression;if(!Oi(x,C))break;if(P=!0,C=C.drop_side_effect_free(x,!0),B.body instanceof Ze){var ne=B.body.expressions.slice();ne.pop(),C&&ne.push(C),B.body=pe(B.body,ne);break}if(C){B.body=C;break}}return b.length=U+1,P}}function $e(b,x){var P=!1,U=b.length-1;if(r&&U>=0){var B=v&&v.bfinally&&m(y),te=b[U].try_inline(x,i,B);te&&(b[U--]=te,P=!0)}for(var C=g&&v?"try":g;U>=0;U--){var te=b[U].try_inline(x,i,!0,C);te&&(b[U]=te,P=!0)}return P}function tn(b,x){if(b.length<2)return;var P=[],U=0;function B(){if(P.length){var Pe=pe(P[0],P);b[U++]=c(He,Pe,{body:Pe}),P=[]}}for(var te=0,C=b.length;te<C;te++){var ne=b[te];ne instanceof He?(P.length>=x.sequences_limit&&B(),Vt(P,ne.body)):(pi(ne)||B(),b[U++]=ne)}return B(),b.length=U,U!=C}function qe(b,x){if(!(b instanceof Ge))return b;for(var P=null,U=0;U<b.body.length;U++){var B=b.body[U];if(B instanceof bt&&ut(B))x.push(B);else{if(P||Ae(B))return!1;P=B}}return P}function fe(b,x){for(var P=!1,U=0,B,te=0;te<b.length;te++){var C=b[te];if(B)if(C instanceof Mt)(C.value||!m(y))&&(C.value=Ne(C.value||c(yt,C)).optimize(x));else if(C instanceof jt){if(!(C.init instanceof gt)){var ne=!1;B.body.walk(new un(function(h){if(ne||h instanceof rn)return!0;if(h instanceof ae&&h.operator=="in")return ne=!0,!0})),ne||(C.init?C.init=Ne(C.init):(C.init=B.body,U--,P=!0))}}else C instanceof ba?Ae(C.init)||(C.object=Ne(C.object)):C instanceof Un?C.condition=Ne(C.condition):(C instanceof ki||C instanceof kr)&&(C.expression=Ne(C.expression));if(x.option("conditionals")&&C instanceof Un){var Pe=[],Oe=qe(C.body,Pe),kn=qe(C.alternative,Pe);if(Oe!==!1&&kn!==!1&&Pe.length>0){var Fe=Pe.length;Pe.push(c(Un,C,{condition:C.condition,body:Oe||c(Qn,C.body),alternative:kn})),Pe.unshift(U,1),[].splice.apply(b,Pe),te+=Fe,U+=Fe+1,B=null,P=!0;continue}}b[U++]=C,B=C instanceof He?C:null}return b.length=U,P;function Ne(h){U--,P=!0;var q=B.body;return pe(q,[q,h])}}function le(b){if(b instanceof ze)return[b];if(b instanceof Ze)return b.expressions.slice()}function Q(b,x,P){var U=le(x);if(!U)return;P=P||0;for(var B=!1,te=U.length-P;--te>=0;){var C=U[te];if(kn(C)){var ne;if(C.left instanceof X)ne=U.slice(te+1);else if(C.left instanceof on&&kn(C.left.expression)){ne=U.slice(te+1);var Pe=C.clone();C=C.left.expression,Pe.left=Pe.left.clone(),Pe.left.expression=C.left.clone(),ne.unshift(Pe)}else continue;ne.length!=0&&R(C.left,C.right,ne)&&(B=!0,U=U.slice(0,te).concat(C,ne))}}if(b instanceof gt){for(var te=b.definitions.length;--te>=0;){var Oe=b.definitions[te];if(Oe.value){R(Oe.name,Oe.value,U)&&(B=!0),fn(Oe,U,P)&&(B=!0);break}}b instanceof bt&&p(b.definitions,U,P)&&(B=!0)}return B&&U;function kn(Fe){return Fe instanceof ze&&Fe.operator=="="}}function Ce(b,x){if(b instanceof He&&!ut(x)){var P=le(b.body);if(P){var U=[];if(p(U,P.reverse(),0))return x.definitions=U.reverse().concat(x.definitions),P.reverse()}}}function fn(b,x,P){if(n.option("conditionals")&&!(b.name instanceof Nn)){for(var U=!1,B=b.name.definition();x.length>P;){var te=Xf(n,B,b.value,x[0]);if(!te)break;b.value=te,x.shift(),U=!0}return U}}function p(b,x,P){for(var U=!1;x.length>P;){var B=x[0];if(!(B instanceof ze)||B.operator!="=")break;var te=B.left;if(!(te instanceof X)||Y(te)||te.scope.resolve()!==y)break;var C=te.definition();if(C.scope!==y||C.orig.length>C.eliminated+1||C.orig[0].TYPE!="SymbolVar")break;var ne=c(vi,te);b.push(c(Vn,B,{name:ne,value:B.right})),C.orig.push(ne),C.replaced++,x.shift(),U=!0}return U}function R(b,x,P){var U=new Jn;for(U.set(b.name,!0);x instanceof ze&&x.operator=="=";)x.left instanceof X&&U.set(x.left.name,!0),x=x.right;if(x instanceof xn){var B=!1;do{if(!te(P[0]))break;P.shift(),B=!0}while(P.length);return B}else if(x instanceof ft){var B=!1;do{if(!C(P[0]))break;P.shift(),B=!0}while(P.length);return B}function te(ne){if(ne instanceof ze&&ne.operator=="="&&ne.left instanceof on){var Pe=ne.left.expression;if(Pe instanceof X&&U.has(Pe.name)&&ne.right.is_constant_expression(y)){var Oe=ne.left.property;if(Oe instanceof M&&(te(Oe)&&(Oe=ne.left.property=Oe.right.clone()),Oe=Oe.evaluate(n)),!(Oe instanceof M)&&ge.test(""+Oe)){Oe=+Oe;var kn=x.elements,Fe=kn.length;if(!(Oe>Fe+4)){for(var Ne=Math.min(Fe,Oe+1);--Ne>=0;)if(kn[Ne]instanceof On)return;if(Oe<Fe){var h=kn[Oe].drop_side_effect_free(n);kn[Oe]=h?pe(ne,[h,ne.right]):ne.right}else{for(;Oe>Fe;)kn[Fe++]=c(Jt,x);kn[Oe]=ne.right}return!0}}}}}function C(ne){if(ne instanceof ze&&ne.operator=="="&&ne.left instanceof on){var Pe=ne.left.expression;if(Pe instanceof X&&U.has(Pe.name)&&ne.right.is_constant_expression(y)){var Oe=ne.left.property;if(Oe instanceof M&&(C(Oe)&&(Oe=ne.left.property=Oe.right.clone()),Oe=Oe.evaluate(n)),!(Oe instanceof M)){Oe=""+Oe;var kn=Oe=="__proto__"||n.has_directive("use strict")?function(Fe){var Ne=Fe.key;return typeof Ne=="string"&&Ne!=Oe&&Ne!="__proto__"}:function(Fe){var Ne=Fe.key;return Fe instanceof ua||Fe instanceof ea?typeof Ne=="string"&&Ne!=Oe:Ne!=="__proto__"};if(Ve(x.properties,kn))return x.properties.push(c(fi,ne,{key:Oe,value:ne.right})),!0}}}}}function S(b){for(var x=!1,P,U,B=0,te=-1;B<b.length;B++){var C=b[B],ne=b[te];if(C instanceof gt){if(ne&&ne.TYPE==C.TYPE)ne.definitions=ne.definitions.concat(C.definitions),x=!0;else if(C&&ne instanceof Wi&&C.can_letify(n))ne.definitions=ne.definitions.concat(vr(C,i).definitions),x=!0;else if(ne&&C instanceof Wi&&ne.can_letify(n))P=U,b[te]=ne=vr(ne,i),ne.definitions=ne.definitions.concat(C.definitions),x=!0;else if(P&&P.TYPE==C.TYPE&&ut(C))P.definitions=P.definitions.concat(C.definitions),x=!0;else if(C instanceof bt){var Pe=Ce(ne,C);Pe?(Pe.length&&(ne.body=pe(ne,Pe),te++),x=!0):te++,U=P,b[te]=P=C}else b[++te]=C;continue}else if(C instanceof Mt)C.value=Fe(C.value);else if(C instanceof jt){var Pe=Q(ne,C.init);if(Pe)x=!0,C.init=Pe.length?pe(C.init,Pe):null;else if(ne instanceof bt&&(!C.init||C.init.TYPE==ne.TYPE)){C.init&&(ne.definitions=ne.definitions.concat(C.init.definitions)),C=C.clone(),U=P,P=C.init=ne,b[te]=Ne(C),x=!0;continue}else if(P&&C.init&&P.TYPE==C.init.TYPE&&ut(C.init))P.definitions=P.definitions.concat(C.init.definitions),C.init=null,x=!0;else if(C.init instanceof bt&&(U=P,P=C.init,Pe=Ce(ne,C.init),Pe)){if(x=!0,Pe.length==0){b[te]=Ne(C);continue}ne.body=pe(ne,Pe)}}else if(C instanceof Xt){if(P&&P.TYPE==C.init.TYPE){var Oe=P.definitions.slice();C.init=C.init.definitions[0].name.convert_symbol(X,function(h,q){Oe.push(c(Vn,q,{name:q,value:null})),q.definition().references.push(h)}),P.definitions=Oe,x=!0}C.object=Fe(C.object)}else if(C instanceof Un)C.condition=Fe(C.condition);else if(C instanceof He){var Pe=Q(ne,C.body),kn;if(Pe){if(x=!0,!Pe.length)continue;C.body=pe(C.body,Pe)}else if(ne instanceof gt&&(kn=b[B+1])&&ne.TYPE==kn.TYPE&&(kn=kn.definitions[0]).value){x=!0,kn.value=pe(C,[C.body,kn.value]);continue}}else(C instanceof ki||C instanceof kr)&&(C.expression=Fe(C.expression));b[++te]=P?Ne(C):C}return b.length=te+1,x;function Fe(h){var q=Q(ne,h,1);if(!q)return h;x=!0;var he=h.tail_node();return q[q.length-1]!==he&&q.push(he.left),pe(h,q)}function Ne(h){return h.transform(new ei(function(q,he,se){if(q instanceof gt){if(P===q||P.TYPE!=q.TYPE)return q;var Ue=this.parent();return Ue instanceof Xt&&Ue.init===q||!ut(q)?q:(P.definitions=P.definitions.concat(q.definitions),x=!0,Ue instanceof jt&&Ue.init===q?null:se?Ct.skip:c(Qn,q))}if(q instanceof Ti||q instanceof rn||!pr(q))return q}))}}}function wr(e,n,r){var i,f=!1;n.walk(new un(function(g,v){if(g instanceof Si)return g.extends=null,g.properties=[],o(g),!0;if(g instanceof gt){var y=[];return g.remove_initializers(e,y)&&M.warn("Dropping initialization in unreachable code [{start}]",g),y.length>0&&(g.definitions=y,o(g)),!0}if(g instanceof kt)return o(g),!0;if(g instanceof rn)return!0;if(g instanceof li){var T=i;return i=[],v(),i.required?r.push(c(Ge,n,{body:i})):i.length&&[].push.apply(r,i),i=T,!0}g instanceof $r||(f=!0)})),f&&M.warn("Dropping unreachable code [{start}]",n);function o(g){i?(i.push(g),Re(g)||(i.required=!0)):r.push(g)}}function gi(e,n){return e==null||e.is_undefined||e instanceof yt||e instanceof We&&e.operator=="void"&&!(n&&e.expression.has_side_effects(n))}(function(e){e(Nt,nt),e(rn,function(n){for(var r=this.body,i=0;i<r.length;i++){var f=r[i];if(!(f instanceof ci))break;if(f.value=="use strict")return!0}var o=this.parent_scope;return o?o.resolve(!0).in_strict_mode(n):n.option("module")})})(function(e,n){e.DEFMETHOD("in_strict_mode",n)}),function(e){e(M,An),e(xn,nt),e(ze,function(){return this.operator=="="&&this.right.is_truthy()}),e(yn,nt),e(ft,nt),e(ir,nt),e(Ze,function(){return this.tail_node().is_truthy()}),e(X,function(){var n=this.fixed_value();if(!n)return!1;this.is_truthy=An;var r=n.is_truthy();return delete this.is_truthy,r})}(function(e,n){e.DEFMETHOD("is_truthy",n)}),function(e){e(M,nt),e(xn,An);function n(r,i,f){switch(r){case"-":return i.is_negative_zero()&&(!(f instanceof st)||f.value==0);case"&&":case"||":return i.is_negative_zero()||f.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}e(ze,function(){var r=this.operator;return r=="="?this.right.is_negative_zero():n(r.slice(0,-1),this.left,this.right)}),e(ae,function(){return n(this.operator,this.left,this.right)}),e(st,function(){return this.value==0&&1/this.value<0}),e(yn,An),e(ft,An),e(ir,An),e(Ze,function(){return this.tail_node().is_negative_zero()}),e(X,function(){var r=this.fixed_value();if(!r)return!0;this.is_negative_zero=nt;var i=r.is_negative_zero();return delete this.is_negative_zero,i}),e(We,function(){return this.operator=="+"&&this.expression.is_negative_zero()||this.operator=="-"})}(function(e,n){e.DEFMETHOD("is_negative_zero",n)}),function(e){M.DEFMETHOD("may_throw_on_access",function(r,i){return!r.option("pure_getters")||this._dot_throw(r,i)});function n(r,i){return i||/strict/.test(r.option("pure_getters"))}e(M,n),e(xn,An),e(ze,function(r){var i=this.operator,f=this.left,o=this.right;return i!="="?it[i.slice(0,-1)]&&(f._dot_throw(r)||o._dot_throw(r)):o._dot_throw(r)?f instanceof X&&o instanceof ae&&o.operator=="||"&&f.name==o.left.name?o.right._dot_throw(r):!0:!1}),e(ae,function(r){return it[this.operator]&&(this.left._dot_throw(r)||this.right._dot_throw(r))}),e(Nt,function(r,i){return n(r,i)&&!Ve(this.properties,function(f){return f.private||!f.static?!0:!(f instanceof rf||f instanceof af)})}),e(bn,function(r){return this.consequent._dot_throw(r)||this.alternative._dot_throw(r)}),e(st,An),e(Mn,function(r,i){if(!n(r,i))return!1;var f=this.expression;return f instanceof X&&(f=f.fixed_value()),!(this.property=="prototype"&&w(f))}),e(yn,An),e(Pr,nt),e(ft,function(r,i){return n(r,i)&&!Ve(this.properties,function(f){return f instanceof ua||f instanceof ea?!1:!(f.key==="__proto__"&&f.value._dot_throw(r,i))})}),e(Vi,function(r,i){return n(r,i)&&!this.scope.resolve().new}),e(Ze,function(r){return this.tail_node()._dot_throw(r)}),e(X,function(r,i){if(this.defined)return!1;if(this.is_undefined)return!0;if(!n(r,i)||Y(this)&&this.is_declared(r)||this.is_immutable())return!1;var f=this.definition();if(J(f)&&!f.scope.rest&&Ve(f.scope.argnames,function(g){return g instanceof $n}))return f.scope.uses_arguments>2;var o=this.fixed_value(!0);return o?(this._dot_throw=nt,o._dot_throw(r)?(delete this._dot_throw,!0):(this._dot_throw=An,!1)):!0}),e(We,function(){return this.operator=="void"}),e(Cr,An),e(yt,nt)}(function(e,n){e.DEFMETHOD("_dot_throw",n)}),function(e){e(M,An),e(xn,nt);function n(r,i,f){switch(i){case"&&":return f.left.is_defined(r)&&f.right.is_defined(r);case"||":return f.left.is_truthy()||f.right.is_defined(r);case"??":return f.left.is_defined(r)||f.right.is_defined(r);default:return!0}}e(ze,function(r){var i=this.operator;return i=="="?this.right.is_defined(r):n(r,i.slice(0,-1),this)}),e(ae,function(r){return n(r,this.operator,this)}),e(bn,function(r){return this.consequent.is_defined(r)&&this.alternative.is_defined(r)}),e(st,nt),e(Jt,An),e(yn,nt),e(ft,nt),e(Ze,function(r){return this.tail_node().is_defined(r)}),e(X,function(r){if(this.is_undefined)return!1;if(Y(this)&&this.is_declared(r)||this.is_immutable())return!0;var i=this.fixed_value();if(!i)return!1;this.is_defined=An;var f=i.is_defined(r);return delete this.is_defined,f}),e(We,function(){return this.operator!="void"}),e(Cr,nt),e(yt,An)}(function(e,n){e.DEFMETHOD("is_defined",n)}),function(e){e(M,An),e(ze,function(f){return this.operator=="="&&this.right.is_boolean(f)});var n=jn("in instanceof == != === !== < <= >= >");e(ae,function(f){return n[this.operator]||it[this.operator]&&this.left.is_boolean(f)&&this.right.is_boolean(f)}),e(Ba,nt);var r=jn("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(hn,function(f){if(!f.option("unsafe"))return!1;var o=this.expression;return o instanceof Mn&&(r[o.property]||o.property=="test"&&o.expression instanceof ir)}),e(bn,function(f){return this.consequent.is_boolean(f)&&this.alternative.is_boolean(f)}),e($i,An),e(Ze,function(f){return this.tail_node().is_boolean(f)}),e(X,function(f){var o=this.fixed_value();if(!o)return!1;this.is_boolean=An;var g=o.is_boolean(f);return delete this.is_boolean,g});var i=jn("! delete");e(We,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(M,An);var n=jn("- * / % ** & | ^ << >> >>>");e(ze,function(f){return n[this.operator.slice(0,-1)]||this.operator=="="&&this.right.is_number(f)}),e(ae,function(f){return n[this.operator]?!0:this.operator!="+"?!1:(this.left.is_boolean(f)||this.left.is_number(f))&&(this.right.is_boolean(f)||this.right.is_number(f))});var r=jn(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);e(hn,function(f){if(!f.option("unsafe"))return!1;var o=this.expression;return o instanceof Mn&&(r[o.property]||Y(o.expression)&&o.expression.name=="Math")}),e(bn,function(f){return this.consequent.is_number(f)&&this.alternative.is_number(f)}),e($i,An),e(dn,nt),e(Ze,function(f){return this.tail_node().is_number(f)}),e(X,function(f,o){var g=this.fixed_value();if(!g||o&&g instanceof We&&g.operator=="+"&&g.expression.equals(this))return!1;this.is_number=An;var v=g.is_number(f);return delete this.is_number,v});var i=jn("+ - ~ ++ --");e(at,function(){return i[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e(M,An),e(ze,function(r){switch(this.operator){case"+=":if(this.left.is_string(r))return!0;case"=":return this.right.is_string(r)}}),e(ae,function(r){return this.operator=="+"&&(this.left.is_string(r)||this.right.is_string(r))});var n=jn(["charAt","substr","substring","toExponential","toFixed","toLowerCase","toPrecision","toString","toUpperCase","trim"]);e(hn,function(r){if(!r.option("unsafe"))return!1;var i=this.expression;return i instanceof Mn&&n[i.property]}),e(bn,function(r){return this.consequent.is_string(r)&&this.alternative.is_string(r)}),e(Ze,function(r){return this.tail_node().is_string(r)}),e(Dn,nt),e(X,function(r){var i=this.fixed_value();if(!i)return!1;this.is_string=An;var f=i.is_string(r);return delete this.is_string,f}),e(Yt,function(r){return!this.tag||Ff(r,this.tag)}),e(We,function(){return this.operator=="typeof"})}(function(e,n){e.DEFMETHOD("is_string",n)});var it=jn("&& || ??");(function(e){function n(i,f){if(i instanceof M)return i.clone(!0);if(Array.isArray(i))return c(xn,f,{elements:i.map(function(v){return n(v,f)})});if(i&&typeof i=="object"){var o=[];for(var g in i)Rt(i,g)&&o.push(c(fi,f,{key:g,value:n(i[g],f)}));return c(ft,f,{properties:o})}return _i(i,f)}function r(i){M.warn("global_defs {this} redefined [{start}]",i)}Et.DEFMETHOD("resolve_defines",function(i){return i.option("global_defs")?(this.figure_out_scope({ie:i.option("ie")}),this.transform(new ei(function(f){var o=f._find_defs(i,"");if(o){for(var g=0,v=f,y;(y=this.parent(g++))&&!(!(y instanceof on)||y.expression!==v);)v=y;if(Gi(v,y)){r(f);return}return o}}))):this}),e(M,Gt),e(Mn,function(i,f){return this.expression._find_defs(i,"."+this.property+f)}),e(et,function(i){this.definition().global&&Rt(i.option("global_defs"),this.name)&&r(this)}),e(X,function(i,f){if(this.definition().global){var o=i.option("global_defs"),g=this.name+f;if(Rt(o,g))return n(o[g],this)}})})(function(e,n){e.DEFMETHOD("_find_defs",n)});function qi(e,n,r){var i=n.print_to_string().length-e.print_to_string().length;return i<(r||0)?n:e}function la(e,n,r){return qi(c(He,e,{body:e}),c(He,n,{body:n}),r).body}function or(e,n,r,i){return(Oa(e)?la:qi)(n,r,i)}function ha(e){var n=Object.create(null);return Object.keys(e).forEach(function(r){n[r]=jn(e[r])}),n}function cr(e){for(var n=0;n<e.length;n++){var r=e[n];if(!(r instanceof ci))return r}}function Wa(){return this.value?c(tt,this.value,{value:this.value}):cr(this.body)}Zi.DEFMETHOD("first_statement",Wa),gr.DEFMETHOD("first_statement",Wa),yn.DEFMETHOD("first_statement",function(){return cr(this.body)}),yn.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof Fn);n++);return n});function Hi(e,n){var r=n.evaluate(e);return r===n?n:(r=_i(r,n).optimize(e),or(e,n,r,e.eval_threshold))}var re=["constructor","toString","valueOf"],De=ha({Array:["indexOf","join","lastIndexOf","slice"].concat(re),Boolean:re,Function:re,Number:["toExponential","toFixed","toPrecision"].concat(re),Object:re,RegExp:["exec","test"].concat(re),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(re)}),qn=ha({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function _t(e){if(!(e instanceof Mn))return!1;var n=e.expression;if(!Y(n))return!1;var r=qn[n.name];return r&&(r[e.property]||n.name=="Math"&&e.property=="random")}(function(e){e(M,An),e(st,nt),e(ir,An);var n=jn("! ~ - + void");e(We,function(){return n[this.operator]&&this.expression instanceof st})})(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){M.DEFMETHOD("evaluate",function(k,z){if(!k.option("evaluate"))return this;var $=[],N=this._eval(k,z,$,1);return $.forEach(function(D){delete D._eval}),z||!N||N instanceof RegExp?N:typeof N=="function"||typeof N=="object"?this:N});var n=new un(function(k){k instanceof ze&&r(k.left),k instanceof Xt&&r(k.init),k instanceof at&&Ea[k.operator]&&r(k.expression)});function r(k){k instanceof At?k.elements.forEach(r):k instanceof hi?k.properties.forEach(function(z){r(z.value)}):k instanceof on?r(k.expression):k instanceof X&&k.definition().references.forEach(function(z){delete z._eval})}e(Fi,function(){throw new Error(ef("Cannot evaluate a statement [{start}]",this))}),e(Mi,Or),e(cf,Or),e(Nt,Or),e(M,Or),e(st,function(){return this.value}),e(ze,function(k,z,$,N){var D=this.left;if(!z){if(!(D instanceof X))return this;if(!Rt(D,"_eval")){if(!D.fixed)return this;var W=D.definition();if(!W.fixed)return this;if(W.undeclared)return this;if(W.last_ref!==D)return this;if(W.single_use=="m")return this;if(this.right.has_side_effects(k))return this}}var j=this.operator,ee;!Rt(D,"_eval")&&D instanceof X&&D.fixed&&D.definition().fixed?ee=D:j=="="?ee=this.right:ee=c(ae,this,{operator:j.slice(0,-1),left:D,right:this.right}),D.walk(n);var Se=ee._eval(k,z,$,N);return typeof Se=="object"?this:(r(D),Se)}),e(Ze,function(k,z,$,N){if(!z)return this;for(var D=this.expressions,W=0,j=D.length-1;W<j;W++)D[W].walk(n);var ee=D[j],Se=ee._eval(k,z,$,N);return Se===ee?this:Se}),e(yn,function(k){if(k.option("unsafe")){var z=function(){};return z.node=this,z.toString=function(){return"function(){}"},z}return this}),e(xn,function(k,z,$,N){if(k.option("unsafe")){for(var D=[],W=0;W<this.elements.length;W++){var j=this.elements[W];if(j instanceof Jt)return this;var ee=j._eval(k,z,$,N);if(j===ee)return this;D.push(ee)}return D}return this}),e(ft,function(k,z,$,N){if(k.option("unsafe")){for(var D={},W=0;W<this.properties.length;W++){var j=this.properties[W];if(!(j instanceof fi))return this;var ee=j.key;if(ee instanceof M&&(ee=ee._eval(k,z,$,N),ee===j.key))return this;switch(ee){case"__proto__":case"toString":case"valueOf":return this}if(D[ee]=j.value._eval(k,z,$,N),D[ee]===j.value)return this}return D}return this});var i=jn("! typeof void");e(We,function(k,z,$,N){var D=this.expression,W=this.operator;if(k.option("typeofs")&&W=="typeof"&&(D instanceof yn||D instanceof X&&D.fixed_value()instanceof yn))return"function";var j=D instanceof X&&D.definition();!i[W]&&!(j&&j.fixed)&&N++,D.walk(n);var ee=D._eval(k,z,$,N);if(ee===D)return z&&W=="void"?void 0:this;switch(W){case"!":return!ee;case"typeof":return ee instanceof RegExp?this:typeof ee;case"void":return;case"~":return~ee;case"-":return-ee;case"+":return+ee;case"++":case"--":if(!j)return this;if(!z){if(j.undeclared)return this;if(j.last_ref!==D)return this}return Rt(D,"_eval")&&(ee=+(W[0]+1)+ +ee),r(D),ee}return this}),e(Cr,function(k,z,$,N){var D=this.expression;if(D instanceof X){if(!Rt(D,"_eval")){if(!D.fixed)return this;if(!z){var W=D.definition();if(!W.fixed)return this;if(W.undeclared)return this;if(W.last_ref!==D)return this}}}else if(!z)return this;D instanceof X&&D.definition().fixed||N++,D.walk(n);var j=D._eval(k,z,$,N);return j===D?this:(r(D),+j)});var f=jn("&& || === !==");e(ae,function(k,z,$,N){f[this.operator]||N++;var D=this.left._eval(k,z,$,N);if(D===this.left)return this;if(this.operator==(D?"||":"&&"))return D;var W=z&&!(D&&typeof D=="object"),j=this.right._eval(k,W,$,N);if(j===this.right)return this;var ee;switch(this.operator){case"&&":ee=D&&j;break;case"||":ee=D||j;break;case"??":ee=D??j;break;case"|":ee=D|j;break;case"&":ee=D&j;break;case"^":ee=D^j;break;case"+":ee=D+j;break;case"-":ee=D-j;break;case"*":ee=D*j;break;case"/":ee=D/j;break;case"%":ee=D%j;break;case"<<":ee=D<<j;break;case">>":ee=D>>j;break;case">>>":ee=D>>>j;break;case"==":ee=D==j;break;case"===":ee=D===j;break;case"!=":ee=D!=j;break;case"!==":ee=D!==j;break;case"<":ee=D<j;break;case"<=":ee=D<=j;break;case">":ee=D>j;break;case">=":ee=D>=j;break;case"**":ee=Math.pow(D,j);break;case"in":if(j&&typeof j=="object"&&Rt(j,D)){ee=!0;break}default:return this}if(isNaN(ee))return k.find_parent(kr)?this:ee;if(k.option("unsafe_math")&&!z&&ee&&typeof ee=="number"&&(this.operator=="+"||this.operator=="-")){var Se=Math.max(0,$e(D),$e(j));if(Se<16)return+ee.toFixed(Se)}return ee;function $e(tn){var qe=/(\.[0-9]*)?(e[^e]+)?$/.exec(+tn);return(qe[1]||".").length-1-(qe[2]||"").slice(1)}}),e(bn,function(k,z,$,N){var D=this.condition._eval(k,z,$,N);if(D===this.condition)return this;var W=D?this.consequent:this.alternative,j=W._eval(k,z,$,N);return j===W?this:j});function o(k,z){var $=k.definition().escaped;switch($.length){case 0:return!0;case 1:var N=!1;return $[0].walk(new un(function(D){if(N)return!0;if(D===k)return N=!0;if(D instanceof rn)return!0})),N;default:return z<=$.depth}}e(X,function(k,z,$,N){this._eval=Or;try{var D=this.fixed_value();if(!D)return this;var W;if(Rt(D,"_eval"))W=D._eval();else{if(W=D._eval(k,z,$,N),W===D)return this;D._eval=function(){return W},$.push(D)}return W&&typeof W=="object"&&!o(this,N)?this:W}finally{delete this._eval}});var g={Array,Math,Number,Object,String},v=ha({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),y=jn("global ignoreCase multiline source");e(on,function(k,z,$,N){if(k.option("unsafe")){var D,W=this.expression;if(!Y(W)&&(D=W._eval(k,z,$,N+1),D==null||D===W))return this;var j=this.property;if(j instanceof M&&(j=j._eval(k,z,$,N),j===this.property))return this;if(D===void 0){var ee=v[W.name];if(!ee||!ee[j])return this;D=g[W.name]}else if(D instanceof RegExp){if(!y[j])return this}else if(typeof D=="object"){if(!Rt(D,j))return this}else if(typeof D=="function")switch(j){case"name":return D.node.name?D.node.name.name:"";case"length":return D.node.length();default:return this}return D[j]}return this});function T(k,z,$,N,D){for(var W=[],j=0;j<k.length;j++){var ee=k[j],Se=ee._eval(z,$,N,D);if(ee===Se)return;W.push(Se)}return W}e(hn,function(k,z,$,N){var D=this.expression,W=D instanceof X?D.fixed_value():D;if(W instanceof Zi||W instanceof Ri||W instanceof Tt){if(W.evaluating)return this;if(W.name&&W.name.definition().recursive_refs>0)return this;if(this.is_expr_pure(k))return this;var j=T(this.args,k,z,$,N);if(!Ve(W.argnames,function(fn,p){if(fn instanceof Fn){if(!j)return!1;if(j[p]===void 0){var R=fn.value._eval(k,z,$,N);if(R===fn.value)return!1;j[p]=R}fn=fn.name}return!(fn instanceof Nn)}))return this;if(W.rest instanceof Nn)return this;if(!j&&!z)return this;var ee=W.first_statement();if(!(ee instanceof tt)){if(z){W.walk(n);var Se=!1;if(W.evaluating=!0,ti(W,new un(function(fn){if(Se)return!0;if(fn instanceof tt)return fn.value&&fn.value._eval(k,!0,$,N)!==void 0&&(Se=!0),!0;if(fn instanceof rn&&fn!==W)return!0})),W.evaluating=!1,!Se)return}return this}var $e=ee.value;if(!$e)return;var tn=[];return(!j||Ve(W.argnames,function(fn,p){return Ce(fn,j[p])})&&!(W.rest&&!Ce(W.rest,j.slice(W.argnames.length)))||z)&&(z&&W.argnames.forEach(function(fn){fn instanceof Fn&&fn.value.walk(n)}),W.evaluating=!0,$e=$e._eval(k,z,$,N),W.evaluating=!1),tn.forEach(function(fn){delete fn._eval}),$e===ee.value?this:$e}else if(k.option("unsafe")&&D instanceof on){var qe=D.property;if(qe instanceof M&&(qe=qe._eval(k,z,$,N),qe===D.property))return this;var $e,fe=D.expression;if(Y(fe)){var le=qn[fe.name];if(!le||!le[qe])return this;$e=g[fe.name]}else{if($e=fe._eval(k,z,$,N+1),$e==null||$e===fe)return this;var Q=De[$e.constructor.name];if(!Q||!Q[qe])return this;if($e instanceof RegExp&&$e.global&&!(fe instanceof ir))return this}var j=T(this.args,k,z,$,N);if(!j)return this;if(qe=="replace"&&typeof j[1]=="function")return this;try{return $e[qe].apply($e,j)}catch{M.warn("Error evaluating {this} [{start}]",this)}finally{$e instanceof RegExp&&($e.lastIndex=0)}}return this;function Ce(fn,p){fn instanceof Fn&&(fn=fn.name);var R=fn.definition();if(R.orig[R.orig.length-1]!==fn)return!1;var S=p;return R.references.forEach(function(b){b._eval=function(){return S},tn.push(b)}),!0}}),e($i,Or),e(Yt,function(k,z,$,N){if(!k.option("templates"))return this;if(this.tag){if(!Ff(k,this.tag))return this;Se=function($e){return $e}}var D=T(this.expressions,k,z,$,N);if(!D)return this;for(var W=!1,j=Se(this.strings[0]),ee=0;ee<D.length;ee++)j+=D[ee]+Se(this.strings[ee+1]);if(!W)return j;return this._eval=Or,this;function Se($e){return $e=Mf($e),typeof $e!="string"&&(W=!0),$e}})}(function(e,n){e.DEFMETHOD("_eval",n)}),function(e){function n(i){return c(We,i,{operator:"!",expression:i})}function r(i,f,o){var g=n(i);return o?qi(g,c(He,f,{body:f}))===g?g:f:qi(g,f)}e(M,function(){return n(this)}),e(Fi,function(){throw new Error("Cannot negate a statement")}),e(ae,function(i,f){var o=this.clone(),g=this.operator;if(i.option("unsafe_comps"))switch(g){case"<=":return o.operator=">",o;case"<":return o.operator=">=",o;case">=":return o.operator="<",o;case">":return o.operator="<=",o}switch(g){case"==":return o.operator="!=",o;case"!=":return o.operator="==",o;case"===":return o.operator="!==",o;case"!==":return o.operator="===",o;case"&&":return o.operator="||",o.left=o.left.negate(i,f),o.right=o.right.negate(i),r(this,o,f);case"||":return o.operator="&&",o.left=o.left.negate(i,f),o.right=o.right.negate(i),r(this,o,f)}return n(this)}),e(xr,function(){return n(this)}),e(bn,function(i,f){var o=this.clone();return o.consequent=o.consequent.negate(i),o.alternative=o.alternative.negate(i),r(this,o,f)}),e(St,function(){return n(this)}),e(Ze,function(i){var f=this.expressions.slice();return f.push(f.pop().negate(i)),pe(this,f)}),e(We,function(){return this.operator=="!"?this.expression:n(this)})}(function(e,n){e.DEFMETHOD("negate",function(r,i){return n.call(this,r,i)})});var ot=jn("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),Bt=jn("Map Set WeakMap WeakSet");hn.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(Y(n)&&(ot[n.name]||this instanceof $i&&Bt[n.name])||_t(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),Yt.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(Y(n)&&ot[n.name])return!0;if(n instanceof Mn&&Y(n.expression)){var r=qn[n.expression.name];return r&&(r[n.property]||n.expression.name=="Math"&&n.property=="random")}}return!e.pure_funcs(this)}),M.DEFMETHOD("is_call_pure",An),hn.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof Mn))return!1;var r=n.expression,i,f=n.property;if(r instanceof xn)i=De.Array;else if(r.is_boolean(e))i=De.Boolean;else if(r.is_number(e))i=De.Number;else if(r instanceof ir)i=De.RegExp;else if(r.is_string(e)){if(i=De.String,f=="replace"){var o=this.args[1];if(o&&!o.is_string(e))return!1}}else n.may_throw_on_access(e)||(i=De.Object);return i&&i[f]}),function(e){e(M,An),e(xn,nt),e(ze,function(){switch(this.operator){case"=":return this.right.safe_to_spread();case"&&=":case"||=":case"??=":return this.left.safe_to_spread()&&this.right.safe_to_spread()}return!0}),e(ae,function(){return!it[this.operator]||this.left.safe_to_spread()&&this.right.safe_to_spread()}),e(st,nt),e(yn,nt),e(ft,function(){return Ve(this.properties,function(n){return!(n instanceof ua||n instanceof On)})}),e(Ze,function(){return this.tail_node().safe_to_spread()}),e(X,function(){var n=this.fixed_value();return n&&n.safe_to_spread()}),e(at,nt)}(function(e,n){e.DEFMETHOD("safe_to_spread",n)}),function(e){function n(i,f,o){return!Ve(i,o?function(g){return g instanceof On?!o(g,f):!g.has_side_effects(f)}:function(g){return!g.has_side_effects(f)})}function r(i,f){var o=i.expression;return!o.is_string(f)||o.has_side_effects(f)}e(M,nt),e(xn,function(i){return n(this.elements,i,r)}),e(ze,function(i){var f=this.left;if(!(f instanceof on))return!0;var o=f.expression;return!(o instanceof Vi)||!o.scope.resolve().new||f instanceof ht&&f.property.has_side_effects(i)||this.right.has_side_effects(i)}),e(ae,function(i){return this.left.has_side_effects(i)||this.right.has_side_effects(i)||!Ja(this,i)}),e(ii,function(i){return n(this.body,i)}),e(hn,function(i){return!this.is_expr_pure(i)&&(!this.is_call_pure(i)||this.expression.has_side_effects(i))?!0:n(this.args,i,r)}),e(sr,function(i){return this.expression.has_side_effects(i)||n(this.body,i)}),e(Nt,function(i){var f=this.extends;return f&&(f instanceof X&&(f=f.fixed_value()),!O(f))?!0:n(this.properties,i)}),e(ar,function(i){return this.key instanceof M&&this.key.has_side_effects(i)||this.static&&this.value&&this.value.has_side_effects(i)}),e(bn,function(i){return this.condition.has_side_effects(i)||this.consequent.has_side_effects(i)||this.alternative.has_side_effects(i)}),e(st,An),e(gt,function(i){return n(this.definitions,i)}),e(At,function(i){return n(this.elements,i)}),e(Pt,function(i){return this.key instanceof M&&this.key.has_side_effects(i)||this.value.has_side_effects(i)}),e(hi,function(i){return n(this.properties,i)}),e(Mn,function(i){return this.expression.may_throw_on_access(i)||this.expression.has_side_effects(i)}),e(Qn,An),e(Un,function(i){return this.condition.has_side_effects(i)||this.body&&this.body.has_side_effects(i)||this.alternative&&this.alternative.has_side_effects(i)}),e(ri,function(i){return this.body.has_side_effects(i)}),e(yn,An),e(ft,function(i){return n(this.properties,i,function(f,o){var g=f.expression;return!g.safe_to_spread()||g.has_side_effects(o)})}),e(Vi,An),e(Ci,function(i){return this.key instanceof M&&this.key.has_side_effects(i)||this.value.has_side_effects(i)}),e(Ze,function(i){return n(this.expressions,i)}),e(He,function(i){return this.body.has_side_effects(i)}),e(ht,function(i){return this.expression.may_throw_on_access(i)||this.expression.has_side_effects(i)||this.property.has_side_effects(i)}),e(ki,function(i){return this.expression.has_side_effects(i)||n(this.body,i)}),e(et,An),e(X,function(i){return!this.is_declared(i)||!Be(this,i)}),e(Yt,function(i){return!this.is_expr_pure(i)||n(this.expressions,i)}),e(ai,function(i){return n(this.body,i)||this.bcatch&&this.bcatch.has_side_effects(i)||this.bfinally&&this.bfinally.has_side_effects(i)}),e(at,function(i){return Sa[this.operator]||this.expression.has_side_effects(i)}),e(Vn,function(){return this.value})}(function(e,n){e.DEFMETHOD("has_side_effects",n)}),function(e){e(M,nt),e(st,An),e(Qn,An),e(yn,An),e(Vi,An),e(et,An);function n(i,f){for(var o=i.length;--o>=0;)if(i[o].may_throw(f))return!0;return!1}function r(i,f){return i.may_throw(f)||(i instanceof X&&(i=i.fixed_value()),!(i instanceof yn))||n(i.argnames,f)||n(i.body,f)?!0:qt(i)&&i.value&&i.value.may_throw(f)}e(xn,function(i){return n(this.elements,i)}),e(ze,function(i){return this.right.may_throw(i)?!0:!i.has_directive("use strict")&&this.operator=="="&&this.left instanceof X?!1:this.left.may_throw(i)}),e(wt,function(i){return this.expression.may_throw(i)}),e(ae,function(i){return this.left.may_throw(i)||this.right.may_throw(i)||!Ja(this,i)}),e(ii,function(i){return n(this.body,i)}),e(hn,function(i){if(n(this.args,i))return!0;if(this.is_expr_pure(i))return!1;this.may_throw=nt;var f=r(this.expression,i);return delete this.may_throw,f}),e(sr,function(i){return this.expression.may_throw(i)||n(this.body,i)}),e(bn,function(i){return this.condition.may_throw(i)||this.consequent.may_throw(i)||this.alternative.may_throw(i)}),e(Fn,function(i){return this.name.may_throw(i)||this.value&&this.value.may_throw(i)}),e(gt,function(i){return n(this.definitions,i)}),e(Mn,function(i){return!this.optional&&this.expression.may_throw_on_access(i)||this.expression.may_throw(i)}),e(Xt,function(i){if(this.init.may_throw(i))return!0;var f=this.object;return f.may_throw(i)||(f=f.tail_node(),!(f instanceof xn||f.is_string(i)))?!0:this.body.may_throw(i)}),e(Un,function(i){return this.condition.may_throw(i)||this.body&&this.body.may_throw(i)||this.alternative&&this.alternative.may_throw(i)}),e(ri,function(i){return this.body.may_throw(i)}),e(ft,function(i){return n(this.properties,i)}),e(Ci,function(i){return this.value.may_throw(i)||this.key instanceof M&&this.key.may_throw(i)}),e(tt,function(i){return this.value&&this.value.may_throw(i)}),e(Ze,function(i){return n(this.expressions,i)}),e(He,function(i){return this.body.may_throw(i)}),e(ht,function(i){return!this.optional&&this.expression.may_throw_on_access(i)||this.expression.may_throw(i)||this.property.may_throw(i)}),e(ki,function(i){return this.expression.may_throw(i)||n(this.body,i)}),e(X,function(i){return!this.is_declared(i)||!Be(this,i)}),e(Yt,function(i){if(n(this.expressions,i))return!0;if(this.is_expr_pure(i)||!this.tag)return!1;this.may_throw=nt;var f=r(this.tag,i);return delete this.may_throw,f}),e(ai,function(i){return(this.bcatch?this.bcatch.may_throw(i):n(this.body,i))||this.bfinally&&this.bfinally.may_throw(i)}),e(at,function(i){return this.expression.may_throw(i)&&!(this.operator=="typeof"&&this.expression instanceof X)}),e(Vn,function(i){return this.name.may_throw(i)||this.value&&this.value.may_throw(i)})}(function(e,n){e.DEFMETHOD("may_throw",n)}),function(e){function n(i,f){for(var o=i.length;--o>=0;)if(!i[o].is_constant_expression(f))return!1;return!0}function r(i,f){var o=!0,g=[];return i.walk(new un(function(v,y){if(!o)return!0;if(v instanceof li)return v===i?void 0:(g.push(v),y(),g.pop(),!0);if(v instanceof X){if(i.inlined||v.redef||v.in_arg)return o=!1,!0;if(i.variables&&i.variables.has(v.name))return!0;var T=v.definition();if(_r(T.scope,g))return!0;if(f&&!T.redefined()){var k=f.find_variable(v.name);if(k?k===T:T.undeclared)return o="f",!0}return o=!1,!0}if(v instanceof Vi)return qt(i)&&Ve(g,function(z){return!(z instanceof rn)||qt(z)})&&(o=!1),!0})),o}e(M,An),e(xn,function(i){return n(this.elements,i)}),e(ae,function(i){return this.left.is_constant_expression(i)&&this.right.is_constant_expression(i)&&Ja(this)}),e(Nt,function(i){var f=this.extends;return f&&!O(f)?!1:n(this.properties,i)}),e(ar,function(i){if(typeof this.key!="string")return!1;var f=this.value;return f?this.static?f.is_constant_expression(i):r(f,i):!0}),e(st,nt),e(yn,function(i){return r(this,i)}),e(ft,function(i){return n(this.properties,i)}),e(Vi,function(i){return this.scope.resolve()===i}),e(Ci,function(i){return typeof this.key=="string"&&this.value.is_constant_expression(i)}),e(at,function(i){return this.expression.is_constant_expression(i)})}(function(e,n){e.DEFMETHOD("is_constant_expression",n)});function Zt(e){return e&&e.aborts()}(function(e){e(Fi,aa),e(ff,Or);function n(){var r=this.body.length;return r>0&&Zt(this.body[r-1])}e(Ge,n),e(yr,n),e(Un,function(){return this.alternative&&Zt(this.body)&&Zt(this.alternative)&&this})})(function(e,n){e.DEFMETHOD("aborts",n)});var Ta=jn(["use asm","use strict"]);t(ci,function(e,n){return n.option("directives")&&(!Ta[e.value]||n.has_directive(e.value)!==e)?c(Qn,e):e}),t(za,function(e,n){return n.option("drop_debugger")?c(Qn,e):e}),t(ri,function(e,n){if(e.body instanceof Un||e.body instanceof fr){var r=Ar([e.body],n);switch(r.length){case 0:e.body=c(Qn,e);break;case 1:e.body=r[0];break;default:e.body=c(Ge,e,{body:r});break}}return n.option("unused")&&e.label.references.length==0?e.body:e}),t($r,function(e,n){if(!n.option("dead_code"))return e;var r=e.label;if(r){var i=n.loopcontrol_target(e);e.label=null,n.loopcontrol_target(e)===i?nf(r.thedef.references,e):e.label=r}return e}),t(ii,function(e,n){return e.body=Ar(e.body,n),e});function Ji(e,n,r){switch(e.body.length){case 0:return r?Ct.skip:c(Qn,e);case 1:var i=e.body[0];return!Re(i)||n instanceof Ii&&i instanceof kt?e:i}return e}t(Ge,function(e,n){return e.body=Ar(e.body,n),Ji(e,n.parent())});function lr(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof At&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}t(yn,function(e,n){return lr(e,n),e.body=Ar(e.body,n),e}),t(Tt,function(e,n){lr(e,n),e.body=Ar(e.body,n);var r=n.parent();if(n.option("inline"))for(var i=0;i<e.body.length;i++){var f=e.body[i];if(!(f instanceof ci)){if(f instanceof tt){if(i!=e.body.length-1)break;var o=f.value;if(!o||o.TYPE!="Call"||o.is_expr_pure(n))break;var g=o.expression,v;if(!(g instanceof X))v=g;else{if(e.name&&e.name.definition()===g.definition())break;v=g.fixed_value()}if(!(v instanceof Ri||v instanceof Tt)||v.rest||v.uses_arguments||v===g&&(v.parent_scope!==e||!Ve(v.enclosed,function(z){return z.scope!==e}))||(v!==g||v.name)&&(r instanceof ya||r instanceof Qr)&&r.value===n.self()||v.contains_this())break;var y=v.argnames.length;if(y>0&&n.option("inline")<2||y>e.argnames.length||!Ve(e.argnames,function(z){return z instanceof $n})||!Ve(o.args,function(z){return!(z instanceof On)}))break;for(var T=0;T<y;T++){var k=o.args[T];if(!(k instanceof X)||k.definition()!==e.argnames[T].definition())break}if(T<y)break;for(;T<o.args.length&&!o.args[T].has_side_effects(n);T++);if(T<o.args.length)break;if(y<e.argnames.length&&!n.drop_fargs(e,r)){if(!n.drop_fargs(v,o))break;do v.argnames.push(v.make_var($n,v,"argument_"+y));while(++y<e.argnames.length)}return g}break}}return e});var ia=jn("arguments await yield");rn.DEFMETHOD("merge_variables",function(e){if(!e.option("merge_vars"))return;var n=[],r,i,f={},o=this,g=[],v=[],y=0,T=new Jn,k=Object.create(null),z=Object.create(null),$=new un(function(S,b){if(S instanceof ze){var x=S.left,P=S.right;return x instanceof Nn?(P.walk($),Q(X,Ce,x),!0):it[S.operator.slice(0,-1)]?(x.walk($),fe(),P.walk($),x instanceof X&&Ce(x),le(),!0):x instanceof X?(S.operator!="="&&Ce(x,!0),P.walk($),Ce(x),!0):void 0}if(S instanceof ae)return it[S.operator]?(Fe(S),!0):void 0;if(S instanceof fr){var U=$.loopcontrol_target(S);return U instanceof Ii||fn(U),!0}if(S instanceof hn){var B=S.expression;return B instanceof St?(S.args.forEach(function(h){h.walk($)}),B.walk($)):(b(),kn(B)),!0}if(S instanceof Nt)return S.name&&S.name.walk($),S.extends&&S.extends.walk($),S.properties.filter(function(h){return h.key instanceof M&&h.key.walk($),h.value}).forEach(function(h){h.static?h.value.walk($):(fe(),f.block=S,h.value.walk($),le())}),!0;if(S instanceof bn)return Fe(S.condition,S.consequent,S.alternative),!0;if(S instanceof Zr){var U=$.loopcontrol_target(S);return U instanceof Lr&&fn(U),!0}if(S instanceof Lr){fe(),f.block=S,f.loop=!0;var te=f;return S.body.walk($),f.inserted===S&&(f=te),S.condition.walk($),le(),!0}if(S instanceof jt)return S.init&&S.init.walk($),fe(),f.block=S,f.loop=!0,S.condition&&S.condition.walk($),S.body.walk($),S.step&&S.step.walk($),le(),!0;if(S instanceof Xt)return S.object.walk($),fe(),f.block=S,f.loop=!0,S.init.walk($),S.body.walk($),le(),!0;if(S instanceof Un)return Fe(S.condition,S.body,S.alternative),!0;if(S instanceof ri){fe(),f.block=S;var te=f;return S.body.walk($),f.inserted===S&&(f=te),le(),!0}if(S instanceof rn){if(fe(),f.block=S,S===o&&(i=f),S instanceof yn){S.name&&(k[S.name.definition().id]=!1);var C=S.uses_arguments&&!$.has_directive("use strict")?function(h){k[h.definition().id]=!1}:function(h){Ce(h)};n.push(S),S.argnames.forEach(function(h){Q($n,C,h)}),S.rest&&Q($n,C,S.rest),n.pop()}return Lf(S,$),le(),!0}if(S instanceof ht){var B=S.expression;return S.optional?(B.walk($),fe(),S.property.walk($),le()):b(),kn(B),!0}if(S instanceof ki){S.expression.walk($);var te=f;return S.body.forEach(function(q){q instanceof Vr||(q.expression.walk($),te===f&&fe())}),f=te,S.body.forEach(function(q){fe(),f.block=S;var he=f;ti(q,$),f.inserted===S&&(f=he),le()}),!0}if(S instanceof et)return k[S.definition().id]=!1,!0;if(S instanceof X)return Ce(S,!0),!0;if(S instanceof ai){var ne=r;return r=S,ti(S,$),S.bcatch&&(S.bcatch.argname&&S.bcatch.argname.mark_symbol(function(h){if(h instanceof tr){var q=h.definition();k[q.id]=!1,(q=q.redefined())&&(k[q.id]=!1)}},$),S.bfinally||(r=ne)?ti(S.bcatch,$):(fe(),ti(S.bcatch,$),le())),r=ne,S.bfinally&&S.bfinally.walk($),!0}if(S instanceof at){if(!Ea[S.operator])return;var Pe=S.expression;return Pe instanceof X?(Ce(Pe,!0),!0):void 0}if(S instanceof Vn){var Oe=S.value;return Oe?Oe.walk($):Oe=f.block instanceof Xt&&f.block.init===$.parent(),Q(et,Oe?function(h){h instanceof vi?Ce(h):h.walk($)}:function(h){if(h instanceof vi){var q=h.definition().id,he=k[q];he?he.push(h):q in k||T.add(q,h)}else h.walk($)},S.name),!0}if(S instanceof fa)return fe(),f.block=S,f.loop=!0,b(),le(),!0;function kn(h){if(e.option("ie")){var q=mf(h);q instanceof X&&q.walk($)}}function Fe(h,q,he){var se=f,Ue=Ne(1,h,q,he);if(q){f=Ue.consequent.segment;for(var de=Ue.consequent.level;--de>=0;)le();if(f!==se)return}if(he){f=Ue.alternative.segment;for(var de=Ue.alternative.level;--de>=0;)le();if(f!==se)return}f=se}function Ne(h,q,he,se){var Ue={consequent:{segment:f,level:h},alternative:{segment:f,level:h}};if(q instanceof ae)switch(q.operator){case"&&":Ue.consequent=Ne(h+1,q.left,q.right).consequent;break;case"||":Ue.alternative=Ne(h+1,q.left,null,q.right).alternative;break;case"??":Ue.alternative=Ne(h+1,q.left,q.right,q.right).alternative;break;default:q.walk($);break}else q instanceof bn?Ne(h+1,q.condition,q.consequent,q.alternative):q.walk($);return he&&(f=Ue.consequent.segment,fe(),he.walk($),Ue.consequent.segment=f),se&&(f=Ue.alternative.segment,fe(),se.walk($),Ue.alternative.segment=f),Ue}});$.directives=Object.create(e.directives),o.walk($);for(var N=!1,D=Object.create(null);g.length&&v.length;){var W=v.shift();if(W){var j=W.definition,ee=k[j.id];if(ee){for(ee={end:ee.end};j.id in D;)j=D[j.id];ee.start=k[j.id].start;var Se=[];do{var $e=g.shift();if(!(W.index>$e.index)){var tn=$e.definition;if(tn.id in z){var qe=k[tn.id];if(qe){if(qe.start.block!==ee.start.block||!R(qe,ee)||(qe.start.loop||!Ka(j))&&!R(ee,qe)||e.option("webkit")&&Tr(j)!==Tr(tn)||tn.const_redefs||!Ve(qe.scopes,function(S){return S.find_variable(j.name)===j})){Se.push($e);continue}qe.forEach(function(S){S.thedef=j,S.name=j.name,S instanceof X?(j.references.push(S),tn.replaced++):(j.orig.push(S),tn.eliminated++)}),tn.fixed||(j.fixed=!1),D[tn.id]=j,N=!0;break}}}}while(g.length);Se.length&&(g=Se.concat(g))}}}return N;function fe(){f=Object.create(f)}function le(){f=Object.getPrototypeOf(f)}function Q(S,b,x){var P=new un(function(U){if(!(U instanceof Nn))return U instanceof Fn?(fe(),U.value.walk($),le(),U.name.walk(P)):U instanceof Pt?U.key instanceof M?U.value instanceof on?(fe(),f.block=U,U.key.walk($),U.value.walk(P),le()):(U.key.walk($),U.value.walk(P)):U.value.walk(P):U instanceof S?b(U):U.walk($),!0});x.walk(P)}function Ce(S,b){var x=S.definition(),P;if(b&&!Ve(n,function(C){return P=C.variables.get(S.name),!P||!Tr(P)?!0:P!==x&&!x.undeclared&&C.parent_scope.find_variable(S.name)!==x}))return k[x.id]=k[P.id]=!1;var U=f;if(r&&(fe(),U=f,le()),x.id in k){var B=k[x.id];if(!B)return;if(B.start.block!==U.block)return k[x.id]=!1;if(te(S),B.end=U,x.id in z)v[z[x.id]]=null;else if(!b)return}else{if((P=o.variables.get(x.name))!==x)return P&&i===U&&(k[P.id]=!1),k[x.id]=!1;if(e.exposed(x)||ia[S.name])return k[x.id]=!1;var B=T.get(x.id)||[];if(B.scopes=[],te(S),k[x.id]=B,!b)return B.start=U,g.push({index:y++,definition:x});if(U.block!==o)return k[x.id]=!1;B.start=i}z[x.id]=v.length,v.push({index:y++,definition:x});function te(C){B.push(C),zi(B.scopes,C.scope);var ne=G($);ne!==C.scope&&zi(B.scopes,ne)}}function fn(S){for(var b=[];;){if(Rt(f,"block")){var x=f.block;if(x instanceof ri&&(x=x.body),x===S)break}b.push(f),le()}for(f.inserted=f.block,fe();b.length;){var P=b.pop();fe(),Rt(P,"block")&&(f.block=P.block),Rt(P,"loop")&&(f.loop=P.loop)}}function p(S,b){return S===b||S.isPrototypeOf(b)}function R(S,b){return p(S.start,S.end)||p(S.start,b.start)}});function hr(e,n){for(var r=n.length;--r>=0;)n[r]||(n[r]=c(Jt,e))}function Rr(e,n){var r=c(xr,e);return r.name&&(r.name=n?null:c(Ia,r.name)),r}function si(e,n){var r;switch(e.CTOR){case Ur:r=rr;break;case zr:r=Qi;break;case Ri:r=Tt;break;case Xr:r=br;break}var i=c(r,e);return i.name=n?null:c(Ei,e.name),i}rn.DEFMETHOD("drop_unused",function(e){if(!e.option("unused"))return;var n=this,r=!(n instanceof Et)||e.toplevel.funcs,i=!(n instanceof Et)||e.toplevel.vars,f=/keep_assign/.test(e.option("unused"))?An:function(h,q){var he,se=!1;if(h instanceof ze?(h.write_only||h.operator=="=")&&(he=de(h.left,q)):h instanceof at&&h.write_only&&(he=de(h.expression,q)),!(he instanceof X))return;var Ue=he.definition();if(g[Ue.id]||e.exposed(Ue)||!Be(he,e,se))return;return he;function de(Je,Cn){if(Je instanceof on){var Le=Je.expression;if(!Le.may_throw_on_access(e,!0))return se=!0,Cn&&Je instanceof ht&&Cn.unshift(Je.property),de(Le,Cn)}else if(Je instanceof ze&&Je.operator=="="){Je.write_only="p";var En=de(Je.right);return Cn?(Cn.assign=Je,En instanceof X?En:Je.left):En}return Je}},o=Object.create(null),g=Object.create(null),v=function(h){return v=q(n,0,Gt),v(h);function q(he,se,Ue){var de=e.parent(se);if(!de)return Ue;var Je=de instanceof yn&&_r(he,de.argnames);return q(de,se+1,Je?function(Cn){var Le=Ue(Cn);if(Le)return Le;if(Le=de.variables.get(Cn),Le){var En=Le.orig[0];if(En instanceof $n||En instanceof Ei)return Le}}:de.variables?function(Cn){return Ue(Cn)||de.variables.get(Cn)}:Ue)}},y=Object.create(null),T=[],k=Object.create(null),z=Object.create(null),$=Object.create(null),N=Object.create(null),D=Object.create(null);n instanceof Et&&e.top_retain&&n.variables.each(function(h){e.top_retain(h)&&!(h.id in k)&&(M.info("Retaining variable {name}",h),k[h.id]=!0,T.push(h))});var W=new Jn,j=new Jn,ee=this,Se=new un(function(h,q){if(h instanceof yn&&h.uses_arguments&&!Se.has_directive("use strict")&&h.each_argname(function(Le){var En=Le.definition();En.id in k||(k[En.id]=!0,T.push(En))}),h===n)return;if(ee===n){if(h instanceof Si){var he=h.name.definition(),se=r&&!he.exported;!se&&!(he.id in k)&&(k[he.id]=!0,T.push(he));var Ue=Se.parent()instanceof ji;Ue?g[he.id]=!0:se&&!(he.id in z)&&(z[he.id]=1),h.extends&&h.extends.walk(Se);var de=[];return h.properties.forEach(function(Le){Le.key instanceof M&&Le.key.walk(Se);var En=Le.value;En&&(mn(Le)?(!Ue&&En.contains_this()&&(Ue=!0),Cn(En)):de.push(En))}),de.forEach(se&&Ue?Cn:function(Le){j.add(he.id,Le)}),!0}if(h instanceof kt){var he=h.name.definition(),se=r&&!he.exported;return!se&&!(he.id in k)&&(k[he.id]=!0,T.push(he)),j.add(he.id,h),Se.parent()instanceof ji?(g[he.id]=!0,Pe(h,q,!0)):(se&&!(he.id in z)&&(z[he.id]=1),!0)}if(h instanceof gt)return h.definitions.forEach(function(Le){var En=Le.value,Te=En&&(Le.name instanceof Nn||En.has_side_effects(e)),pt=Te&&En.tail_node().operator=="=";Le.name.mark_symbol(function(Ot){if(Ot instanceof et){var Bn=Ot.definition();if(D[Bn.id]=(D[Bn.id]||0)+1,h instanceof bt&&Bn.orig[0]instanceof tr){var ct=Bn.redefined();ct&&(D[ct.id]=(D[ct.id]||0)+1)}return!(Bn.id in k)&&(!i||Bn.exported||(h instanceof Er?Bn.redefined():Bn.const_redefs)||!(h instanceof bt||Kt(Bn)))&&(k[Bn.id]=!0,T.push(Bn)),En&&(Te?pt&&B(Bn,Ot,N[Bn.id]):j.add(Bn.id,En),W.add(Bn.id,Le)),U(Bn),!0}},Se),Te&&En.walk(Se)}),!0;if(h instanceof $n){var he=h.definition();D[he.id]=(D[he.id]||0)+1,W.add(he.id,h);var Je=h.fixed_value(!0);return Je&&Je.tail_node().operator=="="&&B(he,h,N[he.id]),!0}if(h instanceof ur){var he=h.definition();return!(he.id in k)&&(!i||!Kt(he))&&(k[he.id]=!0,T.push(he)),!0}}return Pe(h,q,!0);function Cn(Le){var En=ee;ee=h,Le.walk(Se),ee=En}});Se.directives=Object.create(e.directives),n.walk(Se);var $e=e.option("keep_fnames")?An:e.option("ie")?function(h){return!e.exposed(h)&&h.references.length==h.replaced}:function(h){return h.id in k?h.orig.length-h.eliminated<2?!1:h.orig[1]instanceof $n?!0:Ve(h.references,function(q){return!q.in_arg}):!0};e.option("ie")&&j.each(function(h,q){q in k||h.forEach(function(he){he.walk(new un(function(se){if(se instanceof Tt&&se.name&&!$e(se.name.definition()))return se.walk(Se),!0;if(se instanceof rn)return!0}))})}),Se=new un(Pe);for(var tn=0;tn<T.length;tn++){var qe=j.get(T[tn].id);qe&&qe.forEach(function(h){h.walk(Se)})}Object.keys(o).forEach(function(h){var q=o[h];if(!q){delete o[h];return}q=q.reduce(function(se,Ue){return Ue.forEach(function(de){zi(se,de)}),se},[]);var he=(W.get(h)||[]).filter(function(se){return bf(se instanceof at?function(Ue){return Ue===se}:function(Ue){return Ue===se?!0:Ue instanceof at?!1:R(Ue)===R(se)},q)});q.length==he.length?o[h]=he:delete o[h]});var fe=[],le=[],Q=new ei(function(h){if(h instanceof Fn)return Fe(Q,h);if(h instanceof Nn&&h.rest&&(h.rest=h.rest.transform(Q)),h instanceof At){for(var q=!h.rest,he=h.elements.length;--he>=0;){var se=h.elements[he].transform(Q);se?(h.elements[he]=se,q=!1):q?h.elements.pop():h.elements[he]=c(Jt,h.elements[he])}return h}if(h instanceof hi){var Ue=[];return h.properties.forEach(function(de){var Je=!1;if(de.key instanceof M&&(de.key=de.key.transform(Ce),Je=de.key.has_side_effects(e)),(Je||h.rest)&&Oe(de.value))de.value=de.value.transform(Ce),Ue.push(de);else{var Cn=de.value.transform(Q);!Cn&&h.rest&&(de.value instanceof At?Cn=c(At,de.value,{elements:[]}):Cn=c(hi,de.value,{properties:[]})),Cn&&(de.value=Cn,Ue.push(de))}}),h.properties=Ue,h}if(h instanceof et)return kn(h)}),Ce=new ei(function(h,q,he){var se=Ce.parent();if(i){var Ue=[],de=f(h,Ue);if(de){var Je;if(te(de,h)&&(h instanceof ze&&(Je=C(h),h.write_only===!0&&(Je=Je.drop_side_effect_free(e))),Je||(Je=c(dn,h,{value:0}))),Je){if(Ue.assign){var Cn=Ue.assign.drop_side_effect_free(e);Cn&&(Cn.write_only=!0,Ue.unshift(Cn))}switch((!(se instanceof Ze)||se.tail_node()===h||Je.has_side_effects(e))&&Ue.push(Je),Ue.length){case 0:return Ct.skip;case 1:return xt(se,h,Ue[0].transform(Ce));default:return pe(h,Ue.map(function(je){return je.transform(Ce)}))}}}else if(h instanceof Cr&&h.expression instanceof X&&P(h.expression.definition(),h)<0)return c(We,h,{operator:"+",expression:h.expression})}if(h instanceof ae&&h.operator=="instanceof"){var de=h.right;if(!(de instanceof X)||de.definition().id in k)return;var Le=h.left.drop_side_effect_free(e),Je=c(Fr,h).optimize(e);return Le?pe(h,[Le,Je]):Je}if(h instanceof hn)return fe.push(h),h.args=h.args.map(function(je){return je.transform(Ce)}),h.expression=h.expression.transform(Ce),h;if(ee!==n)return;if(r&&h!==n&&h instanceof Si){var En=h.name.definition();if(!(En.id in k)){fn(h.name,"Dropping unused class {name}"),En.eliminated++,q(h,Ce);var Te=Rr(h,!0);return se instanceof ji?Te:(Te=Te.drop_side_effect_free(e,!0),Te?c(He,h,{body:Te}):he?Ct.skip:c(Qn,h))}}if(h instanceof xr&&h.name&&$e(h.name.definition())&&(h.name=null),h instanceof yn){if(r&&h!==n&&h instanceof kt){var En=h.name.definition();if(!(En.id in k))return fn(h.name,"Dropping unused function {name}"),En.eliminated++,se instanceof ji?(Rn(),si(h,!0)):he?Ct.skip:c(Qn,h)}if(Rn(),h instanceof St&&h.name&&$e(h.name.definition())&&(h.name=null),!(h instanceof Mi)){var pt,Ot,Bn=e.drop_fargs(h,se);if(Bn&&se instanceof hn&&se.expression===h)for(pt=se.args,Ot=0;Ot<pt.length&&!(pt[Ot]instanceof On);Ot++);var ct=h.argnames,Zn=h.rest,Qt=!1,Dt=!1;if(Zn){if(Dt=!0,!pt||Ot<ct.length||Zn instanceof $n)Zn=Zn.transform(Q);else{var Te=Ne(Zn,c(xn,se,{elements:pt.slice(ct.length)}),kn,!h.uses_arguments,Zn);Zn=Te.name,pt.length=ct.length,Te.value.elements.length&&[].push.apply(pt,Te.value.elements)}Zn instanceof Nn&&!Zn.rest&&(Zn instanceof At?Zn.elements.length==0&&(Zn=null):Zn.properties.length==0&&(Zn=null)),h.rest=Zn,Zn&&(Bn=!1,Qt=!0)}for(var bi=Bn?-1:h.length(),oi=pt&&!h.uses_arguments&&se!==e.parent(),be=ct.length;--be>=0;){var de=ct[be];if(de instanceof $n){var En=de.definition();En.id in k?(Bn=!1,P(En,de)<0&&(de.unused=null)):(Bn&&(fn(de,"Dropping unused function argument {name}"),ct.pop(),En.eliminated++),de.unused=!0)}else{Dt=!0;var Me;if(!pt||Ot<be)Me=de.transform(Q);else{var Te=Ne(de,pt[be],kn,oi,de);Me=Te.name,Te.value&&(pt[be]=Te.value)}Me?(Bn=!1,ct[be]=Me,Qt||(Qt=!(Me instanceof $n))):Bn?(p(de,"Dropping unused default argument {name}"),ct.pop()):be>bi?(p(de,"Dropping unused default argument assignment {name}"),de.name instanceof $n?de.name.unused=!0:Qt=!0,ct[be]=de.name):(p(de,"Dropping unused default argument value {name}"),ct[be]=de=de.clone(),de.value=c(dn,de,{value:0}),Qt=!0)}}Dt&&!Qt&&h.uses_arguments&&!Ce.has_directive("use strict")&&(h.rest=c(At,h,{elements:[]})),le.push(h)}return h}if(h instanceof er&&h.argname instanceof Nn&&h.argname.transform(Q),h instanceof gt&&!(se instanceof Xt&&se.init===h)){var sn=[],xe=[],nn=[],pn=[],Ye=0,oe=h instanceof bt;switch(h.definitions.forEach(function(je){je.value&&(je.value=je.value.transform(Ce));var Tn=je.value;if(je.name instanceof Nn){var Pi=Ne(je.name,Tn,function($t){return!i||$t.definition().id in k||Ut($t)||oe&&!Be($t)?$t:null},!0);Pi.name?(je=c(Vn,je,{name:Pi.name,value:Tn=Pi.value}),qa()):Pi.value&&pn.push(Pi.value);return}var zt=je.name.definition(),Ln=oe?Be(je.name):Kt(zt);if(!Ln||!i||zt.id in k){var ni;Tn&&((ni=P(zt,je))<0||Hf(Tn.tail_node()))&&(je=je.clone(),Tn=Tn.drop_side_effect_free(e),Tn&&M.warn("Side effects in definition of variable {name} [{start}]",je.name),h instanceof Er?je.value=Tn||c(dn,je,{value:0}):(je.value=null,Tn&&pn.push(Tn)),Tn=null,ni>=0&&(o[zt.id][ni]=je));var Lt,yi;if(!Tn&&!(h instanceof Wi))se instanceof Ti?qa():Ln&&D[zt.id]>1?(M.info("Dropping declaration of variable {name} [{start}]",je.name),D[zt.id]--,zt.eliminated++):xe.push(je);else if(e.option("functions")&&!e.option("ie")&&Ln&&Tn&&D[zt.id]==1&&zt.assignments==0&&(yi=Tn.tail_node())instanceof St&&!J(zt)&&!qt(yi)&&Yf(yi,zt.references)&&Bf(yi)&&(Lt=di(yi,je.name.name))!==!1){M.warn("Declaring {name} as function [{start}]",je.name);var Ft;switch(yi.CTOR){case rr:Ft=Ur;break;case Qi:Ft=zr;break;case Tt:Ft=Ri;break;case br:Ft=Xr;break}var pf=c(Ft,yi);pf.name=c(nr,je.name);var Kn=je.name.scope.resolve().def_function(pf.name);Lt&&Lt.forEach(function($t){$t.name=Kn.name,$t.thedef=Kn,$t.reference()}),sn.push(pf),Tn!==yi&&[].push.apply(pn,Tn.expressions.slice(0,-1)),zt.eliminated++}else Ln&&D[zt.id]>1&&!(se instanceof Ti)&&zt.orig.indexOf(je.name)>zt.eliminated&&(D[zt.id]--,Ye++),qa()}else Ut(je.name)?(Tn=Tn&&Tn.drop_side_effect_free(e),Tn&&pn.push(Tn),D[zt.id]>1?(M.warn("Dropping duplicated declaration of variable {name} [{start}]",je.name),D[zt.id]--,zt.eliminated++):(je.value=null,xe.push(je))):(Tn=Tn&&Tn.drop_side_effect_free(e),Tn?(M.warn("Side effects in initialization of unused variable {name} [{start}]",je.name),pn.push(Tn)):fn(je.name,"Dropping unused variable {name}"),zt.eliminated++);function Hf($t){return $t instanceof X&&$t.definition()===zt}function Yf($t,Hr){return Hr.length==0?$t===je.name.fixed_value():Ve(Hr,function(Yr){return $t===Yr.fixed_value()})}function Bf($t){return!oe||e.has_directive("use strict")||!($t instanceof Tt)?se instanceof rn:se instanceof ii||se instanceof jt&&se.init===h||se instanceof Un}function di($t,Hr){if(!$t.name)return null;var Yr=$t.name.definition();if(Yr.orig.length>1)return null;if(Yr.assignments>0)return!1;if(Yr.name==Hr)return Yr;if(e.option("keep_fnames"))return!1;var Kr;switch(Hr){case"await":Kr=wi;break;case"yield":Kr=Ui;break}return Ve(Yr.references,function(Qf){var Br=Qf.scope;if(Br.find_variable(Hr)!==zt)return!1;if(Kr)do if(Br=Br.resolve(),Kr(Br))return!1;while(Br!==$t&&(Br=Br.parent_scope));return!0})&&Yr}function Ut($t){var Hr=$t.definition();return Hr.orig[0]instanceof tr&&Hr.scope.resolve()===$t.scope.resolve()}function qa(){pn.length>0&&(nn.length==0?sn.push(c(He,h,{body:pe(h,pn)})):Tn?(pn.push(Tn),je.value=pe(Tn,pn)):je.value=c(We,je,{operator:"void",expression:pe(je,pn)}),pn=[]),nn.push(je)}}),xe.length){case 0:if(nn.length==0)break;if(nn.length==Ye){[].unshift.apply(pn,nn.map(function(je){M.info("Dropping duplicated definition of variable {name} [{start}]",je.name);var Tn=je.name.definition(),Pi=c(X,je.name);Tn.references.push(Pi);var zt=c(ze,je,{operator:"=",left:Pi,right:je.value}),Ln=P(Tn,je);return Ln>=0&&(o[Tn.id][Ln]=zt),Tn.assignments++,Tn.eliminated++,zt}));break}case 1:if(nn.length==0){var me=xe[0].name.definition().id;if(me in y){h.definitions=xe,y[me].init=h;break}}default:var Ie;nn.length>0&&(Ie=nn[0].value)instanceof Ze&&(nn[0].value=Ie.tail_node(),sn.push(c(He,h,{body:pe(Ie,Ie.expressions.slice(0,-1))}))),h.definitions=xe.concat(nn),sn.push(h)}return pn.length>0&&sn.push(c(He,h,{body:pe(h,pn)})),S(sn,h,he)}if(h instanceof ze){if(q(h,Ce),!(h.left instanceof Nn))return h;var Te=Ne(h.left,h.right,function(Tn){return Tn},h.write_only===!0);return Te.name?c(ze,h,{operator:h.operator,left:Te.name,right:Te.value}):Te.value?Te.value:se instanceof Ze&&se.tail_node()!==h?Ct.skip:c(dn,h,{value:0})}if(h instanceof ri&&h.body instanceof jt){if(q(h,Ce),h.body instanceof Ge){var cn=h.body;return h.body=cn.body.pop(),cn.body.push(h),he?Ct.splice(cn.body):cn}return h}if(h instanceof rn)return Rn(),h;if(h instanceof ur)return!e.option("imports")||h.definition().id in k?h:he?Ct.skip:null;function Rn(){var je=ee;ee=h,q(h,Ce),ee=je}},function(h,q){if(h instanceof Ge)return Ji(h,Ce.parent(),q);if(h instanceof Ti){var he=h.body;return he instanceof Ge?(h.body=he.body.pop(),he.body.push(h),q?Ct.splice(he.body):he):void 0}if(h instanceof jt)return Jr(h,q);if(h instanceof ba){if(!i||!e.option("loops")||!_n(h.body))return;var se=ne(h);if(!se)return;var Ue=se.definition();if(Ue.id in k)return;fn(se,"Dropping unused loop variable {name}"),y[Ue.id]===h&&delete y[Ue.id];var de=[],Je=h.object.drop_side_effect_free(e);return Je&&(M.warn("Side effects in object of for-in loop [{start}]",Je),de.push(c(He,h,{body:Je}))),h.init instanceof gt&&Ue.orig[0]instanceof tr&&de.push(h.init),S(de,h,q)}if(h instanceof Fa)return h.properties&&h.properties.length==0&&(h.properties=null),h;if(h instanceof Ze)return h.expressions.length>1?void 0:xt(Ce.parent(),h,h.expressions[0])});Ce.push(e.parent()),Ce.directives=Object.create(e.directives),n.transform(Ce),n instanceof yn&&n.body.length==1&&n.body[0]instanceof ci&&n.body[0].value=="use strict"&&(n.body.length=0),fe.forEach(function(h){pa(h,e,le)});function fn(h,q){M[h.definition().references.length>0?"info":"warn"](q+" [{start}]",h)}function p(h,q){h.name instanceof $n?fn(h.name,q):M.info(q+" [{start}]",h)}function R(h){return h[h instanceof ze?"right":"value"]}function S(h,q,he){switch(h.length){case 0:return he?Ct.skip:c(Qn,q);case 1:return h[0];default:return he?Ct.splice(h):c(Ge,q,{body:h})}}function b(h,q){return h.scope.resolve()!==n?!1:((!h.fixed||!q.fixed)&&(o[h.id]=!1),o[h.id]!==!1)}function x(h,q){o[h.id]||(o[h.id]=[]),q.fixed.assigns&&zi(o[h.id],q.fixed.assigns)}function P(h,q){var he=o[h.id];return he&&he.indexOf(q)}function U(h){z[h.id]>1&&!(h.id in k)&&(k[h.id]=!0,T.push(h)),z[h.id]=0}function B(h,q,he){h.id in k||(q&&he?(k[h.id]=q,T.push(h)):($[h.id]=q,N[h.id]=he))}function te(h,q){var he=h.definition(),se=k[he.id];return se?q[q instanceof ze?"left":"expression"]!==h?!1:se===h&&he.references.length-he.replaced==1||P(he,q)<0:!0}function C(h){var q=h.right;if(!h.write_only||!(q instanceof ae&&it[q.operator])||!(q.left instanceof X)||!(h.left instanceof X))return q;var he=h.left.definition();return q.left.definition()!==he||q.right.has_side_effects(e)?q:(b(he,q.left)&&x(he,q.left),q.right)}function ne(h){var q=h.init;if(q instanceof gt)return q=q.definitions[0].name,q instanceof et&&q;for(;q instanceof on;)q=q.expression.tail_node();if(q instanceof X)return q}function Pe(h,q,he){if(h instanceof ze&&h.left instanceof X){var se=h.left.definition();se.scope.resolve()===n&&W.add(se.id,h)}if(h instanceof X&&h.in_arg&&(D[h.definition().id]=0),h instanceof at&&h.expression instanceof X){var se=h.expression.definition();se.scope.resolve()===n&&W.add(se.id,h)}var Ue=[],de=f(h,Ue);if(de){var Je=de.definition();if(Je.scope.resolve()!==n&&n.variables.get(de.name)!==Je||J(Je)&&!Ve(n.argnames,function(Qt){return!Qt.match_symbol(function(Dt){if(Dt instanceof $n){var bi=Dt.definition();return bi.references.length>bi.replaced}},!0)})||h.write_only==="p"&&h.right.may_throw_on_access(e,!0))return;var Cn=Ue.assign;if(Cn&&(j.add(Je.id,Cn.left),Cn.write_only=!0,Cn.walk(Se)),Ue.forEach(function(Qt){Qt.walk(Se)}),h instanceof ze){var Le=de.fixed_value(),En=C(h),Te=Le&&Le.is_constant(),pt=!1;he&&h.write_only===!0&&(Te||h.left===de||En.equals(de))&&!En.has_side_effects(e)?j.add(Je.id,En):(En.walk(Se),pt=En.tail_node().operator=="="),h.left===de?(!h.write_only||pt)&&B(Je,de,N[Je.id]):Te||B(Je,$[Je.id],!0)}return b(Je,de)&&Gi(de,h)!==de&&x(Je,de),U(Je),!0}if(h instanceof ae){if(h.operator!="instanceof")return;var de=h.right;if(!(de instanceof X))return;var Ot=de.definition().id;return z[Ot]?(h.left.walk(Se),z[Ot]++,!0):void 0}if(h instanceof ba){if(h.init instanceof X&&ee===n){var Ot=h.init.definition().id;Ot in y||(y[Ot]=h)}if(!i||!e.option("loops")||!_n(h.body)||h.init.has_side_effects(e))return;var de=ne(h);if(!de)return;var se=de.definition();if(se.scope.resolve()!==n){var Bn=v(de.name);if(Bn===se||Bn&&Bn.redefined()===se)return}return h.object.walk(Se),!0}if(h instanceof X){var Je=h.definition();if(Je.id in k||(k[Je.id]=!0,T.push(Je)),V(Je.scope,h.scope)){var ct=Je.redefined();ct&&!(ct.id in k)&&(k[ct.id]=!0,T.push(ct))}return b(Je,h)&&x(Je,h),!0}if(h instanceof rn){var Zn=ee;return ee=h,q(),ee=Zn,!0}}function Oe(h){return(h instanceof Fn?h.name:h)instanceof et}function kn(h){return h.definition().id in k?h:(h instanceof $n&&(h.unused=!0),null)}function Fe(h,q){q.value=q.value.transform(Ce);var he=q.name.transform(h);if(!he){if(q.name instanceof Nn)return null;var se=q.value.drop_side_effect_free(e);if(!se)return null;fn(q.name,"Side effects in default value of unused variable {name}"),q=q.clone(),q.name.unused=null,q.value=se}return q}function Ne(h,q,he,se,Ue){var de=!0,Je=new ei(function(Te){if(Te instanceof Fn)if(e.option("default_values")&&q&&q.is_defined(e))Te===Ue?Ue=Te=Te.name:Te=Te.name;else{var pt=se;se=!1;var Ot=Fe(Je,Te);return se=pt,!Ot&&se&&q&&(q=q.drop_side_effect_free(e)),Ot}if(Te instanceof At){var pt=se,Bn=de,ct=q;q instanceof X&&(se=!1,q=q.fixed_value());var Zn,Qt,Dt;if(q instanceof xn){if(Qt=!0,Dt=q.elements,Bn)for(Zn=Dt.length;--Zn>=0&&!Dt[Zn].has_side_effects(e););}else Qt=q&&q.is_string(e),Dt=!1,Zn=Te.elements.length;var bi=[],oi=se&&[],be=0;if(Te.elements.forEach(function(je,Tn){Bn&&(de=Tn>=Zn),q=Dt&&Dt[Tn],q instanceof Jt?q=null:q instanceof On&&(se&&(oi.length=be,hr(ct,oi),[].push.apply(oi,Dt.slice(Tn)),ct.elements=oi),q=Dt=!1),je=je.transform(Je),je&&(bi[be]=je),se&&q&&(oi[be]=q),(je||q||!se||!Dt)&&be++}),q=Dt&&c(xn,ct,{elements:Dt.slice(Te.elements.length)}),Te.rest){var Me=se;se=!1,Te.rest=Te.rest.transform(e.option("rests")?Je:Ce),se=Me,Te.rest&&(bi.length=be)}if(se&&(q&&!Te.rest&&(q=q.drop_side_effect_free(e)),q instanceof xn?q=q.elements:q instanceof Ze?q=q.expressions:q&&(q=[q]),q&&q.length&&(oi.length=be,[].push.apply(oi,q))),q=ct,de=Bn,se=pt,Dt&&oi&&(hr(q,oi),q=q.clone(),q.elements=oi),!Qt)bi.length=Te.elements.length;else if(!Te.rest)e:switch(bi.length){case 0:if(Te===Ue)break;return se&&(q=q.drop_side_effect_free(e)),null;default:if(!se||!de||Te===Ue)break;for(var be=bi.length,sn;--be>=0;){var xe=bi[be];if(xe){sn=xe;break}}if(be<0)break;for(var nn=be;--nn>=0;)if(bi[nn])break e;if(sn.has_side_effects(e)||q.has_side_effects(e)&&sn.match_symbol(function(Tn){return Tn instanceof on}))break;return q=c(ht,Te,{expression:q,property:c(dn,Te,{value:be})}),sn}return hr(Te,bi),Te.elements=bi,Te}if(Te instanceof hi){var pt=se,Bn=de,ct=q;q instanceof X&&(se=!1,q=q.fixed_value());var Zn,pn,Ye,Dt;q instanceof ft?(Zn=-1,pn=[],Ye=new Jn,Dt=q.properties.map(function(Ln,ni){if(Bn&&Ln.has_side_effects(e)&&(Zn=ni),Ln=Ln.clone(),Ln instanceof On)Ye=!1;else{var Lt=Ln.key;Lt instanceof M&&(Lt=Lt.evaluate(e,!0)),Lt instanceof M?Ye=!1:Ye&&!(Ln instanceof ea)&&Ye.set(Lt,Ln),pn[ni]=Lt}return Ln})):Zn=Te.properties.length,Te.rest&&(q=!1,Te.rest=Te.rest.transform(e.option("rests")?Je:Ce));var oe=new Jn,me=se&&new Jn,Ie=[];if(Te.properties.map(function(Ln){var ni=Ln.key;return ni instanceof M&&(Ln.key=ni=ni.transform(Ce),ni=ni.evaluate(e,!0)),ni instanceof M?me=!1:oe.set(ni,!oe.has(ni)),ni}).forEach(function(Ln,ni){var Lt=Te.properties[ni],yi;if(Bn&&(de=ni>=Zn),Ln instanceof M)se=!1,q=!1,yi=Lt.value.transform(Je)||En(Lt.value);else{se=me&&oe.get(Ln);var Ft=Ye&&Ye.get(Ln);Ft?(q=Ft.value,q instanceof Mi&&(q=!1)):q=!1,yi=Lt.value.transform(Je),yi?me&&me.set(Ln,!1):((Te.rest||Cn(Lt))&&(yi=En(Lt.value)),me&&!me.has(Ln)&&(Ft?(me.set(Ln,Ft),q===null&&Ye.set(Ln,Cn(Ft)&&c(fi,Ft,{key:Ft.key,value:c(dn,Ft,{value:0})}))):me.set(Ln,!0))),q&&(Ft.value=q)}yi&&(Lt.value=yi,Ie.push(Lt))}),q=ct,de=Bn,se=pt,me&&pn&&(q=q.clone(),q.properties=Ct(Dt,function(Ln,ni){if(Ln instanceof On)return Ln;var Lt=pn[ni];if(Lt instanceof M||Lt==="__proto__")return Ln;if(me.has(Lt)){var yi=me.get(Lt);if(!yi)return Ln;if(yi===Ln)return Ye.get(Lt)||Ct.skip}else if(Te.rest)return Ln;var Ft=Ln.value.drop_side_effect_free(e);return Ft?(Ln.value=Ft,Ln):Cn(Ln)?c(fi,Ln,{key:Ln.key,value:c(dn,Ln,{value:0})}):Ct.skip})),q&&!Te.rest)switch(Ie.length){case 0:if(Te===Ue||q.may_throw_on_access(e,!0))break;return se&&(q=q.drop_side_effect_free(e)),null;case 1:if(!se||!de||Te===Ue)break;var cn=Ie[0];if(cn.key instanceof M||cn.value.has_side_effects(e)||q.has_side_effects(e)&&cn.value.match_symbol(function(Ln){return Ln instanceof on}))break;return q=xa(cn.key)?c(Mn,Te,{expression:q,property:cn.key}):c(ht,Te,{expression:q,property:_i(cn.key,cn)}),cn.value}return Te.properties=Ie,Te}return Te instanceof Jt?Te=null:Te=he(Te),!Te&&se&&q&&(q=q.drop_side_effect_free(e)),Te});return{name:h.transform(Je),value:q};function Cn(Te){return Te.key instanceof M&&Te.key.has_side_effects(e)}function Le(Te){if(Te instanceof ze)Te.write_only=!1,Le(Te.right);else if(Te instanceof ae){if(!it[Te.operator])return;Le(Te.left),Le(Te.right)}else Te instanceof bn?(Le(Te.consequent),Le(Te.alternative)):Te instanceof Ze?Le(Te.tail_node()):Te instanceof at&&(Te.write_only=!1)}function En(Te){return Te instanceof Fn?En(Te.name):Te instanceof Nn?(q===null?q=c(dn,Te,{value:0}):q&&(q.may_throw_on_access(e,!0)?q=c(xn,Te,{elements:q instanceof Ze?q.expressions:[q]}):Le(q)),c(hi,Te,{properties:[]})):(Te.unused=null,Te)}}}),rn.DEFMETHOD("hoist_declarations",function(e){if(!e.has_directive("use asm")){var n=e.option("hoist_funs"),r=e.option("hoist_vars"),i=this;if(r){var f=0;i.walk(new un(function(z){if(f>1||z instanceof Ti||z instanceof rn&&z!==i)return!0;if(z instanceof bt)return f++,!0})),f<=1&&(r=!1)}if(!(!n&&!r)){var o=new Jn,g=[],v=[],y=new Jn,T=new ei(function(z,$,N){if(z!==i){if(z instanceof ci)return g.push(z),N?Ct.skip:c(Qn,z);if(z instanceof kt){if(!n)return z;var D=T.parent();return D instanceof Ti||D instanceof ji||D!==i&&e.has_directive("use strict")?z:(v.push(z),N?Ct.skip:c(Qn,z))}if(z instanceof bt){if(!r)return z;var D=T.parent();if(D instanceof Ti||!Ve(z.definitions,function(Se){var $e=Se.name;return $e instanceof vi&&!o.has($e.name)&&i.find_variable($e.name)===$e.definition()}))return z;z.definitions.forEach(function(Se){var $e=Se.name.name;y.has($e)||y.set($e,Se)});var W=z.to_assignments();if(D instanceof Xt&&D.init===z){if(W)return W;var j=z.definitions[0].name;return c(X,j)}return D instanceof jt&&D.init===z?W:W?c(He,z,{body:W}):N?Ct.skip:c(Qn,z)}if(z instanceof rn)return z;if(z instanceof xi)return o.set(z.name,!0),z}});if(i.transform(T),y.size()>0){var k=[];i instanceof yn&&i.each_argname(function(z){Ve(z.definition().references,function($){return!$.in_arg})&&y.del(z.name)}),y.each(function(z){var $=z.name;z=z.clone(),z.name=$.clone(),z.value=null,k.push(z);var N=$.definition().orig;N.splice(N.indexOf($),0,z.name)}),k.length>0&&v.push(c(bt,i,{definitions:k}))}i.body=g.concat(v,i.body)}}});function ui(e,n){e.walk(new un(function(r){if(r instanceof tt)return n(r),!0;if(r instanceof rn&&r!==e)return!0}))}function va(e){var n=Object.create(null);return ui(e,function(r){var i=r.value;if(i&&(i=i.tail_node()),i instanceof X){var f=i.definition().id;n[f]=(n[f]||0)+1}}),n}function Cf(e,n,r){if(r.exposed(e))return!1;switch(e.references.length-e.replaced-(n[e.id]||0)){case e.drop_return:return"d";case e.bool_return:return!0}}function A(e,n){ui(e,function(r){r.in_bool=!0;var i=r.value;if(i){var f=zn(n,i);f?f instanceof M||(i=i.drop_side_effect_free(n),r.value=i?pe(r.value,[i,c(dn,r.value,{value:1})]):c(dn,r.value,{value:1})):(i=i.drop_side_effect_free(n),r.value=i?pe(r.value,[i,c(dn,r.value,{value:0})]):null)}})}rn.DEFMETHOD("process_returns",Gt),Ri.DEFMETHOD("process_returns",function(e){if(e.option("booleans")&&!(e.parent()instanceof ji))switch(Cf(this.name.definition(),va(this),e)){case"d":Z(e,this,!0);break;case!0:A(this,e);break}}),Tt.DEFMETHOD("process_returns",function(e){if(!e.option("booleans"))return;var n=!0,r=va(this);if(this.name&&!k(this.name.definition()))return;var i=e.parent();if(i instanceof ze){if(i.operator!="=")return;var f=i.left;if(!(f instanceof X)||!k(f.definition()))return}else if(i instanceof hn&&i.expression!==this){var o=i.expression;if(o instanceof X&&(o=o.fixed_value()),!(o instanceof yn)||o.uses_arguments||o.pinned())return;for(var g=i.args,f,v=0;v<g.length;v++){var y=g[v];if(y===this){if(f=o.argnames[v],!f&&o.rest)return;break}if(y instanceof On)return}if(f instanceof Fn&&(f=f.name),f instanceof $n&&!k(f.definition()))return}else if(i.TYPE=="Call"){e.pop();var T=e.in_boolean_context();switch(e.push(this),T){case!0:n=!1;case"d":break;default:return}}else return;n?Z(e,this,!0):A(this,e);function k(z){switch(Cf(z,r,e)){case!0:n=!1;case"d":return!0}}}),li.DEFMETHOD("var_names",function(){var e=this._var_names;return e||(this._var_names=e=new Jn,this.enclosed.forEach(function(n){e.set(n.name,!0)}),this.variables.each(function(n,r){e.set(r,!0)})),e}),rn.DEFMETHOD("make_var",function(e,n,r){var i=[this];n instanceof et&&n.definition().references.forEach(function(y){var T=y.scope;do{if(!zi(i,T))return;T=T.parent_scope}while(T&&T!==this)}),r=r.replace(/^[^a-z_$]|[^a-z0-9_$]/gi,"_");for(var f=r,o=0;!Ve(i,function(y){return!y.var_names().has(f)});o++)f=r+"$"+o;var g=c(e,n,{name:f,scope:this}),v=this.def_variable(g);return i.forEach(function(y){y.enclosed.push(v),y.var_names().set(f,!0)}),g}),rn.DEFMETHOD("hoist_properties",function(e){if(!e.option("hoist_props")||e.has_directive("use asm"))return;var n=this;if(qt(n)&&n.value)return;var r=n instanceof Et&&e.top_retain||An,i=Object.create(null),f=new ei(function(g,v){if(g instanceof ze){if(g.operator!="="||!g.write_only||!o(g.left,g.right,1))return;v(g,f);var y=new Jn,T=[],k=[];return g.right.properties.forEach(function(W){var j=D(vi,g.left,W.key);k.push(c(Vn,g,{name:j,value:null}));var ee=c(X,g,{name:j.name,scope:n,thedef:j.definition()});ee.reference(),T.push(c(ze,g,{operator:"=",left:ee,right:W.value}))}),y.value=g.right,i[g.left.definition().id]=y,n.body.splice(n.body.indexOf(f.stack[1])+1,0,c(bt,g,{definitions:k})),pe(g,T)}if(g instanceof rn){if(g===n)return;var z=f.parent();return z.TYPE=="Call"&&z.expression===g?void 0:g}if(g instanceof Vn){if(!o(g.name,g.value,0))return;v(g,f);var y=new Jn,$=[],N=g.clone();return N.value=g.name instanceof xi?c(dn,g,{value:0}):null,$.push(N),g.value.properties.forEach(function(j){$.push(c(Vn,g,{name:D(g.name.CTOR,g.name,j.key),value:j.value}))}),y.value=g.value,i[g.name.definition().id]=y,Ct.splice($)}function D(W,j,ee){var Se=n.make_var(W,j,j.name+"_"+ee);return y.set(ee,Se.definition()),Se}});n.transform(f),n.transform(new ei(function(g,v){if(g instanceof on){if(!(g.expression instanceof X))return;var y=i[g.expression.definition().id];if(!y||g.expression.fixed_value()!==y.value)return;var T=y.get(g.get_property()),k=c(X,g,{name:T.name,scope:g.expression.scope,thedef:T});return k.reference(),k}if(g instanceof X){var y=i[g.definition().id];return!y||g.fixed_value()!==y.value?void 0:c(ft,g,{properties:[]})}}));function o(g,v,y){if(g instanceof Ht){var T=g.definition();if(T.assignments==y&&T.references.length-T.replaced!=y&&!T.single_use&&n.find_variable(g.name)===T&&!r(T)&&g.fixed_value()===v){var k=g.fixed||T.fixed;if(!k.direct_access&&!(k.escaped&&k.escaped.depth==1))return v instanceof ft&&v.properties.length>0&&Be(g,e)&&Ve(v.properties,function(z){return Rf(z)&&z.key!=="__proto__"})}}}});function K(e,n){if(!e.name||!n.option("ie"))return!0;var r=e.name.definition();return n.exposed(r)?!1:Ve(r.references,function(i){return!(i instanceof X)})}function Z(e,n,r){if(n instanceof yn){var i=qt(n),f=wi(n),o=!1,g=!1;if(i&&e.option("arrows")){if(!n.value)g=!0;else if(!f||Oi(e,n.value)){var v=n.value.drop_side_effect_free(e);v!==n.value&&(o=!0,n.value=v)}}else if(!Ui(n))if(!r&&n.name){var y=n.name.definition();g=y.references.length==y.replaced}else g=!0;if(g&&(n.process_expression(!1,function($){var N=$.value;if(N){if(f&&!Oi(e,N))return $;N=N.drop_side_effect_free(e,!0)}return o=!0,N?c(He,$,{body:N}):c(Qn,$)}),ui(n,function($){var N=$.value;if(N){if(f&&!Oi(e,N))return;var D=N.drop_side_effect_free(e);D!==N&&(o=!0,D&&f&&!Oi(e,D)&&(D=D.negate(e)),$.value=D)}})),f&&e.option("awaits")){g&&n.process_expression("awaits",function($){var N=$.body;if(N instanceof wt){if(Oi(e,N.expression)){if(o=!0,N=N.expression.drop_side_effect_free(e,!0),!N)return c(Qn,$);$.body=N}}else if(N instanceof Ze){for(var D=N.expressions,W=D.length;--W>=0;){var j=D[W];if(!(j instanceof wt))break;var ee=j.expression;if(!Oi(e,ee)||(o=!0,D[W]=ee.drop_side_effect_free(e)))break}switch(W){case-1:return c(Qn,$);case 0:$.body=D[0];break;default:D.length=W+1;break}}return $});var T=!g&&n.name||i&&n.value&&!Oi(e,n.value),k=new un(function($){if(T)return!0;if(k.parent()===n&&$.may_throw(e)||$ instanceof wt||$ instanceof Na)return T=!0;if($ instanceof tt)return $.value&&!Oi(e,$.value)?T=!0:void 0;if($ instanceof rn&&$!==n)return!0});if(n.walk(k),!T){var z;switch(n.CTOR){case gr:z=Zi;break;case rr:z=Tt;break;case Qi:z=br;break}return c(z,n)}}return o&&n.clone()}}(function(e){function n(o,g,v,y){for(var T=o.length,k=[],z=!1,$=0;$<T;$++){var N=o[$],D;y&&N instanceof On?D=y(N,g,v):D=N.drop_side_effect_free(g,v),D!==N&&(z=!0),D&&(k.push(D),v=!1)}return k.length?z?k:o:null}function r(o,g,v){var y=o.expression;return y.is_string(g)?y.drop_side_effect_free(g,v):o}function i(o){return o instanceof On?c(xn,o,{elements:[o]}):o}e(M,Or),e(Mi,aa),e(xn,function(o,g){var v=n(this.elements,o,g,r);return v?v===this.elements&&Ve(v,function(y){return y instanceof On})?this:pe(this,v.map(i)):null}),e(ze,function(o){var g=this.left;if(g instanceof on){var v=g.expression;if(v.may_throw_on_access(o,!0))return this;if(o.has_directive("use strict")&&v.is_constant())return this}return g.has_side_effects(o)?this:it[this.operator.slice(0,-1)]?this:(this.write_only=!0,mf(g).is_constant_expression(o.find_parent(rn))?this.right.drop_side_effect_free(o):this)}),e(wt,function(o){if(!o.option("awaits"))return this;var g=this.expression;if(!Oi(o,g))return this;g instanceof We&&g.operator=="!"&&(g=g.expression);var v=g.drop_side_effect_free(o);if(v===g)return this;v?Oi(o,v)||(v=v.negate(o)):v=c(dn,g,{value:0});var y=this.clone();return y.expression=v,y}),e(ae,function(o,g){var v=this.left,y=this.right,T=this.operator;if(!Ja(this,o)){var W=v.drop_side_effect_free(o,g);if(W===v)return this;var k=this.clone();return W?k.left=W:T=="instanceof"&&!v.is_constant()?k.left=c(xn,v,{elements:[]}):k.left=c(dn,v,{value:0}),k}var z=y.drop_side_effect_free(o,g);if(!z)return v.drop_side_effect_free(o,g);if(it[T]&&z.has_side_effects(o)){var k=this;if(z!==y&&(k=k.clone(),k.right=z.drop_side_effect_free(o)),T=="??")return k;var $=k.clone();$.operator=T=="&&"?"||":"&&",$.left=v.negate(o,g);var N=$.right.tail_node();N instanceof ae&&$.operator==N.operator&&Pf($);var D=g?la:qi;return T=="&&"?D(k,$):D($,k)}var W=v.drop_side_effect_free(o,g);return W?(z=z.drop_side_effect_free(o),z?pe(this,[W,z]):W):z});function f(o,g){o.new=!0;var v=Ve(o.body,function(y){return!y.has_side_effects(g)})&&Ve(o.argnames,function(y){return!y.match_symbol(An)})&&!(o.rest&&o.rest.match_symbol(An));return o.new=!1,v}e(hn,function(o,g){var v=this;if(v.is_expr_pure(o)){v.pure&&M.warn("Dropping __PURE__ call [{start}]",v);var y=n(v.args,o,g,r);return y&&pe(v,y.map(i))}var T=v.expression;if(v.is_call_pure(o)){var k=v.args.slice();return k.unshift(T.expression),k=n(k,o,g,r),k&&pe(v,k.map(i))}if(o.option("yields")&&Ui(T)&&K(T,o)){var z=v.clone();return z.expression=c(Tt,T),z.expression.body=[],z}var $=Z(o,T);if($&&(v=v.clone(),v.expression=$,T._squeezed&&(v.expression._squeezed=!0)),v instanceof $i){var N=T;if(N instanceof X&&(N=N.fixed_value()),N instanceof yn){if(f(N,o)){var k=v.args.slice();return k.unshift(T),k=n(k,o,g,r),k&&pe(v,k.map(i))}N.contains_this()||(v=c(hn,v),v.expression=v.expression.clone(),v.args=v.args.slice())}}return v.call_only=!0,v}),e(xr,function(o,g){for(var v=this,y=[],T=[],k=0,z=v.properties,$=0;$<z.length;$++){var N=z[$];if(N.key instanceof M&&y.push(N.key),!!mn(N)){var D=N.value;if(D.has_side_effects(o)){if(D.contains_this())return v;N instanceof Mr?(k++,T.push(N)):T.push(D)}}}var W=v.extends;if(W&&(W instanceof X&&(W=W.fixed_value()),W=!O(W),W||y.unshift(v.extends)),y=n(y,o,g),y&&(g=!1),T=n(T,o,g),!y){if(!W&&!T&&!v.name)return null;y=[]}if(W||v.name||!o.has_directive("use strict")){var j=Rr(v);return W||(j.extends=null),j.properties=[],T?T.length==k?(y.length&&T.unshift(c(Wr,v,{key:pe(v,y),value:null})),j.properties=T):j.properties.push(c(Wr,v,{static:!0,key:y.length?pe(v,y):"c",value:ee()})):y.length&&j.properties.push(c(ya,v,{key:pe(v,y),value:c(Tt,v,{argnames:[],body:[]}).init_vars(j)})),j}return T&&y.push(c(hn,v,{expression:c(Zi,v,{argnames:[],body:[],value:ee()}).init_vars(v.parent_scope,v),args:[]})),pe(v,y);function ee(){return pe(v,T.map(function(Se){if(!(Se instanceof Mr))return Se;var $e=c(Zi,Se.value);return $e.argnames=[],c(hn,Se,{expression:$e,args:[]})}))}}),e(bn,function(o){var g=this.consequent.drop_side_effect_free(o),v=this.alternative.drop_side_effect_free(o);if(g===this.consequent&&v===this.alternative)return this;var y;o.option("ie")&&(y=[],g instanceof Tt&&(y.push(g),g=null),v instanceof Tt&&(y.push(v),v=null));var T;return g?v?(T=this.clone(),T.consequent=g,T.alternative=v):T=c(ae,this,{operator:"&&",left:this.condition,right:g}):T=v?c(ae,this,{operator:"||",left:this.condition,right:v}):this.condition.drop_side_effect_free(o),y?(T&&y.push(T),y.length==0?null:pe(this,y)):T}),e(st,aa),e(Mn,function(o,g){var v=this.expression;return v.may_throw_on_access(o)?this:v.drop_side_effect_free(o,g)}),e(Tt,function(o){return K(this,o)?null:this}),e(St,aa),e(ft,function(o,g){var v=[];this.properties.forEach(function(T){T instanceof On?v.push(T):(T.key instanceof M&&v.push(T.key),v.push(T.value))});var y=n(v,o,g,function(T,k,z){var $=T.expression;return $.safe_to_spread()?$.drop_side_effect_free(k,z):T});return y?y===v&&!Ve(y,function(T){return!(T instanceof On)})?this:pe(this,y.map(function(T){return T instanceof On?c(ft,T,{properties:[T]}):T})):null}),e(Vi,aa),e(Ze,function(o,g){var v=n(this.expressions,o,g);if(!v)return null;var y=v.length-1,T=v[y];if(o.option("awaits")&&y>0&&T instanceof wt&&T.expression.is_constant()){v=v.slice(0,-1),y--;var k=v[y];T.expression=Oi(o,k)?k:k.negate(o),v[y]=T}var z,$,N;return o.option("conditionals")&&y>0&&(z=v[y-1])instanceof ze&&z.operator=="="&&(N=z.left)instanceof X&&($=Xf(o,N.definition(),z.right,T))&&(z=z.clone(),z.right=$,v=v.slice(0,-2),v.push(z.drop_side_effect_free(o,g))),v===this.expressions?this:pe(this,v)}),e(ht,function(o,g){var v=this,y=v.expression;if(y.may_throw_on_access(o))return v;var T=v.property;return v.optional?(T=T.drop_side_effect_free(o),T?(v=v.clone(),v.property=T,v):y.drop_side_effect_free(o,g)):(y=y.drop_side_effect_free(o,g),y?(T=T.drop_side_effect_free(o),T?pe(v,[y,T]):y):T.drop_side_effect_free(o,g))}),e(X,function(o){return this.is_declared(o)&&Be(this,o)?null:this}),e(Yt,function(o,g){var v=this;if(v.is_expr_pure(o)){var y=v.expressions;return y.length==0?null:pe(v,y).drop_side_effect_free(o,g)}var T=v.tag,k=Z(o,T);return k&&(v=v.clone(),v.tag=k,T._squeezed&&(v.tag._squeezed=!0)),v}),e(at,function(o,g){var v=this.expression;if(Sa[this.operator])return this.write_only=!v.has_side_effects(o),this;if(this.operator=="typeof"&&v instanceof X&&Be(v,o))return null;var y=v.drop_side_effect_free(o,g);return g&&y&&l(y)?y===v&&this.operator=="!"?this:y.negate(o,g):y})})(function(e,n){e.DEFMETHOD("drop_side_effect_free",n)}),t(He,function(e,n){if(n.option("side_effects")){var r=e.body,i=r.drop_side_effect_free(n,!0);if(!i)return M.warn("Dropping side-effect-free statement [{start}]",e),c(Qn,e);if(i!==r)return c(He,e,{body:i})}return e}),t(fa,function(e,n){return n.option("loops")?c(jt,e).optimize(n):e});function _e(e,n,r){r||(r=$r);var i=!1,f=new un(function(o){if(i||o instanceof rn)return!0;if(o instanceof r&&f.loopcontrol_target(o)===e)return i=!0});return n instanceof ri&&f.push(n),f.push(e),e.body.walk(f),i}t(Lr,function(e,n){if(!n.option("loops"))return e;var r=zn(n,e.condition);if(!(r instanceof M)){if(r&&!_e(e,n.parent(),Zr))return c(jt,e,{body:c(Ge,e.body,{body:[e.body,c(He,e.condition,{body:e.condition})]})}).optimize(n);if(!_e(e,n.parent()))return c(Ge,e.body,{body:[e.body,c(He,e.condition,{body:e.condition})]}).optimize(n)}if(e.body instanceof Ge&&!_e(e,n.parent(),Zr)){for(var i=e.body.body,f=i.length;--f>=0;){var o=i[f];if(o instanceof Un&&!o.alternative&&o.body instanceof fr&&n.loopcontrol_target(o.body)===e){if(g(o.condition))break;e.condition=c(ae,e,{operator:"&&",left:o.condition.negate(n),right:e.condition}),i.splice(f,1)}else if(o instanceof He){if(g(o.body))break;e.condition=pe(e,[o.body,e.condition]),i.splice(f,1)}else if(!pi(o,!0))break}e.body=Ji(e.body,n.parent())}if(e.body instanceof Qn)return c(jt,e).optimize(n);if(e.body instanceof He)return c(jt,e,{condition:pe(e.condition,[e.body.body,e.condition]),body:c(Qn,e)}).optimize(n);return e;function g(v){var y=!1;return v.walk(new un(function(T){if(y)return!0;if(T instanceof X)return _r(T.definition(),e.enclosed)||(y=!0),!0})),y}});function an(e,n){var r=g(e.body);if(n.option("dead_code")&&(r instanceof fr||r instanceof Zr&&v(r)||r instanceof Mt)){var i=[];pr(e.init)?i.push(e.init):e.init&&i.push(c(He,e.init,{body:e.init}));var f=v(r)||r instanceof Mt;return e.condition&&f?i.push(c(Un,e,{condition:e.condition,body:r,alternative:null})):e.condition?i.push(c(He,e.condition,{body:e.condition})):f&&i.push(r),wr(n,e.body,i),c(Ge,e,{body:i})}if(r instanceof Un){var o=g(r.body);if(o instanceof fr&&!v(o)){e.condition?e.condition=c(ae,e.condition,{left:e.condition,operator:"&&",right:r.condition.negate(n)}):e.condition=r.condition.negate(n);var i=Qe(r.alternative);return wr(n,r.body,i),y(i)}if(o=g(r.alternative),o instanceof fr&&!v(o)){e.condition?e.condition=c(ae,e.condition,{left:e.condition,operator:"&&",right:r.condition}):e.condition=r.condition;var i=Qe(r.body);return wr(n,r.alternative,i),y(i)}}return e;function g(T){return T instanceof Ge?T.body[0]:T}function v(T){return n.loopcontrol_target(T)!==n.self()}function y(T){return e.body instanceof Ge?(e.body=e.body.clone(),e.body.body=T.concat(e.body.body.slice(1)),e.body=e.body.transform(n)):e.body=c(Ge,e.body,{body:T}).transform(n),an(e,n)}}t(jt,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var r=zn(n,e.condition);if(r)r instanceof M||(e.body=c(Ge,e.body,{body:[c(He,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){var i=[];return pr(e.init)?i.push(e.init):e.init&&i.push(c(He,e.init,{body:e.init})),i.push(c(He,e.condition,{body:e.condition})),wr(n,e.body,i),c(Ge,e,{body:i}).optimize(n)}}return an(e,n)}),t(Xt,function(e,n){if(n.option("varify")&&Ae(e.init)){var r=e.init.definitions[0].name;(n.option("module")||r instanceof Nn||r instanceof Nr)&&!r.match_symbol(function(i){if(i instanceof et){var f=i.definition();return!Ka(f)||Yi(n,f)}},!0)?e.init=jr(e.init,e.resolve()):e.init.can_letify(n,!0)&&(e.init=vr(e.init,e))}return e});function Ke(e,n,r){if(e instanceof Ze&&(e=e.tail_node()),!(e instanceof ae))return;if(!(e.left instanceof Dn)){switch(e.operator){case"&&":Ke(e.left,n),Ke(e.right,n);break;case"||":Ke($(e.left),r),Ke($(e.right),r);break}return}if(!(e.right instanceof We)||e.right.operator!="typeof")return;var i=e.right.expression;if(!Y(i))return;var f,o=e.left.value=="undefined";switch(e.operator){case"==":f=o?r:n;break;case"!=":f=o?n:r;break;default:return}if(!f)return;var g=!1,v=i.definition(),y,T=[],k=[],z=new un(function(N,D){if(g)return!0;if(N instanceof ze){var W=N.left;if(!(W instanceof X&&W.definition()===v))return;switch(N.right.walk(z),N.operator){case"=":case"&&=":g=!0}return!0}if(N instanceof hn){D(),y=N.expression.tail_node();var j;return y instanceof X&&(y=y.fixed_value(),j=T.length),y instanceof yn?zi(k,y)&&y.walk(z):g=!0,j>=0&&(T.length=j),!0}if(N instanceof ga){var j=T.length;return D(),g&&(T.length=j),!0}if(N instanceof jt){N.init&&N.init.walk(z);var j=T.length;return N.condition&&N.condition.walk(z),N.body.walk(z),N.step&&N.step.walk(z),g&&(T.length=j),!0}if(N instanceof Xt){N.object.walk(z);var j=T.length;return N.init.walk(z),N.body.walk(z),g&&(T.length=j),!0}if(N instanceof rn)return N===y?void 0:!0;if(N instanceof X)return N.definition()===v&&T.push(N),!0});f.walk(z),T.forEach(function(N){N.defined=!0});function $(N){if(N instanceof ae)switch(N.operator){case"==":return N=N.clone(),N.operator="!=",N;case"!=":return N=N.clone(),N.operator="==",N}}}function zn(e,n,r){if(n.truthy)return!0;if(!gi(n))return n.falsy&&!r?!1:n.is_truthy()?!0:n.evaluate(e,!0)}function Xn(e,n){var r,i=0,f=!1,o=e.self();if(!pr(o))for(;;){if(r=o,o=e.parent(i++),o instanceof ae)switch(r){case o.left:if(it[o.operator])continue;break;case o.right:if(v(o.left))switch(o.operator){case"&&":n[f?"falsy":"truthy"]=!0;break;case"||":case"??":n[f?"truthy":"falsy"]=!0;break}break}else if(o instanceof bn){var g=o.condition;if(g===r)continue;if(v(g))switch(r){case o.consequent:n[f?"falsy":"truthy"]=!0;break;case o.alternative:n[f?"truthy":"falsy"]=!0;break}}else{if(o instanceof Mt)break;if(o instanceof Un)break;if(o instanceof Ze){if(o.expressions[0]===r)continue}else if(o instanceof He)break}return}for(;;){if(r=o,o=e.parent(i++),o instanceof Ge){if(o.body[0]===r)continue}else if(o instanceof Un&&v(o.condition))switch(r){case o.body:n[f?"falsy":"truthy"]=!0;break;case o.alternative:n[f?"truthy":"falsy"]=!0;break}return}function v(y){return n.equals(y)?!0:!(y instanceof We)||y.operator!="!"||!n.equals(y.expression)?!1:(f=!0,!0)}}t(Un,function(e,n){if(_n(e.alternative)&&(e.alternative=null),!n.option("conditionals"))return e;if(n.option("booleans")&&!e.condition.has_side_effects(n)&&Xn(n,e.condition),n.option("dead_code")){var r=zn(n,e.condition);if(r){if(!(r instanceof M)){M.warn("Condition always true [{start}]",e.condition);var i=[c(He,e.condition,{body:e.condition}).transform(n),e.body];return e.alternative&&wr(n,e.alternative,i),c(Ge,e,{body:i}).optimize(n)}}else{M.warn("Condition always false [{start}]",e.condition);var i=[c(He,e.condition,{body:e.condition}).transform(n)];return wr(n,e.body,i),e.alternative&&i.push(e.alternative),c(Ge,e,{body:i}).optimize(n)}}var f=e.condition.negate(n),o=e.condition.print_to_string().length,g=f.print_to_string().length,v=g<o;if(e.alternative&&v){v=!1,e.condition=f;var y=e.body;e.body=e.alternative,e.alternative=_n(y)?null:y}var T=[],k=[],z=[],$=te(e.body,T,k,z),N=[],D=[],W=[],j=te(e.alternative,N,D,W);if($ instanceof Ge||j instanceof Ge){var i=[],ee=[];if($&&([].push.apply(i,T),[].push.apply(ee,k),$ instanceof Ge?e.body=$:$.length==0?e.body=c(Qn,e.body):e.body=c(He,e.body,{body:pe(e.body,$)}),z.forEach(ke)),j&&([].push.apply(i,N),[].push.apply(ee,D),j instanceof Ge?e.alternative=j:j.length==0?e.alternative=null:e.alternative=c(He,e.alternative,{body:pe(e.alternative,j)}),W.forEach(ke)),ee.length>0&&i.push(c(bt,e,{definitions:ee})),i.length>0)return i.push(e.transform(n)),c(Ge,e,{body:i}).optimize(n)}else if($&&j){var i=T.concat(N);return(k.length>0||D.length>0)&&i.push(c(bt,e,{definitions:k.concat(D)})),$.length==0?i.push(c(He,e.condition,{body:j.length>0?c(ae,e,{operator:"||",left:e.condition,right:pe(e.alternative,j)}).transform(n):e.condition.clone()}).optimize(n)):j.length==0?(o===g&&!v&&e.condition instanceof ae&&e.condition.operator=="||"&&(v=!0),i.push(c(He,e,{body:c(ae,e,{operator:v?"||":"&&",left:v?f:e.condition,right:pe(e.body,$)}).transform(n)}).optimize(n))):i.push(c(He,e,{body:c(bn,e,{condition:e.condition,consequent:pe(e.body,$),alternative:pe(e.alternative,j)})}).optimize(n)),z.forEach(ke),W.forEach(ke),c(Ge,e,{body:i}).optimize(n)}if(_n(e.body)&&(e=c(Un,e,{condition:f,body:e.alternative,alternative:null})),e.alternative instanceof Mt&&e.body.TYPE==e.alternative.TYPE){var Se=e.body.value,$e=e.alternative.value;if(!Se&&!$e)return c(Ge,e,{body:[c(He,e,{body:e.condition}),e.body]}).optimize(n);if(Se&&$e||!P()){var tn=c(e.body.CTOR,e,{value:c(bn,e,{condition:e.condition,consequent:Se||c(yt,e.body).transform(n),alternative:$e||c(yt,e.alternative).transform(n)})});return tn instanceof tt&&(tn.in_bool=e.body.in_bool||e.alternative.in_bool),tn}}if(e.body instanceof Un&&!e.body.alternative&&!e.alternative&&(e=c(Un,e,{condition:c(ae,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null})),Zt(e.body)&&e.alternative){var qe=e.alternative;return e.alternative=null,c(Ge,e,{body:[e,qe]}).optimize(n)}if(Zt(e.alternative)){var i=e.body;return e.body=e.alternative,e.condition=v?f:e.condition.negate(n),e.alternative=null,c(Ge,e,{body:[e,i]}).optimize(n)}if(e.alternative){for(var fe=x(e.body),le=U(fe),Q=x(e.alternative),Ce=U(Q),fn=[];le>=0&&Ce>=0;){var p=fe[le],R=Q[Ce];if(p.equals(R))fe.splice(le--,1),Q.splice(Ce--,1),fn.unshift(Yn(p,R));else{if(!(p instanceof He)||!(R instanceof He))break;var S=p.body.tail_node(),b=R.body.tail_node();if(!S.equals(b))break;le=B(fe,p.body,le),Ce=B(Q,R.body,Ce),fn.unshift(c(He,S,{body:Yn(S,b)}))}}if(fn.length>0)return e.body=fe.length>0?c(Ge,e,{body:fe}):c(Qn,e),e.alternative=Q.length>0?c(Ge,e,{body:Q}):null,fn.unshift(e),c(Ge,e,{body:fn}).optimize(n)}return n.option("typeofs")&&Ke(e.condition,e.body,e.alternative),e;function x(C){return C instanceof Ge?C.body:[C]}function P(){var C=!1,ne=0,Pe=n.self();do if(Pe instanceof er)n.parent(ne).bfinally&&(C=!0),ne++;else if(Pe instanceof sa)ne++;else{if(Pe instanceof rn)return C&&m(Pe);Pe instanceof ai&&Pe.bfinally&&(C=!0)}while(Pe=n.parent(ne++))}function U(C){for(var ne=C.length;--ne>=0&&pi(C[ne],!0););return ne}function B(C,ne,Pe){return ne instanceof Ze?C[Pe]=c(He,ne,{body:pe(ne,ne.expressions.slice(0,-1))}):C.splice(Pe--,1),Pe}function te(C,ne,Pe,Oe){if(C==null)return[];if(C instanceof Ge){for(var kn=[],Fe=0;Fe<C.body.length;Fe++){var Ne=C.body[Fe];if(!(Ne instanceof Qn)){if(Ne instanceof Mt){if(Fe==0)return;kn.length>0&&(Ne=Ne.clone(),kn.push(Ne.value||c(yt,Ne).transform(n)),Ne.value=pe(C,kn));var h=C.clone();return h.body=h.body.slice(Fe+1),h.body.unshift(Ne),h}if(Ne instanceof kt)ne.push(Ne);else if(Ne instanceof He){if(!n.option("sequences")&&kn.length>0)return;kn.push(Ne.body)}else if(Ne instanceof bt){if(!n.option("sequences")&&kn.length>0)return;Ne.remove_initializers(n,Pe),Ne.definitions.forEach(q)}else return}}return kn}if(C instanceof kt)return ne.push(C),[];if(C instanceof Qn)return[];if(C instanceof He)return[C.body];if(C instanceof bt){var kn=[];return C.remove_initializers(n,Pe),C.definitions.forEach(q),kn}function q(he){he.value&&kn.push(c(ze,he,{operator:"=",left:he.name.convert_symbol(X,function(se){Oe.push(se)}),right:he.value}))}}}),t(ki,function(e,n){if(!n.option("switches")||!n.option("dead_code"))return e;for(var r=[],i,f=[],o,g,v=[],y=0,T=e.body.length;y<T;y++){if(i=e.body[y],i instanceof Vr){var k=r[r.length-1];if(o||qe(i.body[0],n)&&(!k||Zt(k))){le(i,k);continue}else o=i}else{var z=i.expression,$=c(ae,e,{operator:"===",left:e.expression,right:z}).evaluate(n,!0);if(!$){z.has_side_effects(n)&&v.push(z),le(i,r[r.length-1]);continue}if(!($ instanceof M)){if(o){var N=r.indexOf(o);r.splice(N,1),le(o,r[N-1]),o=null}for(z.has_side_effects(n)?g=i:o=i=c(Vr,i);++y<T;)le(e.body[y],i)}}if(y+1>=T||Zt(i)){var k=r[r.length-1],D=i.body;if(Zt(k))switch(k.body.length-D.length){case 1:var W=k.body[k.body.length-1];if(!qe(W,n))break;D=D.concat(W);case 0:var j=c(Ge,k),ee=c(Ge,i,{body:D});j.equals(ee)&&(k.body=[])}}v.length&&(i instanceof Vr?r.push(c(sr,e,{expression:pe(e,v),body:[]})):(v.push(i.expression),i.expression=pe(e,v)),v=[]),r.push(i)}for(v.length&&!g&&r.push(c(sr,e,{expression:pe(e,v),body:[]}));i=r[r.length-1];){var W=i.body[i.body.length-1];if(qe(W,n)&&i.body.pop(),i===o){if(!vt(i))break}else{if(i.expression.has_side_effects(n))break;if(o){if(!vt(o)||r[r.length-2]!==o)break;o.body=o.body.concat(i.body),i.body=[]}else if(!vt(i))break}le(i),r.pop()===o&&(o=null)}if(!i)return f.push(c(He,e.expression,{body:e.expression})),v.length&&f.push(c(He,e,{body:pe(e,v)})),c(Ge,e,{body:f}).optimize(n);if(i===o)for(;(i=r[r.length-2])&&!(i instanceof Vr||!vt(i));){var z=i.expression;if(z.has_side_effects(n)){var k=r[r.length-3];if(k&&!Zt(k))break;o.body.unshift(c(He,e,{body:z}))}le(i),r.splice(-2,1)}if(r[0].body=f.concat(r[0].body),e.body=r,n.option("conditionals"))switch(r.length){case 1:if(!fe(r[0]))break;var z=r[0].expression,D=r[0].body.slice();return r[0]!==o&&r[0]!==g?c(Un,e,{condition:c(ae,e,{operator:"===",left:e.expression,right:z}),body:c(Ge,e,{body:D}),alternative:null}).optimize(n):(z&&D.unshift(c(He,z,{body:z})),D.unshift(c(He,e.expression,{body:e.expression})),c(Ge,e,{body:D}).optimize(n));case 2:if(!_r(o,r)||!fe(r[1]))break;var D=r[0].body.slice(),Se=D.length&&qe(D[D.length-1],n);if(Se&&D.pop(),!Ve(D,fe))break;var $e=r[1].body.length&&c(Ge,r[1]),tn=c(Un,e,{condition:c(ae,e,r[0]===o?{operator:"!==",left:e.expression,right:r[1].expression}:{operator:"===",left:e.expression,right:r[0].expression}),body:c(Ge,r[0],{body:D}),alternative:Se&&$e||null});return!Se&&$e&&(tn=c(Ge,e,{body:[tn,$e]})),tn.optimize(n)}return e;function qe(Q,Ce){return Q instanceof fr&&Ce.loopcontrol_target(Q)===e}function fe(Q){var Ce=!1,fn=new un(function(p){if(Ce||p instanceof yn||p instanceof He)return!0;qe(p,fn)&&(Ce=!0)});return fn.push(e),Q.walk(fn),!Ce}function le(Q,Ce){Ce&&!Zt(Ce)?Ce.body=Ce.body.concat(Q.body):wr(n,Q,f)}}),t(ai,function(e,n){if(e.body=Ar(e.body,n),n.option("dead_code")){if(vt(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(i){return i instanceof tr&&!Be(i)},!0))){var r=[];return e.bcatch&&(wr(n,e.bcatch,r),r.forEach(function(i){i instanceof bt&&i.definitions.forEach(function(f){var o=f.name.definition().redefined();o&&(f.name=f.name.clone(),f.name.thedef=o)})})),r.unshift(c(Ge,e).optimize(n)),e.bfinally&&r.push(c(Ge,e.bfinally).optimize(n)),c(Ge,e,{body:r}).optimize(n)}if(e.bfinally&&vt(e.bfinally)){var r=c(Ge,e.bfinally).optimize(n);if(r=e.body.concat(r),!e.bcatch)return c(Ge,e,{body:r}).optimize(n);e.body=r,e.bfinally=null}}return e});function rt(e){return function(n,r){var i=!1;return this.definitions.forEach(function(f){f.value&&(i=!0),f.name.match_symbol(function(o){o instanceof et&&r.push(c(Vn,o,{name:o,value:e(n,o)}))},!0)}),i}}Er.DEFMETHOD("remove_initializers",rt(function(e,n){return c(yt,n).optimize(e)})),Wi.DEFMETHOD("remove_initializers",rt(aa)),bt.DEFMETHOD("remove_initializers",rt(aa)),gt.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(n,r){var i=r.name.definition(),f=r.value;if(f){f instanceof Ze&&(f=f.clone());var o=c(X,r.name),g=c(ze,r,{operator:"=",left:o,right:f});n.push(g);var v=function(){return g.right};v.assigns=[g],v.direct_access=i.direct_access,v.escaped=i.escaped,o.fixed=v,i.references.forEach(function(y){if(y.fixed){var T=y.fixed.assigns;T&&T[0]===r&&(T.length>1||y.fixed.to_binary||y.fixed.to_prefix?T[0]=g:(y.fixed=v,i.fixed===y.fixed&&(i.fixed=v)))}}),i.references.push(o),i.assignments++}return i.eliminated++,n},[]);return e.length==0?null:pe(this,e)});function Kt(e){return e.name!="arguments"&&e.orig.length<(e.orig[0]instanceof Ei?3:2)}function Yi(e,n){if(e.exposed(n))return!0;for(var r=n.scope.resolve(),i=n.scope;i!==r;)if(i=i.parent_scope,i.var_names().has(n.name))return!0}function vr(e,n){return c(Wi,e,{definitions:e.definitions.map(function(r){return c(Vn,r,{name:r.name.convert_symbol(Nr,function(i,f){var o=i.definition();o.orig[o.orig.indexOf(f)]=i;for(var g=n;g!==o.scope&&(g=g.parent_scope);)nf(g.enclosed,o);o.scope=n,n.variables.set(o.name,o)}),value:r.value})})})}function jr(e,n){return c(bt,e,{definitions:e.definitions.map(function(r){return c(Vn,r,{name:r.name.convert_symbol(vi,function(i,f){var o=i.definition();o.orig[o.orig.indexOf(f)]=i,o.scope!==n&&(o.scope=n,n.variables.set(o.name,o),n.enclosed.push(o),n.var_names().set(o.name,!0))}),value:r.value})})})}(function(e){e(M,An),e(Er,function(n,r){r=r?1:0;var i=this.definitions;return!n.option("module")&&Ve(i,function(f){return f.name instanceof xi})?!1:Ve(i,function(f){return!f.name.match_symbol(function(o){if(o instanceof et)return o.definition().assignments!=r},!0)})}),e(bt,function(n){return Ve(this.definitions,function(r){return!r.name.match_symbol(function(i){if(!(i instanceof et))return!1;var f=i.definition();if(f.first_decl!==i||!_a(n,i))return!0;var o=i.scope;return o instanceof rn?!1:!Ve(f.references,function(g){var v=g.scope;do if(v===o)return!0;while(v=v.parent_scope);return!1})},!0)})})})(function(e,n){e.DEFMETHOD("can_letify",n)});function _a(e,n){var r=n.definition();return(r.fixed||r.fixed===0)&&Kt(r)&&Ka(r)&&!Yi(e,r)}gt.DEFMETHOD("can_varify",function(e){return Ve(this.definitions,function(n){return!n.name.match_symbol(function(r){if(r instanceof et)return!_a(e,r)},!0)})}),t(Er,function(e,n){return n.option("varify")?e.can_varify(n)?jr(e,n.find_parent(rn)):e.can_letify(n)?vr(e,G(n)):e:e}),t(Wi,function(e,n){return n.option("varify")&&e.can_varify(n)?jr(e,n.find_parent(rn)):e});function Aa(e,n){if(n.option("optional_chains")&&e.terminal)do{var r=e.expression;if(e.optional){var i=zn(n,r,!0);if(i==null)return c(We,e,{operator:"void",expression:r}).optimize(n);i instanceof M||(e.optional=!1)}e=r}while((e.TYPE=="Call"||e instanceof on)&&!e.terminal)}function Dr(e,n){var r=e.expression;if(!(r instanceof Ze))return e;var i=r.expressions.slice(),f=e.clone();return f.expression=i.pop(),i.push(f),pe(e,i)}function pa(e,n,r){var i=e.expression,f=i instanceof X?i.fixed_value():i;if(f instanceof yn&&!f.uses_arguments&&!f.pinned()&&!(r&&r.indexOf(f)<0)){var o=e.args;if(Ve(o,function(Se){return!(Se instanceof On)})){var g=f.argnames,v=f===i&&!f.name;if(f.rest){if(!(v&&n.option("rests")))return;var y=g.length;for(o=o.slice(0,y);o.length<y;)o.push(c(yt,e).optimize(n));o.push(c(xn,e,{elements:e.args.slice(y)})),g=g.concat(f.rest),f.rest=null}else o=o.slice(),g=g.slice();for(var T=0,k=0,z=v&&n.option("default_values"),$=v&&n.drop_fargs(f,e)?function(Se,$e){return Se?Se instanceof At?Se.elements.length==0&&!Se.rest&&$e instanceof xn:Se instanceof hi?Se.properties.length==0&&!Se.rest&&$e&&!$e.may_throw_on_access(n):Se.unused:!0}:An,N=[],D=0;D<o.length;D++){var W=g[D];if(z&&W instanceof Fn&&o[D].is_defined(n)&&(g[D]=W=W.name),!W||W.unused!==void 0){var j=o[D].drop_side_effect_free(n);if($(W)){W&&g.splice(D,1),o.splice(D,1),j&&N.push(j),D--;continue}else if(j)N.push(j),o[T++]=pe(e,N),N=[];else if(W)if(N.length)o[T++]=pe(e,N),N=[];else{o[T++]=c(dn,o[D],{value:0});continue}}else if($(W,o[D])){var j=o[D].drop_side_effect_free(n);g.splice(D,1),o.splice(D,1),j&&N.push(j),D--;continue}else N.push(o[D]),o[T++]=pe(e,N),N=[];k=T}for(;D<g.length;D++)$(g[D])&&g.splice(D--,1);if(f.argnames=g,o.length=k,e.args=o,!!N.length){var ee=pe(e,N);o.push(o.length<g.length?c(We,e,{operator:"void",expression:ee}):ee)}}}}function Va(e,n){n||(n=e.find_parent(rn));var r=[];return(wi(n)||n instanceof Et&&e.option("module"))&&r.push("await"),Ui(n)&&r.push("yield"),r.length&&jn(r)}function Nf(e,n){if(!n)return!0;var r=!0,i=new un(function(f){if(!r)return!0;if(f instanceof rn){if(f===e)return;if(qt(f))for(var o=0;r&&o<f.argnames.length;o++)f.argnames[o].walk(i);else f instanceof kt&&n[f.name.name]&&(r=!1);return!0}f instanceof Ht&&n[f.name]&&f!==e.name&&(r=!1)});return e.walk(i),r}function ws(e,n){return e.in_strict_mode(n)||!n.has_directive("use strict")}t(hn,function(e,n){var r=e.expression,i=Aa(e,n);if(i)return i;if(n.option("sequences")){if(r instanceof on){var f=Dr(r);if(f!==r){var o=e.clone();return o.expression=f.expressions.pop(),f.expressions.push(o),f.optimize(n)}}else if(!dt(r.tail_node())){var f=Dr(e);if(f!==e)return f.optimize(n)}}if(n.option("unused")&&pa(e,n),n.option("unsafe")){if(Y(r))switch(r.name){case"Array":if(e.args.length==1){var g=e.args[0];if(g instanceof dn)try{var v=g.value;if(v>6)break;for(var y=Array(v),T=0;T<v;T++)y[T]=c(Jt,e);return c(xn,e,{elements:y})}catch{M.warn("Invalid array length: {length} [{start}]",{length:v,start:e.start});break}if(!g.is_boolean(n)&&!g.is_string(n))break}return c(xn,e,{elements:e.args});case"Object":if(e.args.length==0)return c(ft,e,{properties:[]});break;case"String":if(e.args.length==0)return c(Dn,e,{value:""});if(e.args.length==1)return c(ae,e,{operator:"+",left:c(Dn,e,{value:""}),right:e.args[0]}).optimize(n);break;case"Number":if(e.args.length==0)return c(dn,e,{value:0});if(e.args.length==1)return c(We,e,{operator:"+",expression:c(ae,e,{operator:"+",left:c(Dn,e,{value:""}),right:e.args[0]})}).optimize(n);break;case"Boolean":if(e.args.length==0)return c(Fr,e).optimize(n);if(e.args.length==1)return c(We,e,{operator:"!",expression:c(We,e,{operator:"!",expression:e.args[0]})}).optimize(n);break;case"RegExp":var k=[];if(Ve(e.args,function(be){var Me=be.evaluate(n);return k.unshift(Me),be!==Me}))try{return or(n,e,c(ir,e,{value:RegExp.apply(RegExp,k)}))}catch{M.warn("Error converting {this} [{start}]",e)}break}else if(r instanceof Mn)switch(r.property){case"toString":var z=r.expression;if(e.args.length==0&&!(z.may_throw_on_access(n)||z instanceof ma))return c(ae,e,{operator:"+",left:c(Dn,e,{value:""}),right:z}).optimize(n);break;case"join":if(r.expression instanceof xn&&e.args.length<2)e:{var $=e.args[0];if(r.expression.elements.length==0&&!($ instanceof On))return $?pe(e,[$,c(Dn,e,{value:""})]).optimize(n):c(Dn,e,{value:""});if($&&($=$.evaluate(n),$ instanceof M))break e;for(var y=[],N=[],T=0;T<r.expression.elements.length;T++){var D=r.expression.elements[T],W=D.evaluate(n);if(W!==D)N.push(W);else{if(D instanceof On)break e;N.length>0&&(y.push(c(Dn,e,{value:N.join($)})),N.length=0),y.push(D)}}if(N.length>0&&y.push(c(Dn,e,{value:N.join($)})),y.length==1)return y[0].is_string(n)?y[0]:c(ae,y[0],{operator:"+",left:c(Dn,e,{value:""}),right:y[0]});if($==""){var g;return y[0].is_string(n)||y[1].is_string(n)?g=y.shift():g=c(Dn,e,{value:""}),y.reduce(function(sn,xe){return c(ae,xe,{operator:"+",left:sn,right:xe})},g).optimize(n)}var j=e.clone();return j.expression=j.expression.clone(),j.expression.expression=j.expression.expression.clone(),j.expression.expression.elements=y,or(n,e,j)}break;case"charAt":if(e.args.length<2){var j=c(ae,e,{operator:"||",left:c(ht,e,{expression:r.expression,property:e.args.length?c(ae,e.args[0],{operator:"|",left:c(dn,e,{value:0}),right:e.args[0]}):c(dn,e,{value:0})}).optimize(n),right:c(Dn,e,{value:""})});return j.is_string=nt,j.optimize(n)}break;case"apply":if(e.args.length==2&&e.args[1]instanceof xn){var ee=e.args[1].elements.slice();return ee.unshift(e.args[0]),c(hn,e,{expression:c(Mn,r,{expression:r.expression,property:"call"}),args:ee}).optimize(n)}break;case"call":var Se=r.expression;if(Se instanceof X&&(Se=Se.fixed_value()),Se instanceof yn&&!Se.contains_this())return(e.args.length?pe(e,[e.args[0],c(hn,e,{expression:r.expression,args:e.args.slice(1)})]):c(hn,e,{expression:r.expression,args:[]})).optimize(n);break}else if(n.option("side_effects")&&r instanceof hn&&r.args.length==1&&Y(r.expression)&&r.expression.name=="Object"){var o=e.clone();return o.expression=xt(e,r,r.args[0]),o.optimize(n)}}if(n.option("unsafe_Function")&&Y(r)&&r.name=="Function"){if(e.args.length==0)return c(Tt,e,{argnames:[],body:[]}).init_vars(r.scope);if(Ve(e.args,function(be){return be instanceof Dn}))try{var le="n(function("+e.args.slice(0,-1).map(function(be){return be.value}).join()+"){"+e.args[e.args.length-1].value+"})",$e=Ua(le),tn={ie:n.option("ie")};$e.figure_out_scope(tn);var qe=new ca(n.options);$e=$e.transform(qe),$e.figure_out_scope(tn),$e.compute_char_frequency(tn),$e.mangle_names(tn);var fe;$e.walk(new un(function(be){if(fe)return!0;if(be instanceof yn)return fe=be,!0}));var le=Of();return Ge.prototype._codegen.call(fe,le),e.args=[c(Dn,e,{value:fe.argnames.map(function(be){return be.print_to_string()}).join()}),c(Dn,e.args[e.args.length-1],{value:le.get().replace(/^\{|\}$/g,"")})],e}catch(be){if(be instanceof lf)M.warn("Error parsing code passed to new Function [{start}]",e.args[e.args.length-1]),M.warn(be.toString());else throw be}}var Q=r instanceof X?r.fixed_value():r,Ce=n.parent(),fn=n.self(),p=Q instanceof yn&&(!wi(Q)||n.option("awaits")&&Ce instanceof wt)&&(!Ui(Q)||n.option("yields")&&fn instanceof Ai&&fn.nested),R=p&&Q.first_statement(),S=0,b=!1,x=!Ve(e.args,function(be){return!(be instanceof On)}),P=p&&Ve(Q.argnames,function(be,Me){if(S==1&&e.args[Me]instanceof On&&(S=2),be instanceof Fn){S||(S=1);var sn=S==1&&e.args[Me];if(gi(sn)||(S=2),Xa(Q,be.value))return!1;be=be.name}return!(be instanceof Nn&&(b=!0,Xa(Q,be)))})&&!(Q.rest instanceof Nn&&Xa(Q,Q.rest)),U=P&&n.option("inline")&&!e.is_expr_pure(n)&&(r===Q||ws(Q,n));if(U&&R instanceof tt){var W=R.value;if(r===Q&&!Q.name&&(!W||W.is_constant_expression())&&Nf(Q,Va(n)))return pe(e,de(W)).optimize(n)}if(p&&!Q.contains_this()){var B,W,te=!1;if(U&&!Q.uses_arguments&&!Q.pinned()&&!(Q.name&&Q instanceof St)&&(r===Q||!_f(n,B=r.definition(),Q)&&Q.is_constant_expression(G(n)))&&(W=Le(R))){var C=r===Q||B.single_use&&B.references.length-B.replaced==1;if(Te()){e._optimized=!0;var ne=W.optimize(n).clone(!0),ee=e.args.slice(),Pe=[];ne=ne.transform(new ei(function(xe){if(xe instanceof X){var nn=xe.definition();if(Q.variables.get(xe.name)!==nn)return Pe.push(xe),xe;var pn=En(nn),Ye=ee[pn];if(!Ye)return c(yt,e);ee[pn]=null;var oe=this.parent();return oe?xt(oe,xe,Ye):Ye}}));var Oe=Q.inlined;r!==Q&&(Q.inlined=!0);var kn=[];ee.forEach(function(xe){xe&&(xe=xe.clone(!0),xe.walk(new un(function(nn){nn instanceof X&&Pe.push(nn)})),kn.push(xe))},[]),kn.push(ne);var j=pe(e,kn).optimize(n);if(Q.inlined=Oe,j=xt(Ce,fn,j),e.inlined_node=j,C||qi(j,e)===j)return Pe.forEach(function(xe){xe.scope=r===Q?Q.parent_scope:r.scope,xe.reference();var nn=xe.definition();C&&nn.replaced++,nn.single_use=!1}),j;j.has_side_effects(n)||(e.drop_side_effect_free=function(xe,nn){var pn=this,Ye=pn.args.slice();return Ye.unshift(pn.expression),pe(pn,Ye).drop_side_effect_free(xe,nn)},e.has_side_effects=function(xe){var nn=this,pn=nn.args.slice();return pn.unshift(nn.expression),pe(nn,pn).has_side_effects(xe)})}var Fe,Ne,h,q;if(C&&ct()){Q._squeezed=!0,r!==Q&&(Q.parent_scope=r.scope);var j=pe(e,oi()).optimize(n);return xt(Ce,fn,j)}}if(n.option("side_effects")&&P&&Ve(Q.body,_n)&&(Q===r?K(Q,n):!S&&!b&&!Q.rest)&&!(qt(Q)&&Q.value)&&Nf(Q,Va(n)))return pe(e,de()).optimize(n)}if(n.option("arrows")&&n.option("module")&&(r instanceof rr||r instanceof Tt)&&!r.name&&!r.uses_arguments&&!r.pinned()&&!r.contains_this()){var he=c(wi(r)?gr:Zi,r,r);return he.init_vars(r.parent_scope,r),he.variables.del("arguments"),e.expression=he.transform(n),e}if(n.option("drop_console")&&r instanceof on){for(var se=r.expression;se.expression;)se=se.expression;if(Y(se)&&se.name=="console")return c(yt,e).optimize(n)}if(n.option("negate_iife")&&Ce instanceof He&&l(fn))return e.negate(n,!0);return Hi(n,e);function Ue(be){return c(ht,be,{expression:c(xn,be,{elements:[]}),property:c(dn,be,{value:0})})}function de(be){var Me=e.args.slice(),sn=S>1||b||Q.rest;if((sn||x)&&(Me=[c(xn,e,{elements:Me})]),sn){var xe=new ei(function(Ye,oe){if(Ye instanceof Fn)return c(Fn,Ye,{name:Ye.name.transform(xe)||Ue(Ye),value:Ye.value});if(Ye instanceof At){var me=[];return Ye.elements.forEach(function(Rn,je){Rn=Rn.transform(xe),Rn&&(me[je]=Rn)}),hr(Ye,me),c(At,Ye,{elements:me})}if(Ye instanceof hi){var Ie=[],cn=[];return Ye.properties.forEach(function(Rn){var je=Rn.key,Tn=Rn.value.transform(xe);Tn?(cn.length&&(je instanceof M||(je=_i(je,Rn)),cn.push(je),je=pe(Ye,cn),cn=[]),Ie.push(c(Pt,Rn,{key:je,value:Tn}))):je instanceof M&&cn.push(je)}),cn.length&&Ie.push(c(Pt,Ye,{key:pe(Ye,cn),value:Ue(Ye)})),c(hi,Ye,{properties:Ie})}if(Ye instanceof $n)return null}),nn=[];Q.argnames.forEach(function(Ye,oe){Ye=Ye.transform(xe),Ye&&(nn[oe]=Ye)});var pn=Q.rest&&Q.rest.transform(xe);pn&&(nn.length=Q.argnames.length),hr(Q,nn),Me[0]=c(ze,e,{operator:"=",left:c(At,Q,{elements:nn,rest:pn}),right:Me[0]})}else Q.argnames.forEach(function(Ye){Ye instanceof Fn&&Me.push(Ye.value)});return Me.push(be||c(yt,e)),Me}function Je(){return e.call_only?c(dn,e,{value:0}):c(yt,e)}function Cn(be){if(!be)return Je();if(be instanceof tt)return be.value||Je();if(be instanceof He)return e.call_only?be.body:c(We,be,{operator:"void",expression:be.body})}function Le(be){var Me=Q.body.length;if(Me<2&&(be=Cn(be),be))return be;if(n.option("inline")<3)return!1;be=null;for(var sn=0;sn<Me;sn++){var xe=Q.body[sn];if(xe instanceof bt){if(te){if(!be)continue;if(!(be instanceof He))return!1;ut(xe)||(be=null)}else if(!ut(xe)){if(be&&!(be instanceof He))return!1;be=null,te=!0}}else{if(xe instanceof Ur||xe instanceof Ri||xe instanceof Qn)continue;if(be)return!1;be=xe}}return Cn(be)}function En(be){for(var Me=Q.argnames.length;--Me>=0;)if(Q.argnames[Me].definition()===be)return Me}function Te(){if(!(S||b||x||te||Q.rest)&&!(n.option("inline")<2&&Q.argnames.length)&&Q.variables.all(function(me){return me.references.length-me.replaced<2&&me.orig[0]instanceof $n})){var be=n.find_parent(rn),Me=!1,sn=Va(n,be),xe,nn=[],pn=!1,Ye=new un(function(me,Ie){if(Me)return!0;if(me instanceof ae&&it[me.operator]||me instanceof bn){nn=null;return}if(me instanceof Nt)return Me=!0;if(me instanceof Nn){pn=!0;return}if(me instanceof rn||sn&&me instanceof Ht&&sn[me.name])return Me=!0;if(me instanceof X){var cn=me.definition();if(Q.variables.get(me.name)!==cn){nn=null;return}if(cn.init instanceof kt||Gi(me,Ye.parent()))return Me=!0;var Rn=En(cn);if(xe<Rn||(xe=Rn),!nn)return;pn?nn=null:nn.push(Q.argnames[Rn]);return}if(!pn){if(me instanceof ze&&me.left instanceof on)return me.left.expression.walk(Ye),me.left instanceof ht&&me.left.property.walk(Ye),me.right.walk(Ye),pn=!0,!0;if(me.has_side_effects(n))return Ie(),pn=!0,!0}});if(W.walk(Ye),!Me){var oe=e.args.length;if(nn&&Q.argnames.length>=oe){for(oe=Q.argnames.length;oe-- >xe&&Q.argnames[oe]===nn.pop(););oe++}return oe<=xe||Ve(e.args.slice(xe,oe),pn&&!nn?function(me){return me.is_constant_expression(be)}:function(me){return!me.has_side_effects(n)})}}}function pt(be,Me){return be.has(Me)||wn[Me]||q.var_names().has(Me)}function Ot(be,Me){var sn=!1;return Q.each_argname(function(xe){if(!sn&&!xe.unused){if(!Me||pt(be,xe.name))return sn=!0;Fe.set(xe.name,!0),h&&h.push(xe.definition())}}),!sn}function Bn(be,Me){for(var sn=0;sn<Q.body.length;sn++){var xe=Q.body[sn];if(xe instanceof kt){var nn=xe.name;if(!Me||Fe.has(nn.name)||pt(be,nn.name)||!Ve(xe.enclosed,function(Ye){return Ye.scope===q||Ye.scope===xe||!be.has(Ye.name)}))return!1;h&&h.push(nn.definition());continue}if(xe instanceof bt){if(!Me)return!1;for(var pn=xe.definitions.length;--pn>=0;){var nn=xe.definitions[pn].name;if(pt(be,nn.name))return!1;h&&h.push(nn.definition())}}}return!0}function ct(){var be=new Jn,Me=0,sn;q=fn;do if(q.variables&&q.variables.each(function(pn){be.set(pn.name,!0)}),sn=q,q=n.parent(Me++),q instanceof Wr){if(!q.static)return!1}else if(q instanceof ga)h=[];else if(q instanceof jt){if(q.init===sn)continue;h=[]}else if(q instanceof Xt){if(q.init===sn||q.object===sn)continue;h=[]}while(!(q instanceof rn));if(Ne=q.body.indexOf(sn)+1,!Ne||!Nf(Q,Va(n,q)))return!1;var xe=(r!==Q||Q.parent_scope.resolve()===q)&&!q.pinned();q instanceof Et&&(n.toplevel.vars?be.set("arguments",!0):xe=!1),Fe=new Jn;var nn=n.option("inline");return!Ot(be,nn>=2&&xe)||!Bn(be,nn>=3&&xe)?!1:!h||h.length==0||!If(Q,h)}function Zn(be,Me,sn,xe){var nn=sn.definition();if(q.var_names().has(sn.name)||(nn.first_decl=null,q.var_names().set(sn.name,!0),be.push(c(Vn,sn,{name:sn,value:null}))),q.variables.set(sn.name,nn),q.enclosed.push(nn),!!xe){var pn=c(X,sn);nn.assignments++,nn.references.push(pn),Me.push(c(ze,e,{operator:"=",left:pn,right:xe}))}}function Qt(be,Me){for(var sn=Q.argnames.length,xe=e.args.length;--xe>=sn;)Me.push(e.args[xe]);var nn=[];for(xe=sn;--xe>=0;){var pn=Q.argnames[xe],Ye;pn instanceof Fn?(nn.push(pn),Ye=pn.name):Ye=pn;var oe=e.args[xe];if(Ye.unused||q.var_names().has(Ye.name))oe&&Me.push(oe);else{var me=c(vi,Ye),Ie=Ye.definition();Ie.orig.push(me),Ie.eliminated++,Ye.unused!==void 0?(Zn(be,Me,me),oe&&Me.push(oe)):(!oe&&pn===Ye&&(h||Ye.name=="arguments"&&!qt(Q)&&qt(q))&&(oe=c(yt,e)),Zn(be,Me,me,oe))}}for(be.reverse(),Me.reverse(),xe=nn.length;--xe>=0;){var cn=nn[xe];if(cn.name.unused!==void 0)Me.push(cn.value);else{var Rn=c(X,cn.name);cn.name.definition().references.push(Rn),Me.push(c(ze,cn,{operator:"=",left:Rn,right:cn.value}))}}}function Dt(be,Me){Me.push(c(ze,e,{operator:"=",left:c(At,e,{elements:Q.argnames.map(function(xe){return xe.unused?c(Jt,xe):xe.convert_symbol(X,sn)}),rest:Q.rest&&Q.rest.convert_symbol(X,sn)}),right:c(xn,e,{elements:e.args.slice()})}));function sn(xe,nn){if(nn.unused)return Ue(nn);var pn=nn.definition();pn.assignments++,pn.references.push(xe);var Ye=c(vi,nn);pn.orig.push(Ye),pn.eliminated++,Zn(be,Me,Ye)}}function bi(be,Me){var sn=[Ne,0],xe=[],nn=[],pn=[],Ye=[],oe=[];return Q.body.filter(h?function(me){if(!(me instanceof kt))return!0;var Ie=c(vi,jf(me.name)),cn=Ie.definition();return cn.fixed=!1,cn.orig.push(Ie),cn.eliminated++,Zn(be,nn,Ie,si(me,!0)),!1}:function(me){if(!(me instanceof kt))return!0;var Ie=me.name.definition();return q.functions.set(Ie.name,Ie),q.variables.set(Ie.name,Ie),q.enclosed.push(Ie),q.var_names().set(Ie.name,!0),sn.push(me),!1}).forEach(function(me){if(!(me instanceof bt)){me instanceof He&&oe.push(me.body);return}for(var Ie=0;Ie<me.definitions.length;Ie++){var cn=me.definitions[Ie],Rn=jf(cn.name),je=cn.value;je&&oe.length>0&&(oe.push(je),je=pe(cn,oe),oe=[]),Zn(xe,pn,Rn,je),h&&(Fe.has(Rn.name)||Rn.definition().orig.length==1&&Q.functions.has(Rn.name)||Ye.push(Es(n,Rn)))}}),[].push.apply(be,xe),[].push.apply(Me,Ye),[].push.apply(Me,nn),[].push.apply(Me,pn),sn}function oi(){var be=[],Me=[];S>1||b||x||Q.rest?Dt(be,Me):Qt(be,Me);var sn=bi(be,Me);return Me.push(W),be.length&&sn.push(c(bt,Q,{definitions:be})),[].splice.apply(q.body,sn),Q.enclosed.forEach(function(xe){q.var_names().has(xe.name)||(q.enclosed.push(xe),q.var_names().set(xe.name,!0))}),Me}}),t($i,function(e,n){if(n.option("unsafe")){var r=e.expression;if(Y(r))switch(r.name){case"Array":case"Error":case"Function":case"Object":case"RegExp":return c(hn,e).transform(n)}}if(n.option("sequences")){var i=Dr(e);if(i!==e)return i.optimize(n)}return n.option("unused")&&pa(e,n),e});function Xf(e,n,r,i){if(!(i instanceof ae)||!(i.operator=="&&"||i.operator=="||")||!(i.right instanceof ze)||i.right.operator!="="||!(i.right.left instanceof X)||i.right.left.definition()!==n||r.has_side_effects(e)||!f(i.left)||!f(i.right.right))return;return n.replaced++,i.operator=="&&"?c(bn,i,{condition:i.left,consequent:i.right.right,alternative:r}):c(bn,i,{condition:i.left,consequent:r,alternative:i.right.right});function f(o){if(!o.has_side_effects(e)){var g=!1;return o.walk(new un(function(v){if(g)return!0;if(v instanceof X&&v.definition()===n)return g=!0})),!g}}}t(Ze,function(e,n){var r=f(),i=r.length-1;if(v(),o(),i==0)return e=xt(n.parent(),n.self(),r[0]),e instanceof Ze||(e=e.optimize(n)),e;return e.expressions=r,e;function f(){if(!n.option("side_effects"))return e.expressions;var y=[],T=Oa(n),k=e.expressions.length-1;return e.expressions.forEach(function(z,$){$<k&&(z=z.drop_side_effect_free(n,T)),z&&(Vt(y,z),T=!1)}),y}function o(){if(n.option("side_effects")){for(;i>0&&gi(r[i],n);)i--;i<r.length-1&&(r[i]=c(We,e,{operator:"void",expression:r[i]}),r.length=i+1)}}function g(y){return y instanceof ze&&y.operator=="="&&y.left instanceof X&&y.left.definition()}function v(){for(var y=1;y<i;y++){var T=r[y-1],k=g(T);if(k){var z=r[y];if(n.option("conditionals")){var $=Xf(n,k,T.right,z);if($){T.right=$,r.splice(y--,1),i--;continue}}n.option("dead_code")&&g(z)===k&&z.right.is_constant_expression(k.scope.resolve())&&(r[--y]=T.right)}}}}),t(Cr,function(e,n){if(n.option("sequences")){var r=Dr(e);if(r!==e)return r.optimize(n)}return Hi(n,e)});var Xs=jn("+ -"),Ms=jn("* / %");t(We,function(e,n){var r=e.operator,i=e.expression;if(n.option("sequences")&&T()){var f=Dr(e);if(f!==e)return f.optimize(n)}switch(r){case"+":if(!n.option("evaluate")||!i.is_number(n,!0))break;var o=n.parent();if(o instanceof We&&o.operator=="delete")break;return i;case"-":if(i instanceof Gr&&(i=i.transform(n)),i instanceof dn||i instanceof Gr)return e;break;case"!":if(!n.option("booleans"))break;if(i.is_truthy())return pe(e,[i,c(Fr,e)]).optimize(n);if(n.in_boolean_context()){if(i instanceof We&&i.operator=="!")return i.expression;if(i instanceof ae){var g=Oa(n);e=(g?la:qi)(e,i.negate(n,g))}}break;case"delete":if(!n.option("evaluate")||y(i))break;return pe(e,[i,c(Ir,e)]).optimize(n);case"typeof":if(!n.option("booleans")||!n.in_boolean_context())break;M.warn("Boolean expression always true [{start}]",e);var v=[c(Ir,e)];return i instanceof X&&Be(i,n)||v.unshift(i),pe(e,v).optimize(n);case"void":if(!n.option("side_effects"))break;return i=i.drop_side_effect_free(n),i?(e.expression=i,e):c(yt,e).optimize(n)}if(n.option("evaluate")&&i instanceof ae&&Xs[r]&&Ms[i.operator]&&(i.left.is_constant()||!i.right.has_side_effects(n)))return c(ae,e,{operator:i.operator,left:c(We,i.left,{operator:r,expression:i.left}),right:i.right});return Hi(n,e);function y(k){return k instanceof Gr||k instanceof Ya||k instanceof of||k instanceof on||k instanceof X||k instanceof yt}function T(){switch(r){case"delete":return!y(i.tail_node());case"typeof":return!Y(i.tail_node());default:return!0}}}),t(wt,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var r=Dr(e);if(r!==e)return r.optimize(n)}if(n.option("side_effects")){var i=e.expression;if(i instanceof wt||i instanceof We&&i.expression instanceof wt)return i.optimize(n);for(var f=0,o=e,g;g=n.parent(f++);o=g){if(qt(g)){if(g.value===o)return i.optimize(n)}else if(g instanceof tt){var v=!0;do if(o=g,g=n.parent(f++),g instanceof ai&&(g.bfinally||g.bcatch)!==o){v=!1;break}while(g&&!(g instanceof rn));if(v)return i.optimize(n)}else if(g instanceof Ze&&g.tail_node()===o)continue;break}}return e}),t(Ai,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var r=Dr(e);if(r!==e)return r.optimize(n)}var i=e.expression;if(e.nested&&i.TYPE=="Call"){var f=i.clone().optimize(n);if(f.TYPE!="Call")return f}return e}),ae.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof on){if(!(this.left.expression instanceof Ze))return this;var n=this.left.expression.expressions.slice(),r=this.clone();return r.left=r.left.clone(),r.left.expression=n.pop(),n.push(r),pe(this,n)}if(this.left instanceof Ze){var n=this.left.expressions.slice(),r=this.clone();return r.left=n.pop(),n.push(r),pe(this,n)}if(this.right instanceof Ze){if(this.left.has_side_effects(e))return this;for(var i=this.operator=="="&&this.left instanceof X,n=this.right.expressions,f=n.length-1,o=0;o<f&&!(!i&&n[o].has_side_effects(e));o++);if(o==f){n=n.slice();var r=this.clone();return r.right=n.pop(),n.push(r),pe(this,n)}if(o>0){var r=this.clone();return r.right=pe(this.right,n.slice(o)),n=n.slice(0,o),n.push(r),pe(this,n)}}return this});var Zs=jn("indexOf lastIndexOf"),Qs=jn("== === != !== * & | ^");function Ga(e,n){return e instanceof ze?!n&&e.operator=="="&&Ga(e.right):e instanceof $i?!n:e instanceof Ze?Ga(e.tail_node(),n):e instanceof X?!n&&Ga(e.fixed_value()):e instanceof xn||e instanceof Nt||e instanceof yn||e instanceof ft}function Ja(e,n){var r=e.right;switch(e.operator){case"in":return Ga(r)||n&&n.option("unsafe_comps");case"instanceof":return r instanceof X&&(r=r.fixed_value()),r instanceof Ri||r instanceof Tt||Ui(r)||w(r)&&e.left.is_constant()?!0:n&&n.option("unsafe_comps");default:return!0}}function Oi(e,n){if(n.is_constant())return!0;if(n instanceof ze)return n.operator!="="||Oi(e,n.right);if(n instanceof ae)return!it[n.operator]||Oi(e,n.left)&&Oi(e,n.right);if(n instanceof hn){if(!wi(n.expression))return!1;var r=!1;return ti(n.expression,new un(function(f){if(r)return!0;if(f instanceof wt)return r=!0;if(f!==n&&f instanceof rn)return!0})),!r}if(n instanceof bn)return Oi(e,n.consequent)&&Oi(e,n.alternative);if(n instanceof Ze)return Oi(e,n.tail_node());if(n instanceof X){var i=n.fixed_value();return i&&Oi(e,i)}if(n instanceof Yt)return!n.tag||Ff(e,n.tag);if(n instanceof at)return!0}function vf(e,n){return e instanceof ze?In(e.left,n)?e:e.left:e instanceof Ze?vf(e.tail_node(),n):e instanceof We&&Ea[e.operator]?In(e.expression,n)?e:e.expression:e}function Da(e,n){return n instanceof Mn?Da(e,n.expression):n instanceof ht?Da(e,n.expression)&&Da(e,n.property):n instanceof Ht?!0:!n.has_side_effects(e)}function Pf(e,n){var r=e.right.tail_node();if(r!==e.right){var i=e.right.expressions.slice(0,-1);i.push(r.left),r=r.clone(),r.left=pe(e.right,i),e.right=r}if(e.left=c(ae,e,{operator:e.operator,left:e.left,right:r.left,start:e.left.start,end:r.left.end}),e.right=r.right,n){var f=e.left.transform(n);return f!==e.left&&(e=e.clone(),e.left=f),e}e.operator==r.left.operator&&Pf(e.left)}t(ae,function(e,n){if(Qs[e.operator]&&e.right.is_constant()&&!e.left.is_constant()&&!(e.left instanceof ae&&dr[e.left.operator]>=dr[e.operator])&&U(),n.option("sequences")){var r=e.lift_sequences(n);if(r!==e)return r.optimize(n)}if(n.option("assignments")&&it[e.operator]){var i=vf(e.left,n),f=e.right;if(i instanceof X&&f instanceof ze&&f.operator=="="&&i.equals(f.left)){i=i.clone();var o=c(ze,e,{operator:"=",left:i,right:c(ae,e,{operator:e.operator,left:e.left,right:f.right})});i.fixed&&(i.fixed=function(){return o.right},i.fixed.assigns=[o]);var g=i.definition();return g.references.push(i),g.replaced++,o.optimize(n)}}if(n.option("comparisons"))switch(e.operator){case"===":case"!==":if(gi(e.left,n)&&e.right.is_defined(n))return M.warn("Expression always defined [{start}]",e),pe(e,[e.right,c(e.operator=="==="?Fr:Ir,e)]).optimize(n);var v=!0;(e.left.is_string(n)&&e.right.is_string(n)||e.left.is_number(n)&&e.right.is_number(n)||e.left.is_boolean(n)&&e.right.is_boolean(n)||Da(n,e.left)&&e.left.equals(e.right))&&(e.operator=e.operator.slice(0,2));case"==":case"!=":if(!v&&gi(e.left,n))e.left=c(Pr,e.left);else if(n.option("typeofs")&&e.left instanceof Dn&&e.left.value=="undefined"&&e.right instanceof We&&e.right.operator=="typeof"){var y=e.right.expression;(y instanceof X?y.is_declared(n):!(y instanceof on&&n.option("ie")))&&(e.right=y,e.left=c(yt,e.left).optimize(n),e.operator.length==2&&(e.operator+="="))}else if(e.left instanceof X&&e.right instanceof X&&e.left.definition()===e.right.definition()&&Ga(e.left))return c(e.operator[0]=="="?Ir:Fr,e).optimize(n);break;case"&&":case"||":var T=e.left;if(T.inlined_node&&(T=T.inlined_node),!(T instanceof ae)||T.operator!=(e.operator=="&&"?"!==":"==="))break;var f=e.right;if(f.inlined_node&&(f=f.inlined_node),!(f instanceof ae)||T.operator!=f.operator)break;if(gi(T.left,n)&&f.left instanceof Pr||T.left instanceof Pr&&gi(f.left,n)){var y=vf(T.right,n);if(!Da(n,y)||!y.equals(f.right))break;return T.operator=T.operator.slice(0,-1),T.left=c(Pr,e),T}break}var k=!1,z=n.parent();if(n.option("booleans")){var i=vf(e.left,n);if(it[e.operator]&&Da(n,i)){if(i.equals(e.right))return xt(z,n.self(),e.left).optimize(n);Xn(n,i)}k=n.in_boolean_context()}if(k)switch(e.operator){case"+":var $=e.left.evaluate(n,!0);if($&&typeof $=="string"||($=e.right.evaluate(n,!0))&&typeof $=="string"){M.warn("+ in boolean context always true [{start}]",e);var N=[];switch(e.left.evaluate(n)instanceof M&&N.push(e.left),e.right.evaluate(n)instanceof M&&N.push(e.right),N.length){case 0:return c(Ir,e).optimize(n);case 1:return N[0]=N[0].clone(),N.push(c(Ir,e)),pe(e,N).optimize(n)}e.truthy=!0}break;case"==":if(e.left instanceof Dn&&e.left.value==""&&e.right.is_string(n))return c(We,e,{operator:"!",expression:e.right}).optimize(n);break;case"!=":if(e.left instanceof Dn&&e.left.value==""&&e.right.is_string(n))return e.right.optimize(n);break}if(n.option("comparisons")&&e.is_boolean(n)){if(z.TYPE!="Binary"){var D=c(We,e,{operator:"!",expression:e.negate(n)});if(or(n,e,D)===D)return D}switch(e.operator){case">":U("<");break;case">=":U("<=");break}}if(n.option("conditionals")&&it[e.operator]){if(e.left instanceof ae&&e.operator==e.left.operator){var W=c(ae,e,{operator:e.operator,left:e.left.right,right:e.right}),j=W.transform(n);W!==j&&(e.left=e.left.left,e.right=j)}var ee=e.right.tail_node();ee instanceof ae&&e.operator==ee.operator&&(e=Pf(e,n))}if(n.option("strings")&&e.operator=="+"){if(e.right instanceof Dn&&e.right.value==""&&e.left.is_string(n))return e.left.optimize(n);if(e.left instanceof Dn&&e.left.value==""&&e.right.is_string(n))return e.right.optimize(n);if(e.left instanceof ae&&e.left.operator=="+"&&e.left.left instanceof Dn&&e.left.left.value==""&&e.right.is_string(n)&&(e.left.right.is_constant()||!e.right.has_side_effects(n)))return e.left=e.left.right,e.optimize(n);var ee=e.right.tail_node();ee instanceof ae&&e.operator==ee.operator&&(e.left.is_string(n)&&ee.is_string(n)||ee.left.is_string(n)&&(e.left.is_constant()||!ee.right.has_side_effects(n)))&&(e=Pf(e,n))}if(n.option("evaluate")){var Se=!0;switch(e.operator){case"&&":var qe=zn(n,e.left);if(qe){if(!(qe instanceof M))return M.warn("Condition left of && always true [{start}]",e),pe(e,[e.left,e.right]).optimize(n)}else return M.warn("Condition left of && always false [{start}]",e),xt(z,n.self(),e.left).optimize(n);if(e.right.evaluate(n,!0)){if((k||z.operator=="&&"&&z.left===n.self())&&!(e.right.evaluate(n)instanceof M))return M.warn("Dropping side-effect-free && [{start}]",e),e.left.optimize(n)}else{if(k&&!(e.right.evaluate(n)instanceof M))return M.warn("Boolean && always false [{start}]",e),pe(e,[e.left,c(Fr,e)]).optimize(n);e.falsy=!0}if(e.left.operator=="||"){var $e=zn(n,e.left.right);if(!$e)return c(bn,e,{condition:e.left.left,consequent:e.right,alternative:e.left.right}).optimize(n)}break;case"??":var tn=!0;case"||":var qe=zn(n,e.left,tn);if(tn?qe==null:!qe)return M.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:tn?"nullish":"false",start:e.start}),pe(e,[e.left,e.right]).optimize(n);if(!(qe instanceof M))return M.warn("Condition left of {operator} always {value} [{start}]",{operator:e.operator,value:tn?"defined":"true",start:e.start}),xt(z,n.self(),e.left).optimize(n);var fe;if(!tn&&(fe=e.right.evaluate(n,!0))&&!(fe instanceof M)){if(k&&!(e.right.evaluate(n)instanceof M))return M.warn("Boolean || always true [{start}]",e),pe(e,[e.left,c(Ir,e)]).optimize(n);e.truthy=!0}else if((k||z.operator=="||"&&z.left===n.self())&&!e.right.evaluate(n))return M.warn("Dropping side-effect-free {operator} [{start}]",e),e.left.optimize(n);if(!tn&&e.left.operator=="&&"){var $e=zn(n,e.left.right);if($e&&!($e instanceof M))return c(bn,e,{condition:e.left.left,consequent:e.left.right,alternative:e.right}).optimize(n)}break;case"+":if(e.left instanceof st&&e.right instanceof ae&&e.right.operator=="+"&&e.right.left instanceof st&&e.right.is_string(n)&&(e=c(ae,e,{operator:"+",left:c(Dn,e.left,{value:""+e.left.value+e.right.left.value,start:e.left.start,end:e.right.left.end}),right:e.right.right})),e.right instanceof st&&e.left instanceof ae&&e.left.operator=="+"&&e.left.right instanceof st&&e.left.is_string(n)&&(e=c(ae,e,{operator:"+",left:e.left.left,right:c(Dn,e.right,{value:""+e.left.right.value+e.right.value,start:e.left.right.start,end:e.right.end})})),e.right instanceof We&&e.right.operator=="-"&&e.left.is_number(n)){e=c(ae,e,{operator:"-",left:e.left,right:e.right.expression});break}if(e.left instanceof We&&e.left.operator=="-"&&P()&&e.right.is_number(n)){e=c(ae,e,{operator:"-",left:e.right,right:e.left.expression});break}if(n.option("unsafe_math")&&e.left instanceof ae&&dr[e.left.operator]==dr[e.operator]&&e.right.is_constant()&&(e.right.is_boolean(n)||e.right.is_number(n))&&e.left.is_number(n)&&!e.left.right.is_constant()&&(e.left.left.is_boolean(n)||e.left.left.is_number(n))){e=c(ae,e,{operator:e.left.operator,left:c(ae,e,{operator:e.operator,left:e.right,right:e.left.left}),right:e.left.right});break}case"-":if(e.right instanceof We&&e.right.operator=="-"&&e.left.is_number(n)&&e.right.expression.is_number(n)){e=c(ae,e,{operator:"+",left:e.left,right:e.right.expression});break}case"*":case"/":Se=n.option("unsafe_math"),e.operator!="+"&&["left","right"].forEach(function(B){var te=e[B];if(te instanceof We&&te.operator=="+"){var C=te.expression;(C.is_boolean(n)||C.is_number(n)||C.is_string(n))&&(e[B]=C)}});case"&":case"|":case"^":if(e.operator!="-"&&e.operator!="/"&&(e.left.is_boolean(n)||e.left.is_number(n))&&(e.right.is_boolean(n)||e.right.is_number(n))&&P()&&!(e.left instanceof ae&&e.left.operator!=e.operator&&dr[e.left.operator]>=dr[e.operator])&&(e=or(n,e,c(ae,e,{operator:e.operator,left:e.right,right:e.left}),e.right instanceof st&&!(e.left instanceof st))),!Se||!e.is_number(n))break;if(e.right instanceof ae&&e.right.operator!="%"&&dr[e.right.operator]==dr[e.operator]&&e.right.is_number(n)&&(e.operator!="+"||e.right.left.is_boolean(n)||e.right.left.is_number(n))&&(e.operator!="-"||!e.left.is_negative_zero())&&(e.right.left.is_constant_expression()||!e.right.right.has_side_effects(n))&&!p(e.right.right)&&(e=c(ae,e,{operator:R(e.operator,e.right.operator),left:c(ae,e.left,{operator:e.operator,left:e.left,right:e.right.left,start:e.left.start,end:e.right.left.end}),right:e.right.right}),e.operator=="+"&&!e.right.is_boolean(n)&&!e.right.is_number(n)&&(e.right=c(We,e.right,{operator:"+",expression:e.right}))),e.right instanceof st&&e.left instanceof ae&&e.left.operator!="%"&&dr[e.left.operator]==dr[e.operator]&&e.left.is_number(n)){if(e.left.left instanceof st){var i=S(e.operator,e.left.left,e.right,{start:e.left.left.start,end:e.right.end});e=S(e.left.operator,Hi(n,i),e.left.right,e)}else if(e.left.right instanceof st){var le=R(e.left.operator,e.operator),ee=Hi(n,S(le,e.left.right,e.right,e.left));ee.is_constant()&&!(e.left.operator=="-"&&e.right.value!=0&&+ee.value==0&&e.left.left.is_negative_zero())&&(e=S(e.left.operator,e.left.left,ee,e))}}break;case"instanceof":if(!Ja(e,n))break;if(w(e.right))return pe(e,[e.left,e.right,c(Fr,e)]).optimize(n);break}if(!(z instanceof We&&z.operator=="delete")){if(e.left instanceof dn&&!e.right.is_constant())switch(e.operator){case"+":if(e.left.value==0){if(e.right.is_boolean(n))return c(We,e,{operator:"+",expression:e.right}).optimize(n);if(e.right.is_number(n)&&!e.right.is_negative_zero())return e.right}break;case"*":if(e.left.value==1)return c(We,e,{operator:"+",expression:e.right}).optimize(n);break}if(e.right instanceof dn&&!e.left.is_constant())switch(e.operator){case"+":if(e.right.value==0){if(e.left.is_boolean(n))return c(We,e,{operator:"+",expression:e.left}).optimize(n);if(e.left.is_number(n)&&!e.left.is_negative_zero())return e.left}break;case"-":if(e.right.value==0)return c(We,e,{operator:"+",expression:e.left}).optimize(n);break;case"/":if(e.right.value==1)return c(We,e,{operator:"+",expression:e.left}).optimize(n);break}}}if(n.option("typeofs"))switch(e.operator){case"&&":Ke(e.left,e.right,null);break;case"||":Ke(e.left,null,e.right);break}if(n.option("unsafe")){var Q=b(e.right);if(k&&Q&&(e.operator=="=="||e.operator=="!=")&&e.left instanceof dn&&e.left.value==0)return(e.operator=="=="?c(We,e,{operator:"!",expression:e.right}):e.right).optimize(n);var Ce=b(e.left);if(n.option("comparisons")&&x()){var fn=c(We,e,{operator:"!",expression:c(We,e,{operator:"~",expression:Ce?e.left:e.right})});switch(e.operator){case"<":if(Ce)break;case"<=":case"!=":fn=c(We,e,{operator:"!",expression:fn});break}return fn.optimize(n)}}return Hi(n,e);function p(B){var te=!1;return B.walk(new un(function(C){if(te)return!0;if(C instanceof ze){if(C.left instanceof on)return te=!0}else if(C instanceof at&&Sa[C.operator]&&C.expression instanceof on)return te=!0})),te}function R(B,te){switch(B){case"-":return te=="+"?"-":"+";case"/":return te=="*"?"/":"*";default:return te}}function S(B,te,C,ne){return B=="+"&&(!te.is_boolean(n)&&!te.is_number(n)&&(te=c(We,te,{operator:"+",expression:te})),!C.is_boolean(n)&&!C.is_number(n)&&(C=c(We,C,{operator:"+",expression:C}))),c(ae,ne,{operator:B,left:te,right:C})}function b(B){for(;B instanceof ze&&B.operator=="=";)B=B.right;return B.TYPE=="Call"&&B.expression instanceof Mn&&Zs[B.expression.property]}function x(){switch(e.operator){case"<=":return Q&&e.left instanceof dn&&e.left.value==0;case"<":if(Ce&&e.right instanceof dn&&e.right.value==0)return!0;case"==":case"!=":return Q?e.left instanceof dn&&e.left.value==-1||e.left instanceof We&&e.left.operator=="-"&&e.left.expression instanceof dn&&e.left.expression.value==1:!1}}function P(){return e.left.is_constant()||e.right.is_constant()||!e.left.has_side_effects(n)&&!e.right.has_side_effects(n)}function U(B){if(P()){B&&(e.operator=B);var te=e.left;e.left=e.right,e.right=te}}}),t(ja,function(e){return e});function _f(e,n,r){var i=0,f=e.self();do if(f===r||w(f)&&f.name&&f.name.definition()===n)return f;while(f=e.parent(i++))}function Ka(e){var n=e.scope.resolve();return Ve(e.references,function(r){return n===r.scope.resolve()})}t(X,function(e,n){if(!n.option("ie")&&Y(e)&&!(e.scope.resolve().uses_with&&n.find_parent(kr)))switch(e.name){case"undefined":return c(yt,e).optimize(n);case"NaN":return c(Ya,e).optimize(n);case"Infinity":return c(Gr,e).optimize(n)}var r=n.parent();if(n.option("reduce_vars")&&Gi(n.self(),r)!==n.self()){var i=e.definition(),f=e.fixed_value(),o=i.single_use&&!(r instanceof hn&&r.is_expr_pure(n));if(o)if(w(f)){if((i.scope!==e.scope.resolve(!0)||i.in_loop)&&(!n.option("reduce_funcs")||i.escaped.depth==1||f.inlined))o=!1;else if(i.redefined())o=!1;else if(_f(n,i,f))o=!1;else if(f.name&&f.name.definition()!==i)o=!1;else if(f.parent_scope!==e.scope||Tr(i)){if(!ws(f,n))o=!1;else if((o=f.is_constant_expression(e.scope))=="f"){var g=e.scope;do(g instanceof kt||g instanceof St)&&(g.inlined=!0);while(g=g.parent_scope)}}else(f.name&&(f.name.name=="await"&&wi(f)||f.name.name=="yield"&&Ui(f))||f.has_side_effects(n)||f instanceof Nt&&(n.option("ie")||!f.is_constant_expression(e.scope)))&&(o=!1);o&&(f.parent_scope=e.scope)}else(!f||i.recursive_refs>0||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(o=!1);if(o){if(i.single_use=!1,f._squeezed=!0,f.single_use=!0,f instanceof Si&&(f=Rr(f)),f instanceof kt&&(f=si(f)),w(f)){var v=[],g=e.scope;do if(v.push(g),g===i.scope)break;while(g=g.parent_scope);f.enclosed.forEach(function(le){if(!f.variables.has(le.name))for(var Q=0;Q<v.length;Q++){var Ce=v[Q];if(!zi(Ce.enclosed,le))return;Ce.var_names().set(le.name,!0)}})}var y;if(i.recursive_refs>0){y=f.clone(!0);var T=y.name.definition(),k=y.variables.get(y.name.name),z=k&&k.orig[0],$,N;y instanceof Nt?($="def_function",N=Ia):($="def_variable",N=Ei),z instanceof N||(z=c(N,y.name),z.scope=y,y.name=z,k=y[$](z),k.recursive_refs=i.recursive_refs),y.walk(new un(function(fe){if(fe instanceof et){if(fe!==z){var le=fe.definition();le.orig.push(fe),le.eliminated++}return}if(fe instanceof X){var le=fe.definition();if(le===T)fe.thedef=le=k;else{le.single_use=!1;var Q=fe.fixed_value();w(Q)&&Q.name&&Q.name.definition()===le&&le.scope===Q.name.scope&&f.variables.get(Q.name.name)===le&&(Q.name=Q.name.clone(),fe.thedef=le=y.variables.get(Q.name.name)||y[$](Q.name))}le.references.push(fe)}}))}else f instanceof rn?(n.push(f),y=f.optimize(n),n.pop()):y=f.optimize(n),y=y.transform(new ei(function(fe,le){return fe instanceof rn||(fe=fe.clone(),le(fe,this)),fe}));return i.replaced++,y}var D;if(f&&(D=e.fixed||i.fixed).should_replace!==!1){var W,j;if(f instanceof Ha?!Tr(i)&&Ka(i)&&!tn(i)&&(j=f):(W=f.evaluate(n,!0))!==f&&typeof W!="function"&&(W===null||typeof W!="object"||n.option("unsafe_regexp")&&W instanceof RegExp&&!i.cross_loop&&Ka(i))&&(j=_i(W,f)),j){if(D.should_replace===void 0){var ee=j.optimize(n).print_to_string().length;qe(f)||(ee=Math.min(ee,f.print_to_string().length));var Se=i.name.length;if(n.option("unused")&&!n.exposed(i)){var $e=i.references.length-i.replaced-i.assignments;$e=Math.min($e,i.references.filter(function(fe){return fe.fixed===D}).length),Se+=(Se+2+ee)/Math.max(1,$e)}D.should_replace=ee-Math.floor(Se)<n.eval_threshold}if(D.should_replace){var y;return qe(f)?(y=j.optimize(n),y===j&&(y=y.clone(!0))):(y=qi(j.optimize(n),f),(y===j||y===f)&&(y=y.clone(!0))),i.replaced++,y}}}}return e;function tn(fe){for(var le=e.scope;le!==fe.scope;){if(le instanceof Nt)return!0;le=le.parent_scope}}function qe(fe){var le;return fe.walk(new un(function(Q){if(Q instanceof X&&(le=!0),le)return!0})),le}});function Ff(e,n){return e.option("unsafe")&&n instanceof Mn&&n.property=="raw"&&Y(n.expression)&&n.expression.name=="String"}function Mf(e){var n=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(r,i){var f=hs(i);if(typeof f=="string")return f;n=!0}),!n)return e}t(Yt,function(e,n){if(!n.option("templates"))return e;var r=e.tag;if(!r||Ff(n,r)){for(var i=[],f=[],o=0,g;o<e.strings.length;o++){var v=e.strings[o];if(!r){var y=Mf(v);y&&(v=W(y))}if(o>0){var T=e.expressions[o-1],k=j(T);if(k){var z=f[f.length-1],$=z+k+v,N;if(r||typeof(N=Mf($))==g){f[f.length-1]=N?W(N):$;continue}}i.push(T)}f.push(v),r||(g=typeof y)}if(!r&&f.length>1){if(f[f.length-1]=="")return c(ae,e,{operator:"+",left:c(Yt,e,{expressions:i.slice(0,-1),strings:f.slice(0,-1)}).transform(n),right:i[i.length-1]}).optimize(n);if(f[0]==""){for(var D=c(ae,e,{operator:"+",left:c(Dn,e,{value:""}),right:i[0]}),o=1;f[o]==""&&o<i.length;o++)D=c(ae,e,{operator:"+",left:D,right:i[o]});return or(n,e,c(ae,e,{operator:"+",left:D.transform(n),right:c(Yt,e,{expressions:i.slice(o),strings:f.slice(o)}).transform(n)}).optimize(n))}}e.expressions=i,e.strings=f}return Hi(n,e);function W(ee){return ee.replace(/\r|\\|`|\${/g,function(Se){return"\\"+(Se=="\r"?"r":Se)})}function j(ee){var Se=ee.evaluate(n);if(Se!==ee&&!(r&&/\r|\\|`/.test(Se))&&(Se=W(""+Se),!(Se.length>ee.print_to_string().length+3)))return Se}});function Zf(e,n){return e instanceof X||e.TYPE===n.TYPE}t(yt,function(e,n){if(n.option("unsafe_undefined")){var r=G(n).find_variable("undefined");if(r){var i=c(X,e,{name:"undefined",scope:r.scope,thedef:r});return i.is_undefined=!0,i}}var f=Gi(n.self(),n.parent());return f&&Zf(f,e)?e:c(We,e,{operator:"void",expression:c(dn,e,{value:0})})}),t(Gr,function(e,n){var r=Gi(n.self(),n.parent());return r&&Zf(r,e)||n.option("keep_infinity")&&!r&&!G(n).find_variable("Infinity")?e:c(ae,e,{operator:"/",left:c(dn,e,{value:1}),right:c(dn,e,{value:0})})}),t(Ya,function(e,n){var r=Gi(n.self(),n.parent());return r&&Zf(r,e)||!r&&!G(n).find_variable("NaN")?e:c(ae,e,{operator:"/",left:c(dn,e,{value:0}),right:c(dn,e,{value:0})})});function If(e,n){var r=!1,i=new un(function(o){if(r)return!0;if(o instanceof X&&_r(o.definition(),n))return r=!0}),f=new un(function(o){if(r)return!0;if(o instanceof yn&&o!==e){if(!(o.name||wi(o)||Ui(o))){var g=f.parent();if(g instanceof hn&&g.expression===o)return}return o.walk(i),!0}});return e.walk(f),r}var eu=jn("+ - * / % >> << >>> | ^ &"),nu=jn("* | ^ &");t(ze,function(e,n){if(n.option("dead_code")){if(e.left instanceof on){if(e.operator=="="){var r=e.left.expression;if(e.left.equals(e.right)){var i=r.defined;r.defined=!1;var f=!e.left.has_side_effects(n);if(r.defined=i,f)return e.right}if(r instanceof yn||!n.has_directive("use strict")&&r instanceof st&&!r.may_throw_on_access(n)){var o=e.left instanceof Mn?e.right:pe(e,[e.left.property,e.right]);return xt(n.parent(),e,o).optimize(n)}}}else if(e.left instanceof X&&Be(e.left,n)){var g;if(e.operator=="="&&e.left.equals(e.right)&&!((g=n.parent())instanceof We&&g.operator=="delete"))return e.right;if(e.left.is_immutable())return $e();var v=e.left.definition(),y=v.scope.resolve(),T=y===n.find_parent(yn),k=0,z;if(g=n.self(),!(y.uses_arguments&&Tr(v))||n.has_directive("use strict"))do{if(z=g,g=n.parent(k++),g instanceof ze){if(g.left instanceof X&&g.left.definition()===v){if(ee(k,g,!T))break;return $e(v)}if(g.left.match_symbol(function(tn){if(tn instanceof on)return!0}))break;continue}if(g instanceof Mt){if(!T||ee(k,g)||If(y,[v]))break;return $e(v)}if(g instanceof He){if(!T||If(y,[v]))break;var $;do if($=g,g=n.parent(k++),g===y&&Di(g.body,$))return $e(v);while(j($,g));break}if(g instanceof Vn){if(!(g.name instanceof et)||g.name.definition()!==v)continue;if(ee(k,g))break;return $e(v)}}while(W(z,g))}}if(n.option("sequences")){var N=e.lift_sequences(n);if(N!==e)return N.optimize(n)}if(n.option("assignments")){if(e.operator=="="&&e.left instanceof X&&e.right instanceof ae){if(e.right.left instanceof X&&e.right.left.name==e.left.name&&eu[e.right.operator])return Se(e.right.right);if(e.right.right instanceof X&&e.right.right.name==e.left.name&&nu[e.right.operator]&&!e.right.left.has_side_effects(n))return Se(e.right.left)}if((e.operator=="-="||e.operator=="+="&&(e.left.is_boolean(n)||e.left.is_number(n)))&&e.right instanceof dn&&e.right.value==1){var D=e.operator.slice(0,-1);return c(We,e,{operator:D+D,expression:e.left})}}return Hi(n,e);function W(tn,qe){if(qe instanceof ae)switch(tn){case qe.left:return qe.right.is_constant_expression(y);case qe.right:return!0;default:return!1}if(qe instanceof bn)switch(tn){case qe.condition:return qe.consequent.is_constant_expression(y)&&qe.alternative.is_constant_expression(y);case qe.consequent:case qe.alternative:return!0;default:return!1}if(qe instanceof Ze){var fe=qe.expressions,le=fe.indexOf(tn);if(le<0)return!1;for(var Q=fe.length;--Q>le;)if(!fe[Q].is_constant_expression(y))return!1;return!0}return qe instanceof We}function j(tn,qe){if(qe instanceof Ge||qe instanceof er||qe instanceof sa)return Di(qe.body,tn);if(qe instanceof Un)return qe.body===tn||qe.alternative===tn;if(qe instanceof ai)return qe.bfinally?qe.bfinally===tn:qe.bcatch===tn}function ee(tn,qe,fe){var le=e.right;e.right=c(Pr,le);var Q=qe.may_throw(n);return e.right=le,ce(n,tn,qe,y,Q,fe)}function Se(tn){var qe=e.left.fixed;return qe&&(qe.to_binary=ie(function(fe){return fe.left},qe)),c(ze,e,{operator:e.right.operator+"=",left:e.left,right:tn})}function $e(tn){return tn&&(tn.fixed=!1),(e.operator!="="?c(ae,e,{operator:e.operator.slice(0,-1),left:e.left,right:e.right}):xt(n.parent(),e,e.right)).optimize(n)}}),t(bn,function(e,n){if(n.option("sequences")&&e.condition instanceof Ze){var r=e.condition.expressions.slice(),i=e.clone();return i.condition=r.pop(),r.push(i),pe(e,r).optimize(n)}if(!n.option("conditionals"))return e;var f=e.condition;if(n.option("booleans")&&!f.has_side_effects(n)&&Xn(n,f),f=zn(n,f),f){if(!(f instanceof M))return M.warn("Condition always true [{start}]",e),pe(e,[e.condition,e.consequent]).optimize(n)}else return M.warn("Condition always false [{start}]",e),pe(e,[e.condition,e.alternative]).optimize(n);var o=Oa(n),g=f.negate(n,o);(o?la:qi)(f,g)===g&&(e=c(bn,e,{condition:g,consequent:e.alternative,alternative:e.consequent}),g=f,f=e.condition);var v=e.consequent,y=e.alternative,T=vf(f,n);if(Da(n,T)){if(T.equals(v))return c(ae,e,{operator:"||",left:f,right:y}).optimize(n);if(T.equals(y))return c(ae,e,{operator:"&&",left:f,right:v}).optimize(n)}var k=v.tail_node();if(k instanceof ze){var z=k.operator=="=",$=z?y.tail_node():y;if((z||v===k)&&$ instanceof ze&&k.operator==$.operator&&k.left.equals($.left)&&(z&&k.left instanceof X||!f.has_side_effects(n)&&Q(v)&&Q(y)))return c(ze,e,{operator:k.operator,left:k.left,right:c(bn,e,{condition:f,consequent:Ce(v),alternative:Ce(y)})})}var $=y.tail_node();if(k.equals($))return pe(e,v.equals(y)?[f,v]:[c(bn,e,{condition:f,consequent:fn(v),alternative:fn(y)}),$]).optimize(n);var N=le(v,y,!0);if(N)return N;var D;if(v instanceof hn&&y.TYPE==v.TYPE&&(D=tn(v,y))>=0&&v.expression.equals(y.expression)&&!f.has_side_effects(n)&&!v.expression.has_side_effects(n)){var i=v.clone(),W=v.args[D];return i.args[D]=W instanceof On?c(On,e,{expression:c(bn,e,{condition:f,consequent:W.expression,alternative:y.args[D].expression})}):c(bn,e,{condition:f,consequent:W,alternative:y.args[D]}),i}if(k instanceof bn&&k.alternative.equals(y))return c(bn,e,{condition:c(ae,e,{left:f,operator:"&&",right:qe(v,k,"condition")}),consequent:k.consequent,alternative:Yn(k.alternative,y)});if(k instanceof bn&&k.consequent.equals(y))return c(bn,e,{condition:c(ae,e,{left:g,operator:"||",right:qe(v,k,"condition")}),consequent:Yn(k.consequent,y),alternative:k.alternative});if($ instanceof bn&&v.equals($.consequent))return c(bn,e,{condition:c(ae,e,{left:f,operator:"||",right:qe(y,$,"condition")}),consequent:Yn(v,$.consequent),alternative:$.alternative});if($ instanceof bn&&v.equals($.alternative))return c(bn,e,{condition:c(ae,e,{left:g,operator:"&&",right:qe(y,$,"condition")}),consequent:$.consequent,alternative:Yn(v,$.alternative)});if(k instanceof ae&&k.operator=="&&"&&k.right.equals(y))return c(ae,e,{operator:"&&",left:c(ae,e,{operator:"||",left:g,right:qe(v,k,"left")}),right:Yn(k.right,y)}).optimize(n);if(k instanceof ae&&k.operator=="||"&&k.right.equals(y))return c(ae,e,{operator:"||",left:c(ae,e,{operator:"&&",left:f,right:qe(v,k,"left")}),right:Yn(k.right,y)}).optimize(n);if($ instanceof ae&&$.operator=="&&"&&$.right.equals(v))return c(ae,e,{operator:"&&",left:c(ae,e,{operator:"||",left:f,right:qe(y,$,"left")}),right:Yn(v,$.right)}).optimize(n);if($ instanceof ae&&$.operator=="||"&&$.right.equals(v))return c(ae,e,{operator:"||",left:c(ae,e,{operator:"&&",left:g,right:qe(y,$,"left")}),right:Yn(v,$.right)}).optimize(n);var j=n.option("booleans")&&n.in_boolean_context();if(Se(v))return $e(y)?ee(f):c(ae,e,{operator:"||",left:ee(f),right:y}).optimize(n);if($e(v))return Se(y)?ee(f.negate(n)):c(ae,e,{operator:"&&",left:ee(f.negate(n)),right:y}).optimize(n);if(Se(y))return c(ae,e,{operator:"||",left:ee(f.negate(n)),right:v}).optimize(n);if($e(y))return c(ae,e,{operator:"&&",left:ee(f),right:v}).optimize(n);return n.option("typeofs")&&Ke(f,v,y),e;function ee(p){return p.is_boolean(n)?p:c(We,p,{operator:"!",expression:p.negate(n)})}function Se(p){return p instanceof Ir||j&&p instanceof st&&p.value||p instanceof We&&p.operator=="!"&&p.expression instanceof st&&!p.expression.value}function $e(p){return p instanceof Fr||j&&(p instanceof st&&!p.value||p instanceof We&&p.operator=="void"&&!p.expression.has_side_effects(n))||p instanceof We&&p.operator=="!"&&p.expression instanceof st&&p.expression.value}function tn(p,R){var S=p.args,b=R.args,x=S.length;if(x!=b.length)return-2;for(var P=0;P<x;P++)if(!S[P].equals(b[P])){if(S[P]instanceof On!=b[P]instanceof On)return-3;for(var U=P+1;U<x;U++)if(!S[U].equals(b[U]))return-2;return P}return-1}function qe(p,R,S){if(p===R)return R[S];var b=p.expressions.slice(0,-1);return b.push(R[S]),pe(p,b)}function fe(p,R){if(p.TYPE==R.TYPE&&p.optional==R.optional){if(p instanceof hn)return tn(p,R)!=-1?void 0:p.TYPE!="Call"||!(p.expression instanceof on||R.expression instanceof on)||fe(p.expression,R.expression);if(p instanceof on){var S=p.property,b=R.property;return(S instanceof M?S.equals(b):S==b)&&!(p.expression instanceof ma||R.expression instanceof ma)}}}function le(p,R,S){var b=p.tail_node(),x=R.tail_node();if(!fe(b,x))return!S&&c(bn,e,{condition:f,consequent:p,alternative:R});var P=b.clone(),U=qe(p,b,"expression"),B=qe(R,x,"expression"),te=le(U,B);return b.expression instanceof Ze&&(te=xt(b,b.expression,te)),P.expression=te,P}function Q(p){return p===p.tail_node()||Ve(p.expressions.slice(0,-1),function(R){return!R.has_side_effects(n)})}function Ce(p){if(!(p instanceof Ze))return p.right;var R=p.expressions.slice();return R.push(R.pop().right),pe(p,R)}function fn(p){return p instanceof Ze?pe(p,p.expressions.slice(0,-1)):c(dn,p,{value:0})}}),t(Ba,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return c(dn,e,{value:+e.value});var r=n.parent();return r instanceof ae&&(r.operator=="=="||r.operator=="!=")?(M.warn("Non-strict equality against boolean: {operator} {value} [{start}]",{operator:r.operator,value:e.value,start:r.start}),c(dn,e,{value:+e.value})):c(We,e,{operator:"!",expression:c(dn,e,{value:1-e.value})})}),t(On,function(e,n){var r=e.expression;return n.option("spreads")&&r instanceof xn&&!(n.parent()instanceof ft)?Ct.splice(r.elements.map(function(i){return i instanceof Jt?c(yt,i).optimize(n):i})):e});function ks(e,n){if(!e)return!1;var r=n.parent();return r.TYPE!="Call"||r.expression!==n.self()?!0:e instanceof X&&(e=e.fixed_value(),!e)?!1:e instanceof yn&&!e.contains_this()}t(ht,function(e,n){var r=e.expression,i=e.property,f=Aa(e,n);if(f)return f;if(n.option("properties")){var o=i.evaluate(n);if(o!==i){if(typeof o=="string")if(o=="undefined")o=void 0;else{var g=parseFloat(o);g.toString()==o&&(o=g)}i=e.property=qi(i,_i(o,i).transform(n));var v=""+o;if(xa(v)&&v.length<=i.print_to_string().length+1)return c(Mn,e,{optional:e.optional,expression:r,property:v,quoted:!0}).optimize(n)}}var y=n.parent(),T=Gi(n.self(),y),k,z,$,N;if(n.option("arguments")&&r instanceof X&&J(k=r.definition())&&!r.in_arg&&i instanceof dn&&Math.floor(N=i.value)==N&&(z=k.scope)===Ce()&&z.uses_arguments<(T?2:3)){y instanceof We&&y.operator=="delete"&&(k.deleted||(k.deleted=[]),k.deleted[N]=!0);var D=z.argnames[N];if(k.deleted&&k.deleted[N])D=null;else if(D){var W;(!(D instanceof $n)||D.name=="await"||r.scope.find_variable(D.name)!==(W=D.definition())||(n.has_directive("use strict")||z.name||z.rest||!($ instanceof hn&&N<$.args.length&&Ve($.args.slice(0,N+1),function(p){return!(p instanceof On)}))||!Ve(z.argnames,function(p){return p instanceof $n}))&&(fn()||W.assignments||W.orig.length>1))&&(D=null)}else if((T||!fn())&&N<z.argnames.length+5&&n.drop_fargs(z,$)&&!z.rest)for(;N>=z.argnames.length;)D=z.make_var($n,z,"argument_"+z.argnames.length),z.argnames.push(D);if(D&&bf(function(p){return p.name===D.name},z.argnames)===D){T&&k.reassigned--;var j=c(X,D);return j.reference(),D.unused=void 0,j}}if(T)return e;if(n.option("sequences")&&y.TYPE!="Call"&&!(y instanceof Xt&&y.init===e)){var ee=Dr(e);if(ee!==e)return ee.optimize(n)}if(o!==i){var Se=e.flatten_object(v,n);Se&&(r=e.expression=Se.expression,i=e.property=Se.property)}var $e;if(n.option("properties")&&n.option("side_effects")&&i instanceof dn&&r instanceof xn&&Ve($e=r.elements,function(p){return!(p instanceof On)})){var N=i.value,tn=$e[N];if(ks(tn,n)){for(var qe=tn instanceof Jt,fe=!qe,le=[],Q=$e.length;--Q>N;){var g=$e[Q].drop_side_effect_free(n);g&&(le.unshift(g),fe&&g.has_side_effects(n)&&(fe=!1))}for(fe||le.unshift(tn);--Q>=0;){var g=$e[Q].drop_side_effect_free(n);g?le.unshift(g):qe?le.unshift(c(Jt,$e[Q])):N--}return fe?(le.push(tn),pe(e,le).optimize(n)):c(ht,e,{expression:c(xn,r,{elements:le}),property:c(dn,i,{value:N})})}}return Hi(n,e);function Ce(){for(var p=0,R;R=n.parent(p++);)if(R instanceof yn){if(R instanceof Mi)return;if(qt(R))continue;return $=n.parent(p),R}}function fn(){return!n.option("reduce_vars")||k.reassigned}}),St.DEFMETHOD("contains_super",function(){var e=!1,n=this;return n.walk(new un(function(r){if(e)return!0;if(r instanceof ma)return e=!0;if(r!==n&&r instanceof rn&&!qt(r))return!0})),e}),function(e){e(Zi,An),e(gr,An),e(M,function(){var n=!1,r=this;return r.walk(new un(function(i){if(n)return!0;if(i instanceof Ha)return n=!0;if(i!==r&&i instanceof rn&&!qt(i))return!0})),n})}(function(e,n){e.DEFMETHOD("contains_this",n)});function Rf(e){return e instanceof fi&&typeof e.key=="string"&&!(e instanceof Qr&&e.value.contains_super())}on.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&e!=="__proto__"){var r=this,i=r.expression;if(i instanceof ft)for(var f=i.properties,o=f.length;--o>=0;){var g=f[o];if(g.key===e){if(!Ve(f,Rf)||!ks(g.value,n))return;for(var v,y,T=[],k=0;k<f.length;k++){var z=f[k].value;if(f[k]instanceof Qr){var $=!(z.uses_arguments||Ui(z)||z.contains_this());if($){y||(y=n.find_parent(rn));var N=Va(n,y);z.each_argname(function(W){N[W.name]&&($=!1)})}var D;if($)D=wi(z)?gr:Zi;else if(o!=k||(v=n.parent())instanceof hn&&v.expression===r)D=z.CTOR;else return;z=c(D,z)}T.push(z)}return c(ht,r,{expression:c(xn,i,{elements:T}),property:c(dn,r,{value:o})})}}}}),t(Mn,function(e,n){(e.property=="arguments"||e.property=="caller")&&M.warn("Function.prototype.{property} not supported [{start}]",e);var r=n.parent();if(Gi(n.self(),r))return e;var i=Aa(e,n);if(i)return i;if(n.option("sequences")&&r.TYPE!="Call"&&!(r instanceof Xt&&r.init===e)){var f=Dr(e);if(f!==e)return f.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof Mn&&e.expression.property=="prototype"){var o=e.expression.expression;if(Y(o))switch(o.name){case"Array":e.expression=c(xn,e.expression,{elements:[]});break;case"Function":e.expression=c(Tt,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=c(dn,e.expression,{value:0});break;case"Object":e.expression=c(ft,e.expression,{properties:[]});break;case"RegExp":e.expression=c(ir,e.expression,{value:/t/});break;case"String":e.expression=c(Dn,e.expression,{value:""});break}}var g=e.flatten_object(e.property,n);return g?g.optimize(n):Hi(n,e)}),t(At,function(e,n){return n.option("rests")&&e.rest instanceof At?c(At,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),t(Pt,function(e,n){if(n.option("objects")){var r=e.key;r instanceof M&&(r=r.evaluate(n),r!==e.key&&(e.key=""+r))}return e}),t(ft,function(e,n){if(!n.option("objects"))return e;var r=!1,i=!1,f=!1,o=n.has_directive("use strict"),g=[],v=new Jn,y=[];if(e.properties.forEach(function($){if(!($ instanceof On))return z($);i=!0;var N=$.expression;n.option("spreads")&&N instanceof ft&&Ve(N.properties,function(D){return D instanceof ua||D instanceof On?!1:D.key!=="__proto__"||D instanceof ea?!0:!D.value.has_side_effects(n)})?(r=!0,N.properties.forEach(function(D){var W=D.key,j=D instanceof ea;if(W==="__proto__"){if(!j)return;W=_i(W,D)}z(j?c(fi,D,{key:W,value:c(yt,D).optimize(n)}):D)})):(f=!0,k(),y.push($))}),k(),!r)return e;if(i&&f&&y.length==1){var T=y[0];T instanceof Ci&&T.key instanceof dn&&(T.key=""+T.key.value)}return c(ft,e,{properties:y});function k(){g.forEach(function($){var N=v.get($);switch(N.length){case 0:return;case 1:return y.push(N[0])}r=!0;var D=o&&!f&&N.pop();y.push(N.length==1?N[0]:c(fi,e,{key:N[0].key,value:pe(e,N.map(function(W){return W.value}))})),D&&y.push(D),N.length=0}),g=[],v=new Jn}function z($){var N=$.key;N instanceof M&&(i=!0,N=N.evaluate(n),N===$.key||N==="__proto__"?f=!0:N=$.key=""+N),Rf($)?($.value.has_side_effects(n)&&k(),g.push(N),v.add(N,$)):(k(),y.push($)),i&&!f&&typeof N=="string"&&ge.test(N)&&(f=!0,v.has(N)&&($=v.get(N)[0]),$.key=c(dn,$,{value:+N}))}});function jf(e){var n=e.definition().redefined();return n&&(e=e.clone(),e.thedef=n),e}function Xa(e,n){var r=!1;return n.walk(new un(function(i){if(r)return!0;if(i instanceof X&&e.variables.get(i.name)===i.definition())return r=!0})),r}function xs(e,n){var r=[];e.references.forEach(function(i){var f=i.fixed;!f||!zi(r,f)||(f.assigns?f.assigns.unshift(n):f.assigns=[n])})}function Es(e,n){var r=c(X,n),i=c(ze,n,{operator:"=",left:r,right:c(yt,n).transform(e)}),f=n.definition();return f.fixed&&(r.fixed=function(){return i.right},r.fixed.assigns=[i],xs(f,i)),f.assignments++,f.references.push(r),i}(function(e){e(M,Gt),e(ze,Gt),e(wt,function(r,i,f,o){if(r.option("awaits")){var g=this,v=g.expression.try_inline(r,i,f,o,!0);if(v)return f||ui(v,function(y){y.in_bool=!1;var T=y.value;T instanceof wt||(y.value=c(wt,g,{expression:T||c(yt,y).transform(r)}))}),Zt(v)?v:c(Ge,g,{body:[v,c(He,g,{body:c(wt,g,{expression:c(dn,g,{value:0})})})]})}}),e(ae,function(r,i,f,o,g){if(f===void 0)return;var v=this,y=v.operator;if(!it[y])return;var T=v.right.try_inline(r,i,f,o,g);if(!T)return;return c(Un,v,{condition:k(v.left),body:T,alternative:f?null:c(tt,v,{value:c(yt,v).transform(r)})});function k(z){switch(y){case"&&":return z;case"||":return z.negate(r);case"??":return c(ae,v,{operator:"==",left:c(Pr,v),right:z})}}}),e(Ge,function(r,i,f,o){if(!f&&this.variables){var g=this.body,v=g.length-1;if(!(v<0)){var y=g[v].try_inline(r,this,f,o);if(y)return g[v]=y,this}}}),e(hn,function(r,i,f,o,g){if(r.option("inline")<4)return;var v=this;if(v.is_expr_pure(r))return;var y=v.expression;if(!(y instanceof St)||y.name||y.single_use||y.uses_arguments||y.pinned()||Ui(y))return;var T=qt(y),k=T&&y.value?[y.first_statement()]:y.body;if(k[0]instanceof ci||y.contains_this())return;i||(i=G(r));var z=new Jn;for(z.set("NaN",!0);!(i instanceof rn);)i.variables.each(function(fe){z.set(fe.name,!0)}),i=i.parent_scope;if(!_r(i,r.stack)||i.pinned()&&y.variables.size()>(T?0:1))return;if(i instanceof Et){if(y.variables.size()>(T?0:1)&&(!r.toplevel.vars||y.functions.size()>0&&!r.toplevel.funcs))return;z.set("arguments",!0)}var $=!g&&wi(y);if($&&(!r.option("awaits")||!wi(i)||v.may_throw(r)))return;var N=i.var_names();if(o&&(o=[]),!y.variables.all(function(fe,le){return o&&o.push(fe),!z.has(le)&&!N.has(le)?!0:!T&&le=="arguments"&&fe.orig.length==1})||o&&o.length>0&&If(y,o))return;var D=!0;if(!Ve(y.argnames,function(fe){var le=!1,Q=new un(function(Ce){if(le)return!0;if(Ce instanceof Fn)return Xa(y,Ce.value)?le=!0:(Ce.name.walk(Q),!0);if(Ce instanceof Pt)return Ce.key instanceof M&&Xa(y,Ce.key)?le=!0:(Ce.value.walk(Q),!0);if(Ce instanceof $n&&!Ve(Ce.definition().orig,function(fn){return!(fn instanceof nr)}))return le=!0});return fe.walk(Q),le?!1:(fe instanceof $n||(D=!1),!0)}))return;if(y.rest){if(Xa(y,y.rest))return;D=!1}var W;if(f?W=function(fe){var le=!1;return fe.walk(new un(function(Q){if(le)return!0;if($&&(Q instanceof wt||Q instanceof Na)||Q instanceof tt)return le=!0;if(Q instanceof rn)return!0})),!le}:(g||wi(y)||m(i))&&(W=function(fe){var le=!1,Q=new un(function(Ce){if(le)return!0;if(Ce instanceof tt)return le=!0;if(Ce instanceof rn)return!0});return fe.walk(new un(function(Ce){if(le)return!0;if(Ce instanceof ai)return Ce.bfinally?(Ve(Ce.body,function(fn){return fn.walk(Q),!le})&&Ce.bcatch&&Ce.bcatch.walk(Q),!0):void 0;if(Ce instanceof rn)return!0})),!le}),W&&!Ve(k,W)||!Nf(y,Va(r,i)))return;y.functions.each(function(fe,le){i.functions.set(le,fe)});var j=[];y.variables.each(function(fe,le){if(!(!T&&le=="arguments"&&fe.orig.length==1)&&(N.set(le,!0),i.enclosed.push(fe),i.variables.set(le,fe),fe.single_use=!1,!!o&&fe.references.length!=fe.replaced)){switch(fe.orig.length-fe.eliminated){case 0:return;case 1:if(y.functions.has(le))return}if(Ve(fe.orig,function(Ce){return Ce instanceof xi?!1:Ce instanceof $n?!Ce.unused&&fe.scope.resolve()!==y:!(Ce instanceof Nr)})){var Q=fe.orig[0];Q instanceof tr||(j.push(c(He,Q,{body:Es(r,jf(Q))})),fe.first_decl=null)}}});var ee=Object.create(null),Se=new Jn;if(D&&Ve(v.args,function(fe){return!(fe instanceof On)})){var $e=v.args.slice();y.argnames.forEach(function(fe){var le=$e.shift();if(fe.unused){le&&j.push(c(He,v,{body:le}));return}var Q=c(Vn,v,{name:fe.convert_symbol(vi,qe),value:le||c(yt,v).transform(r)});fe instanceof $n&&xs(fe.definition(),Q),j.push(c(bt,v,{definitions:[Q]}))}),$e.length&&j.push(c(He,v,{body:pe(v,$e)}))}else j.push(c(bt,v,{definitions:[c(Vn,v,{name:c(At,v,{elements:y.argnames.map(function(fe){return fe.unused?c(Jt,fe):fe.convert_symbol(vi,qe)}),rest:y.rest&&y.rest.convert_symbol(vi,qe)}),value:c(xn,v,{elements:v.args.slice()})})]}));Se.each(function(fe,le){var Q=ee[le];[].unshift.apply(Q.orig,fe),Q.eliminated+=fe.length}),[].push.apply(j,o?k.filter(function(fe){if(!(fe instanceof kt))return!0;var le=c(vi,jf(fe.name)),Q=le.definition();return Q.fixed=!1,Q.orig.push(le),Q.eliminated++,j.push(c(bt,fe,{definitions:[c(Vn,fe,{name:le,value:si(fe,!0)})]})),!1}):k);var tn=c(Ge,v,{body:j});return f||($&&ui(tn,function(fe){var le=fe.value;gi(le)||(fe.value=c(wt,v,{expression:le}))}),j.push(c(tt,v,{value:m(i)?c(yt,v).transform(r):null}))),tn;function qe(fe,le){var Q=le.definition();ee[Q.id]=Q,Se.add(Q.id,fe)}}),e(bn,function(r,i,f,o,g){var v=this,y=v.consequent.try_inline(r,i,f,o,g),T=v.alternative.try_inline(r,i,f,o,g);if(!y&&!T)return;return c(Un,v,{condition:v.condition,body:y||k(v.consequent),alternative:T||k(v.alternative)});function k(z){return f?c(He,z,{body:z}):c(tt,z,{value:z})}}),e(jt,function(r,i,f,o){var g=this.body.try_inline(r,i,!0,!0);g&&(this.body=g);var v=this.init;return v&&(v=v.try_inline(r,i,!0,o),v)?(this.init=null,v instanceof Ge?(v.body.push(this),v):c(Ge,v,{body:[v,this]})):g&&this}),e(Xt,function(r,i,f,o){var g=this.body.try_inline(r,i,!0,!0);g&&(this.body=g);var v=this.object;if(v instanceof Ze){var y=n(r,i,!0,o,!1,v,1);if(y)return this.object=v.tail_node(),y.body.push(this),y}return g&&this}),e(Un,function(r,i,f,o){var g=this.body.try_inline(r,i,f,o);g&&(this.body=g);var v=this.alternative;v&&(v=v.try_inline(r,i,f,o),v&&(this.alternative=v));var y=this.condition;if(y instanceof Ze){var T=n(r,i,!0,o,!1,y,1);if(T)return this.condition=y.tail_node(),T.body.push(this),T}return(g||v)&&this}),e(Ii,function(r,i,f,o){var g=this.body.try_inline(r,i,!0,!0);if(g)return this.body=g,this}),e(ri,function(r,i,f,o){var g=this.body.try_inline(r,i,f,o);if(g){if(this.body instanceof Ii&&g instanceof Ge){var v=g.body.pop();return this.body=v,g.body.push(this),g}return this.body=g,this}}),e($i,Gt),e(tt,function(r,i,f,o){var g=this.value;return g&&g.try_inline(r,i,void 0,o==="try")});function n(r,i,f,o,g,v,y){for(var T=[],k=v.expressions,z=f,$=k.length-(y||0),N=$;--$>=0;z=!0,g=!1){var D=k[$].try_inline(r,i,z,o,g);D&&(W(),T.push(D))}if(T.length==0)return;return W(),!f&&T[0]instanceof He&&(T[0]=c(tt,v,{value:T[0].body})),c(Ge,v,{body:T.reverse()});function W(){N>$+1&&T.push(c(He,v,{body:pe(v,k.slice($+1,N))})),N=$}}e(Ze,function(r,i,f,o,g){return n(r,i,f,o,g,this)}),e(He,function(r,i,f,o){for(var g=this.body;g instanceof We;){var v=g.operator;if(Sa[v]||v=="void")break;g=g.expression}return!f&&!gi(g)&&(g=c(We,this,{operator:"void",expression:g})),g.try_inline(r,i,f||!1,o)}),e(We,function(r,i,f,o,g){var v=this,y=v.operator;if(!Sa[y]){!f&&y=="void"&&(f=!1);var T=v.expression.try_inline(r,i,f,o,g);if(T)return f||ui(T,function(k){k.in_bool=!1;var z=k.value;y=="void"&&gi(z)||(k.value=c(We,v,{operator:y,expression:z||c(yt,k).transform(r)}))}),T}}),e(kr,function(r,i,f,o){var g=this.body.try_inline(r,i,f,o);g&&(this.body=g);var v=this.expression;if(v instanceof Ze){var y=n(r,i,!0,o,!1,v,1);if(y)return this.expression=v.tail_node(),y.body.push(this),y}return g&&this}),e(Ai,function(r,i,f,o){if(r.option("yields")&&this.nested){var g=this.expression;if(g.TYPE=="Call"){var v=g.expression;switch(v.CTOR){case Qi:v=c(rr,v);break;case br:v=c(Tt,v);break;default:return}return g=g.clone(),g.expression=v,g.try_inline(r,i,f,o)}}})})(function(e,n){e.DEFMETHOD("try_inline",n)}),t(tt,function(e,n){var r=e.value;return r&&n.option("side_effects")&&gi(r,n)&&!m(n.find_parent(rn))&&(e.value=null),e})}(function(t,a){t.DEFMETHOD("optimize",function(u){var s=this;if(s._optimized||u.has_directive("use asm"))return s;var w=a(s,u);return w._optimized=!0,w})});function Ls(t){return t.type=="comment2"&&/@preserve|@license|@cc_on/i.test(t.value)}function Of(t){t=qr(t,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,extendscript:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,module:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var a=An;if(t.comments){var u=t.comments;if(typeof t.comments=="string"&&/^\/.*\/[a-zA-Z]*$/.test(t.comments)){var s=t.comments.lastIndexOf("/");u=new RegExp(t.comments.substr(1,s-1),t.comments.substr(s+1))}u instanceof RegExp?a=function(re){return re.type!="comment5"&&u.test(re.value)}:typeof u=="function"?a=function(re){return re.type!="comment5"&&u(this,re)}:u==="some"?a=Ls:a=nt}function w(re){if(typeof re=="number")return new Array(re+1).join(" ");if(!re)return"";if(!/^\s*$/.test(re))throw new Error("unsupported indentation: "+JSON.stringify(""+re));return re}var O=0,J=1,V=w(t.indent_start),Be=w(t.indent_level),ue=Be.length+1>>1,F,ie=0,ge=!0,we=t.source_map&&[],ye,L,ke,vn,Hn=!1,E=!1,m,G,ce="";function wn(){F="",ke=!1,vn=!1,G=[];var re=m;return m="",re}wn();var In=t.ascii_only?function(re,De){return(De||t.module)&&(re=re.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(qn){return"\\u{"+(qn.charCodeAt(0)-55232<<10|qn.charCodeAt(1)-56320).toString(16)+"}"})),re.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(qn,_t){var ot=qn.charCodeAt(0).toString(16);if(ot.length<=2&&!De){switch(qn){case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return t.ie?"\\x0B":"\\v";case"\0":return/[0-9]/.test(re.charAt(_t+1))?"\\x00":"\\0"}for(;ot.length<2;)ot="0"+ot;return"\\x"+ot}else{for(;ot.length<4;)ot="0"+ot;return"\\u"+ot}})}:function(re){for(var De="",qn=0,_t=0;qn<re.length;qn++){var ot=re.charCodeAt(qn);if(Fs(ot)){if(cs(re.charCodeAt(qn+1))){qn++;continue}}else if(!cs(ot))continue;De+=re.slice(_t,qn)+"\\u"+ot.toString(16),_t=qn+1}return _t==0?re:De+re.slice(_t)};function c(re){return"'"+re.replace(/\x27/g,"\\'")+"'"}function pe(re){return'"'+re.replace(/\x22/g,'\\"')+'"'}var _i=[null,c,pe,function(re,De){return De=="'"?c(re):pe(re)}][t.quote_style]||function(re,De,qn,_t){return qn>_t?c(re):pe(re)};function dt(re,De){var qn=0,_t=0;return re=re.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(ot,Bt){switch(ot){case'"':return++qn,'"';case"'":return++_t,"'";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return t.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\uFEFF":return"\\ufeff";case"\0":return/[0-9]/.test(re.charAt(Bt+1))?"\\x00":"\\0"}return ot}),_i(In(re),De,qn,_t)}var xt=we?function(re,De){we.forEach(function(qn){qn.line+=re,qn.col+=De})}:Gt,Yn=we?function(){we.forEach(function(re){t.source_map.add(re.token.file,re.line,re.col,re.token.line,re.token.col,!re.name&&re.token.type=="name"?re.token.value:re.name)}),we=[]}:Gt;function Vt(re){ce+=m.slice(0,ie),m=m.slice(ie);var De=m.length;for(xt(re,De-O),J+=re,O=De;re--;)ce+=`
`}var Ae=t.max_line_len?function(re){if(ge){O>t.max_line_len&&M.warn("Output exceeds {max_line_len} characters",t);return}O>t.max_line_len&&(Vt(1),ge=!0),(ge||re)&&Yn()}:Gt,Re=jn("; }"),Qe=jn("( [ + * / - , . `"),_n=jn("in instanceof");function vt(re,De,qn){return Af(re)&&(Af(De)||De=="\\")||De=="/"&&De==re||(De=="+"||De=="-")&&De==F||F=="--"&&De==">"||F=="!"&&qn=="--"||re=="/"&&(qn=="in"||qn=="instanceof")}var Wn=t.beautify||t.comments||t.max_line_len||t.preserve_line||t.shebang||!t.semicolons||t.source_map||t.width?function(re){var De=re.charAt(0);Hn&&De&&(Hn=!1,De!=`
`&&(Wn(`
`),d())),E&&De&&(E=!1,/[\s;})]/.test(De)||l());var qn=F.slice(-1);if(vn&&(vn=!1,qn!=";"&&!Re[De])){var _t=Qe[De]||_n[re];_t||t.semicolons?(m+=";",O++,ge||(Ae(),ge&&!_t&&m==";"&&(m="",O=0)),ie==m.length-1&&ie++):(Ae(),m+=`
`,J++,O=0,/^\s+$/.test(re)&&(vn=!0)),t.beautify||(ke=!1)}ke&&(vt(qn,De,re)&&(m+=" ",O++),(qn!="<"||re!="!")&&(ke=!1)),L&&(we.push({token:L,name:ye,line:J,col:O}),L=!1,ge&&Yn()),m+=re;var ot=re.split(/\r?\n/),Bt=ot.length-1;J+=Bt,O+=ot[0].length,Bt>0&&(Ae(),O=ot[Bt].length),F=re}:function(re){var De=re.charAt(0),qn=F.slice(-1);vn&&(vn=!1,(qn==":"&&De=="}"||(!De||";}".indexOf(De)<0)&&qn!=";")&&(m+=";",ke=!1)),ke&&(vt(qn,De,re)&&(m+=" "),(qn!="<"||re!="!")&&(ke=!1)),m+=re,F=re},l=t.beautify?function(){Wn(" ")}:function(){ke=!0},d=t.beautify?function(re){Hn&&Wn(`
`),Wn(re?V.slice(0,-ue):V)}:Gt,Y=t.beautify?function(re){var De=V;V+=Be,re(),V=De}:function(re){re()},Ee=t.max_line_len||t.preserve_line?function(){Ae(),ie=m.length,ge=!1}:Gt,mn=t.beautify?function(){Wn(`
`),ie=m.length}:Ee,ut=t.beautify?function(){Wn(";")}:function(){vn=!0};function pi(){vn&&Wn(";"),Wn(";")}function Di(re,De){Wn("{"),mn(),Y(re),it(De),d(),Wn("}")}function Jr(re){Wn("("),Ee(),re(),Ee(),Wn(")")}function Ar(re){Wn("["),Ee(),re(),Ee(),Wn("]")}function wr(){Ee(),Wn(","),Ee(),l()}function gi(){Wn(":"),l()}var it=we?function(re,De){L=re,ye=De}:Gt;function qi(){return ge||Ae(!0),ce+m}function la(){return/(^|\n) *$/.test(m)}function or(re,De){Hn||(re.nlb&&(De||!la())?Hn=!0:De&&(E=!0))}function ha(re){var De=re.value.replace(/[@#]__PURE__/g," ");return/^\s*$/.test(De)&&!/^\s*$/.test(re.value)?!1:(/comment[134]/.test(re.type)?(Wn("//"+De),Hn=!0):re.type=="comment2"&&Wn("/*"+De+"*/"),!0)}function cr(re,De){if(De instanceof ae)return De.left===re;if(De.TYPE=="Call")return De.expression===re;if(De instanceof bn)return De.condition===re;if(De instanceof Mn)return De.expression===re;if(De instanceof Mt)return!0;if(De instanceof Ze)return De.expressions[0]===re;if(De instanceof ht)return De.expression===re;if(De instanceof Cr||De instanceof Ai)return!0}function Wa(re){var De=this,qn;re instanceof Mt?qn=re.value:re instanceof Ai&&(qn=re.expression);var _t=Ta(re);if(_t||(_t=[]),qn){var ot=new un(function(Ji){if(!cr(Ji,ot.parent()))return!0;var lr=Ta(Ji);lr&&(_t=_t.concat(lr))});ot.push(re),qn.walk(ot)}if(J==1&&O==0){_t.length>0&&t.shebang&&_t[0].type=="comment5"&&(Wn("#!"+_t.shift().value+`
`),d());var Bt=t.preamble;Bt&&Wn(Bt.replace(/\r\n?|\u2028|\u2029|(^|\S)\s*$/g,`$1
`))}_t=_t.filter(a,re);var Zt=!1;_t.forEach(function(Ji,lr){or(Ji,lr),ha(Ji)&&(Zt=!0)}),Zt&&or(re.start,!0);function Ta(Ji){var lr=Ji.start;if(!lr){if(!qn)return;Ji.start=lr=new tf}var ia=lr.comments_before;if(!ia){if(!qn)return;lr.comments_before=ia=[]}if(ia._dumped!==De)return ia._dumped=De,ia}}function Hi(re,De){var qn=this,_t=re.end;if(_t){var ot=_t[De?"comments_before":"comments_after"];!ot||ot._dumped===qn||(re instanceof Fi||Ve(ot,function(Bt){return!/comment[134]/.test(Bt.type)}))&&(ot._dumped=qn,ot.filter(a,re).forEach(function(Bt,Zt){or(Bt,Zt||!De),ha(Bt)}))}}return{get:qi,reset:wn,indent:d,should_break:t.beautify&&t.width?function(){return O>=t.width}:An,has_parens:function(){return F.slice(-1)=="("},newline:mn,print:Wn,space:l,comma:wr,colon:gi,last:function(){return F},semicolon:ut,force_semicolon:pi,to_utf8:In,print_name:function(re){Wn(In(re.toString(),!0))},print_string:t.inline_script?function(re,De){re=dt(re,De).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),Wn(re.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(re,De){Wn(dt(re,De))},with_indent:Y,with_block:Di,with_parens:Jr,with_square:Ar,add_mapping:it,option:function(re){return t[re]},prepend_comments:t.comments||t.shebang?Wa:Gt,append_comments:t.comments?Hi:Gt,push_node:function(re){G.push(re)},pop_node:t.preserve_line?function(){var re=G.pop();re.start&&re.start.line>J&&Vt(re.start.line-J)}:function(){G.pop()},parent:function(re){return G[G.length-2-(re||0)]}}}(function(){function t(l,d){l.DEFMETHOD("_codegen",d)}var a=!1;M.DEFMETHOD("print",function(l,d){var Y=this;l.push_node(Y),d||Y.needs_parens(l)?l.with_parens(Ee):Ee(),l.pop_node();function Ee(){l.prepend_comments(Y),Y.add_source_map(l),Y._codegen(l),l.append_comments(Y)}});var u=Of({inline_script:!1,shebang:!1,width:!1});M.DEFMETHOD("print_to_string",function(l){if(l){var d=Of(l);return this.print(d),d.get()}return this.print(u),u.reset()});function s(l,d){l.DEFMETHOD("needs_parens",d)}s(M,An);function w(l){var d=l.parent();if(!l.has_parens()&&Oa(l,!1,!0))return this.name||!(d instanceof ji);if(l.option("webkit")&&d instanceof on&&d.expression===this||l.option("wrap_iife")&&d instanceof hn&&d.expression===this)return!0}s(rr,w),s(Qi,w),s(xr,w),s(Tt,w),s(br,w);function O(l){return!l.has_parens()&&Oa(l,!0)}s(ft,O);function J(l){var d=l.parent();if(d instanceof ae)return d.operator=="**"&&d.left===this;if(d instanceof hn)return d.expression===this;if(d instanceof Nt)return!0;if(d instanceof on)return d.expression===this;if(d instanceof Yt)return d.tag===this}s(wt,J),s(at,J),s(Ze,function(l){var d=l.parent();return d instanceof xn||qt(d)&&d.value===this||d instanceof wt||d instanceof ae||d instanceof hn||d instanceof Nt||d instanceof ar||d instanceof bn||d instanceof Fn||d instanceof Pt||d instanceof ji||d instanceof Ca||d instanceof Ci||d instanceof on&&d.expression===this||d instanceof On||d instanceof Yt&&d.tag===this||d instanceof at||d instanceof Vn||d instanceof Ai}),s(ae,function(l){var d=l.parent();if(d instanceof wt)return!0;if(d instanceof ae){var Y=d.operator,Ee=dr[Y],mn=this.operator,ut=dr[mn];return Ee>ut||Y=="??"&&(mn=="&&"||mn=="||")||Ee==ut&&this===d[Y=="**"?"left":"right"]}if(d instanceof hn)return d.expression===this;if(d instanceof Nt)return!0;if(d instanceof on)return d.expression===this;if(d instanceof Yt)return d.tag===this;if(d instanceof at)return!0});function V(l,d){return!l.terminal||!(d instanceof hn||d instanceof on)?!1:d.expression===l}s(on,function(l){var d=this,Y=l.parent();return Y instanceof $i&&Y.expression===d&&mf(d).TYPE=="Call"?!0:V(d,Y)}),s(hn,function(l){var d=this,Y=l.parent();if(Y instanceof $i)return Y.expression===d;if(l.option("webkit")&&d.expression instanceof Tt&&Y instanceof on&&Y.expression===d){var Ee=l.parent(1);if(Ee instanceof ze&&Ee.left===Y)return!0}return V(d,Y)}),s($i,function(l){if(Re(this,l))return!1;var d=l.parent();if(d instanceof hn)return d.expression===this;if(d instanceof on)return!0;if(d instanceof Yt)return d.tag===this}),s(dn,function(l){if(!l.option("galio"))return!1;var d=l.parent();return d instanceof on&&d.expression===this&&/^0/.test(_n(this.value))});function Be(l,d){var Y=d.parent();if(Y instanceof wt)return!0;if(Y instanceof ae)return!(Y instanceof ze);if(Y instanceof hn)return Y.expression===l;if(Y instanceof Nt)return!0;if(Y instanceof bn)return Y.condition===l;if(Y instanceof on)return Y.expression===l;if(Y instanceof Yt)return Y.tag===l;if(Y instanceof at)return!0}s(Zi,function(l){return Be(this,l)}),s(ze,function(l){if(Be(this,l))return!0;if(l.option("v8"))return this.left instanceof Nn;if(this.left instanceof hi)return O(l)}),s(gr,function(l){return Be(this,l)}),s(bn,function(l){return Be(this,l)||l.option("extendscript")&&l.parent()instanceof bn}),s(Ai,function(l){return Be(this,l)}),t(ci,function(l){var d=this.quote,Y=this.value;switch(l.option("quote_style")){case 0:case 2:Y.indexOf('"')==-1&&(d='"');break;case 1:Y.indexOf("'")==-1&&(d="'");break}l.print(d+Y+d),l.semicolon()}),t(za,function(l){l.print("debugger"),l.semicolon()});function ue(l,d,Y,Ee){var mn=l.length-1,ut=Ee,pi=a;l.forEach(function(Di,Jr){ut&&(Di instanceof ci?Di.value=="use asm"&&(a=!0):Di instanceof Qn||(Di instanceof He&&Di.body instanceof Dn&&Y.force_semicolon(),ut=!1)),!(Di instanceof Qn)&&(Y.indent(),Di.print(Y),!(Jr==mn&&d)&&(Y.newline(),d&&Y.newline()))}),a=pi}t(Et,function(l){ue(this.body,!0,l,!0),l.print("")}),t(ri,function(l){this.label.print(l),l.colon();var d=this.body;d instanceof Qn?l.force_semicolon():d.print(l)}),t(He,function(l){this.body.print(l),l.semicolon()});function F(l,d){d.print("{"),d.with_indent(function(){d.append_comments(l,!0)}),d.print("}")}function ie(l,d,Y){l.body.length>0?d.with_block(function(){ue(l.body,!1,d,Y)},l.end):F(l,d)}t(Ge,function(l){ie(this,l)}),t(Qn,function(l){l.semicolon()}),t(Lr,function(l){var d=this;l.print("do"),vt(d.body,l),l.space(),l.print("while"),l.space(),l.with_parens(function(){d.condition.print(l)}),l.semicolon()}),t(fa,function(l){var d=this;l.print("while"),l.space(),l.with_parens(function(){d.condition.print(l)}),Ae(d.body,l)}),t(jt,function(l){var d=this;l.print("for"),l.space(),l.with_parens(function(){d.init?(d.init instanceof gt?d.init.print(l):c(d.init,l,!0),l.print(";"),l.space()):l.print(";"),d.condition?(d.condition.print(l),l.print(";"),l.space()):l.print(";"),d.step&&d.step.print(l)}),Ae(d.body,l)});function ge(l,d){return function(Y){var Ee=this;Y.print(l),Y.space(),Y.with_parens(function(){Ee.init.print(Y),Y.space(),Y.print(d),Y.space(),Ee.object.print(Y)}),Ae(Ee.body,Y)}}t(Na,ge("for await","of")),t(ba,ge("for","in")),t(Ca,ge("for","of")),t(kr,function(l){var d=this;l.print("with"),l.space(),l.with_parens(function(){d.expression.print(l)}),Ae(d.body,l)}),t(Ti,function(l){l.print("export"),l.space(),this.body.print(l)}),t(ji,function(l){l.print("export"),l.space(),l.print("default"),l.space();var d=this.body;d.print(l),!(d instanceof xr&&!d.name)&&(d instanceof Si||d instanceof kt||d instanceof St&&!d.name&&!qt(d)||l.semicolon())});function we(l,d){var Y=l.value;Y=="*"||xa(Y)?d.print_name(Y):d.print_string(Y,l.quote)}t(Pa,function(l){var d=this;l.print("export"),l.space();var Y=d.keys.length;Y==0?F(d,l):d.keys[0].value=="*"?Ee(0):l.with_block(function(){l.indent(),Ee(0);for(var mn=1;mn<Y;mn++)l.print(","),l.newline(),l.indent(),Ee(mn);l.newline()},d.end),l.space(),l.print("from"),l.space(),d.path.print(l),l.semicolon();function Ee(mn){var ut=d.aliases[mn],pi=d.keys[mn];we(pi,l),ut.value!=pi.value&&(l.space(),l.print("as"),l.space(),we(ut,l))}}),t(da,function(l){var d=this;l.print("export"),l.space(),dt(d,l),l.semicolon()}),t(Fa,function(l){var d=this;l.print("import"),l.space(),d.default&&d.default.print(l),d.all&&(d.default&&l.comma(),d.all.print(l)),d.properties&&(d.default&&l.comma(),dt(d,l)),(d.all||d.default||d.properties)&&(l.space(),l.print("from"),l.space()),d.path.print(l),l.semicolon()});function ye(l,d){d.with_parens(function(){l.argnames.forEach(function(Y,Ee){Ee&&d.comma(),Y.print(d)}),l.rest&&(l.argnames.length&&d.comma(),d.print("..."),l.rest.print(d))})}function L(l,d){var Y=l.argnames.length==1&&!l.rest&&l.argnames[0];Y instanceof $n&&Y.name!="yield"?Y.print(d):ye(l,d),d.space(),d.print("=>"),d.space(),l.value?l.value.print(d):ie(l,d,!0)}t(Zi,function(l){L(this,l)}),t(gr,function(l){l.print("async"),l.space(),L(this,l)});function ke(l,d){l.name&&(d.space(),l.name.print(d)),ye(l,d),d.space(),ie(l,d,!0)}t(yn,function(l){l.print("function"),ke(this,l)});function vn(l){l.print("async"),l.space(),l.print("function"),ke(this,l)}t(Ur,vn),t(rr,vn);function Hn(l){l.print("async"),l.space(),l.print("function*"),ke(this,l)}t(zr,Hn),t(Qi,Hn);function E(l){l.print("function*"),ke(this,l)}t(Xr,E),t(br,E),t(Nt,function(l){var d=this;l.print("class"),d.name&&(l.space(),d.name.print(l)),d.extends&&(l.space(),l.print("extends"),l.space(),d.extends.print(l)),l.space(),dt(d,l,!0)}),t(Wr,function(l){var d=this;if(d.static&&(l.print("static"),l.space()),xt(d,l),d.value)l.space(),l.print("="),l.space(),d.value.print(l);else switch(d.key){case"get":case"set":case"static":l.force_semicolon();return}l.semicolon()}),t(rf,Yn("get")),t(af,Yn("set"));function m(l,d){var Y=l.value;wi(Y)&&(d.print("async"),d.space()),Ui(Y)&&d.print("*"),xt(l,d),ke(l.value,d)}t(ya,function(l){var d=this;d.static&&(l.print("static"),l.space()),m(d,l)}),t(Mr,function(l){l.print("static"),l.space(),ie(this.value,l)});function G(l,d){return function(Y){Y.print(l);var Ee=this[d];Ee&&(Y.space(),Ee.print(Y)),Y.semicolon()}}t(tt,G("return","value")),t(sf,G("throw","value")),t(fr,G("break","label")),t(Zr,G("continue","label"));function ce(l,d){var Y=l.body;if(d.option("braces")&&!(Y instanceof Er||Y instanceof Wi)||d.option("ie")&&Y instanceof Lr)return vt(Y,d);if(!Y)return d.force_semicolon();for(;;)if(Y instanceof Un){if(!Y.alternative){vt(l.body,d);return}Y=Y.alternative}else if(Y instanceof $a)Y=Y.body;else break;Ae(l.body,d)}t(Un,function(l){var d=this;l.print("if"),l.space(),l.with_parens(function(){d.condition.print(l)}),d.alternative?(ce(d,l),l.space(),l.print("else"),d.alternative instanceof Un?(l.space(),d.alternative.print(l)):Ae(d.alternative,l)):Ae(d.body,l)}),t(ki,function(l){var d=this;l.print("switch"),l.space(),l.with_parens(function(){d.expression.print(l)}),l.space();var Y=d.body.length-1;Y<0?F(d,l):l.with_block(function(){d.body.forEach(function(Ee,mn){l.indent(!0),Ee.print(l),mn<Y&&Ee.body.length>0&&l.newline()})},d.end)});function wn(l,d){d.newline(),l.body.forEach(function(Y){d.indent(),Y.print(d),d.newline()})}t(Vr,function(l){l.print("default:"),wn(this,l)}),t(sr,function(l){var d=this;l.print("case"),l.space(),d.expression.print(l),l.print(":"),wn(d,l)}),t(ai,function(l){var d=this;l.print("try"),l.space(),ie(d,l),d.bcatch&&(l.space(),d.bcatch.print(l)),d.bfinally&&(l.space(),d.bfinally.print(l))}),t(er,function(l){var d=this;l.print("catch"),d.argname&&(l.space(),l.with_parens(function(){d.argname.print(l)})),l.space(),ie(d,l)}),t(sa,function(l){l.print("finally"),l.space(),ie(this,l)});function In(l){return function(d){var Y=this;d.print(l),d.space(),Y.definitions.forEach(function(mn,ut){ut&&d.comma(),mn.print(d)});var Ee=d.parent();Ee instanceof Ii&&Ee.init===Y||d.semicolon()}}t(Er,In("const")),t(Wi,In("let")),t(bt,In("var"));function c(l,d,Y){var Ee=!1;Y&&l.walk(new un(function(mn){if(Ee)return!0;if(mn instanceof ae&&mn.operator=="in")return Ee=!0;if(mn instanceof rn&&!(qt(mn)&&mn.value))return!0})),l.print(d,Ee)}t(Vn,function(l){var d=this;if(d.name.print(l),d.value){l.space(),l.print("="),l.space();var Y=l.parent(1),Ee=Y instanceof jt||Y instanceof Xt;c(d.value,l,Ee)}}),t(Fn,function(l){var d=this;d.name.print(l),l.space(),l.print("="),l.space(),d.value.print(l)});function pe(l,d){if(d.option("annotations")&&l.pure){var Y=0,Ee=l,mn;do if(mn=Ee,Ee=d.parent(Y++),Ee instanceof hn&&Ee.expression===mn)return;while(Ee instanceof on&&Ee.expression===mn);d.print("/*@__PURE__*/")}}function _i(l,d){d.with_parens(function(){l.args.forEach(function(Y,Ee){Ee&&d.comma(),Y.print(d)}),d.add_mapping(l.end)})}t(hn,function(l){var d=this;pe(d,l),d.expression.print(l),d.optional&&l.print("?."),_i(d,l)}),t($i,function(l){var d=this;pe(d,l),l.print("new"),l.space(),d.expression.print(l),Re(d,l)&&_i(d,l)}),t(Ze,function(l){this.expressions.forEach(function(d,Y){Y>0&&(l.comma(),l.should_break()&&(l.newline(),l.indent())),d.print(l)})}),t(Mn,function(l){var d=this,Y=d.expression;Y.print(l);var Ee=d.property;l.option("ie")&&wa[Ee]||d.quoted&&l.option("keep_quoted_props")?(d.optional&&l.print("?."),l.with_square(function(){l.add_mapping(d.end),l.print_string(Ee)})):(Y instanceof dn&&!/[ex.)]/i.test(l.last())&&l.print("."),l.print(d.optional?"?.":"."),l.add_mapping(d.end),l.print_name(Ee))}),t(ht,function(l){var d=this;d.expression.print(l),d.optional&&l.print("?."),l.with_square(function(){d.property.print(l)})}),t(On,function(l){l.print("..."),this.expression.print(l)}),t(We,function(l){var d=this.operator,Y=this.expression;l.print(d),(/^[a-z]/i.test(d)||/[+-]$/.test(d)&&Y instanceof We&&/^[+-]/.test(Y.operator))&&l.space(),Y.print(l)}),t(Cr,function(l){var d=this;d.expression.print(l),l.add_mapping(d.end),l.print(d.operator)}),t(ae,function(l){var d=this;d.left.print(l),l.space(),l.print(d.operator),l.space(),d.right.print(l)}),t(bn,function(l){var d=this;d.condition.print(l),l.space(),l.print("?"),l.space(),d.consequent.print(l),l.space(),l.colon(),d.alternative.print(l)}),t(wt,function(l){l.print("await"),l.space(),this.expression.print(l)}),t(Ai,function(l){l.print(this.nested?"yield*":"yield"),this.expression&&(l.space(),this.expression.print(l))}),t(xn,function(l){var d=this.elements,Y=d.length;l.with_square(Y>0?function(){l.space(),d.forEach(function(Ee,mn){mn&&l.comma(),Ee.print(l),mn===Y-1&&Ee instanceof Jt&&l.comma()}),l.space()}:Gt)}),t(At,function(l){var d=this.elements,Y=d.length,Ee=this.rest;l.with_square(Y||Ee?function(){l.space(),d.forEach(function(mn,ut){ut&&l.comma(),mn.print(l)}),Ee?(Y&&l.comma(),l.print("..."),Ee.print(l)):d[Y-1]instanceof Jt&&l.comma(),l.space()}:Gt)}),t(Pt,function(l){var d=this,Y=xt(d,l),Ee=d.value;if(Y){if(Ee instanceof Fn){if(Ee.name instanceof Ht&&Y==Vt(Ee.name)){l.space(),l.print("="),l.space(),Ee.value.print(l);return}}else if(Ee instanceof Ht&&Y==Vt(Ee))return}l.colon(),Ee.print(l)}),t(hi,function(l){var d=this,Y=d.properties,Ee=Y.length,mn=d.rest;Ee||mn?l.with_block(function(){Y.forEach(function(ut,pi){pi&&(l.print(","),l.newline()),l.indent(),ut.print(l)}),mn&&(Ee&&(l.print(","),l.newline()),l.indent(),l.print("..."),mn.print(l)),l.newline()},d.end):F(d,l)});function dt(l,d,Y){var Ee=l.properties;Ee.length>0?d.with_block(function(){Ee.forEach(function(mn,ut){ut&&(Y||d.print(","),d.newline()),d.indent(),mn.print(d)}),d.newline()},l.end):F(l,d)}t(ft,function(l){dt(this,l)});function xt(l,d){var Y=l.key;if(Y instanceof M)return d.with_square(function(){Y.print(d)});var Ee=l.start&&l.start.quote;if(d.option("quote_keys")||Ee&&d.option("keep_quoted_props"))d.print_string(Y,Ee);else if(""+ +Y==Y&&Y>=0)d.print(_n(Y));else if(l.private)d.print_name(Y);else{if(wa[Y]?!d.option("ie"):xa(Y))return d.print_name(Y),Y;d.print_string(Y,Ee)}}t(fi,function(l){var d=this;xt(d,l),l.colon(),d.value.print(l)}),t(Qr,function(l){m(this,l)});function Yn(l){return function(d){var Y=this;Y.static&&(d.print("static"),d.space()),d.print(l),d.space(),xt(Y,d),ke(Y.value,d)}}t(ua,Yn("get")),t(ea,Yn("set"));function Vt(l){var d=l.definition();return d&&d.mangled_name||l.name}t(Ht,function(l){l.print_name(Vt(this))}),t(ja,function(l){var d=this,Y=Vt(d);l.print_name(Y);var Ee=d.alias;Ee.value!=Y&&(l.space(),l.print("as"),l.space(),we(Ee,l))}),t(ur,function(l){var d=this,Y=Vt(d),Ee=d.key;Ee.value&&Ee.value!=Y&&(we(Ee,l),l.space(),l.print("as"),l.space()),l.print_name(Y)}),t(Jt,Gt),t(Yt,function(l){var d=this;d.tag&&d.tag.print(l),l.print("`");for(var Y=0;Y<d.expressions.length;Y++)l.print(l.to_utf8(d.strings[Y])),l.print("${"),d.expressions[Y].print(l),l.print("}");l.print(l.to_utf8(d.strings[Y])),l.print("`")}),t(cf,function(l){l.print(this.value+"n")}),t(st,function(l){l.print(""+this.value)}),t(Dn,function(l){l.print_string(this.value,this.quote)}),t(dn,function(l){var d=this.start;a&&d&&d.raw!=null?l.print(d.raw):l.print(_n(this.value))}),t(ir,function(l){var d=this.value,Y=d.toString(),Ee=Y.lastIndexOf("/");d.raw_source?Y="/"+d.raw_source+Y.slice(Ee):Ee==1?Y="/(?:)"+Y.slice(Ee):Y.indexOf("/",1)<Ee&&(Y="/"+Y.slice(1,Ee).replace(/\\\\|[^/]?\//g,function(mn){return mn[0]=="\\"?mn:mn.slice(0,-1)+"\\/"})+Y.slice(Ee)),l.print(l.to_utf8(Y).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(mn){switch(mn[1]){case`
`:return"\\n";case"\r":return"\\r";case"	":return"	";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return mn}}).replace(/[\n\r\u2028\u2029]/g,function(mn){switch(mn){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))});function Ae(l,d){d.option("braces")&&!(l instanceof Er||l instanceof Wi)?vt(l,d):l instanceof Qn?d.force_semicolon():(d.space(),l.print(d))}function Re(l,d){return l.args.length>0?!0:d.option("beautify")}function Qe(l){for(var d=l[0],Y=d.length,Ee=1;Ee<l.length;++Ee)l[Ee].length<Y&&(d=l[Ee],Y=d.length);return d}function _n(l){var d=l.toString(10).replace(/^0\./,".").replace("e+","e"),Y=[d];Math.floor(l)===l&&(l<0?Y.push("-0x"+(-l).toString(16).toLowerCase()):Y.push("0x"+l.toString(16).toLowerCase()));var Ee,mn,ut;return(Ee=/^\.0+/.exec(d))?(mn=Ee[0].length,ut=d.slice(mn),Y.push(ut+"e-"+(ut.length+mn-1))):(Ee=/[^0]0+$/.exec(d))?(mn=Ee[0].length-1,Y.push(d.slice(0,-mn)+"e"+mn)):(Ee=/^(\d)\.(\d+)e(-?\d+)$/.exec(d))&&Y.push(Ee[1]+Ee[2]+"e"+(Ee[3]-Ee[2].length)),Qe(Y)}function vt(l,d){d.space(),l instanceof Qn?F(l,d):l instanceof Ge?l.print(d):d.with_block(function(){d.indent(),l.print(d),d.newline()},l.end)}function Wn(l,d){l.forEach(function(Y){Y.DEFMETHOD("add_source_map",d)})}Wn([M,ri],Gt),Wn([xn,wt,Ge,er,st,za,gt,Nn,ci,sa,ff,yn,$i,ft,On,$a,Ht,ki,yr,ai,We,Ai],function(l){l.add_mapping(this.start)}),Wn([ar,Pt,Ci],function(l){typeof this.key=="string"&&l.add_mapping(this.start,this.key)})})();var _s=ra("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Us=_s.reduce(function(t,a,u){return t[a]=u,t},Object.create(null));function Ws(t,a){for(var u=0,s=0,w=0,O=0;w<a.length;w++){var J=Us[a[w]];u+=(J&31)<<s,J&32?s+=5:(t[O++]+=u&1?2147483648|-(u>>1):u>>1,u=s=0)}return O}function hf(t){var a="";t=Math.abs(t)<<1|t>>>31;do{var u=t&31;(t>>>=5)&&(u|=32),a+=_s[u]}while(t);return a}function ps(){var t=new Jn,a=[];return a.index=function(u){var s=t.get(u);return s>=0||(s=a.length,a.push(u),t.set(u,s)),s},a}function Vs(t){var a=ps(),u=t.includeSources&&new Jn,s=ps(),w="";t.orig&&Object.keys(t.orig).forEach(function(we){var ye=t.orig[we],L=[0,0,1,0,0];if(t.orig[we]={names:ye.names,mappings:ye.mappings.split(/;/).map(function(Hn){return L[0]=0,Hn.split(/,/).map(function(E){return L.slice(0,Ws(L,E))})}),sources:ye.sources},!(!u||!ye.sourcesContent))for(var ke=0;ke<ye.sources.length;ke++){var vn=ye.sourcesContent[ke];vn&&u.set(ye.sources[ke],vn)}});var O,J=1,V=0,Be=0,ue=1,F=0,ie=0;return{add:t.orig?function(we,ye,L,ke,vn,Hn){var E=t.orig[we];if(E){var m=E.mappings[ke-1];if(!m)return;for(var G,ce=0;ce<m.length;ce++){var wn=m[ce][0];if(vn>=wn&&(G=m[ce]),vn<=wn)break}!G||G.length<4?we=null:(we=E.sources[G[1]],ke=G[2],vn=G[3],G.length>4&&(Hn=E.names[G[4]]))}ge(we,ye,L,ke,vn,Hn)}:ge,setSourceContent:u?function(we,ye){u.has(we)||u.set(we,ye)}:Gt,toString:function(){return JSON.stringify({version:3,file:t.filename||void 0,sourceRoot:t.root||void 0,sources:a,sourcesContent:u?a.map(function(we){return u.get(we)||null}):void 0,names:s,mappings:w})}};function ge(we,ye,L,ke,vn,Hn){if(!(O==null&&we==null)){if(O=we,J<ye){V=0;do w+=";";while(++J<ye)}else w&&(w+=",");if(w+=hf(L-V),V=L,we!=null){var E=a.index(we);if(w+=hf(E-Be),Be=E,w+=hf(ke-ue),ue=ke,w+=hf(vn-F),F=vn,t.names&&Hn!=null){var m=s.index(Hn);w+=hf(m-ie),ie=m}}}}}(function(){var t={Program:function(E){return new Et({start:J(E),end:V(E),body:w(E.body.map(ie))})},ArrowFunctionExpression:function(E){var m=[],G=null;E.params.forEach(function(In){In.type=="RestElement"?G=ie(In.argument):m.push(ie(In))});var ce=new(E.async?gr:Zi)({start:J(E),end:V(E),argnames:m,rest:G}),wn=ie(E.body);return wn instanceof Ge?(ce.body=w(wn.body),ce.value=null):(ce.body=[],ce.value=wn),ce},FunctionDeclaration:function(E){var m;E.async?m=E.generator?zr:Ur:m=E.generator?Xr:Ri;var G=[],ce=null;return E.params.forEach(function(wn){wn.type=="RestElement"?ce=ie(wn.argument):G.push(ie(wn))}),new m({start:J(E),end:V(E),name:ie(E.id),argnames:G,rest:ce,body:w(ie(E.body).body)})},FunctionExpression:function(E){var m;E.async?m=E.generator?Qi:rr:m=E.generator?br:Tt;var G=[],ce=null;return E.params.forEach(function(wn){wn.type=="RestElement"?ce=ie(wn.argument):G.push(ie(wn))}),new m({start:J(E),end:V(E),name:ie(E.id),argnames:G,rest:ce,body:w(ie(E.body).body)})},CallExpression:function(E){return new hn({start:J(E),end:V(E),expression:ie(E.callee),args:E.arguments.map(ie),optional:E.optional,pure:E.pure})},ClassDeclaration:function(E){return new Si({start:J(E),end:V(E),name:ie(E.id),extends:ie(E.superClass),properties:E.body.body.map(ie)})},ClassExpression:function(E){return new xr({start:J(E),end:V(E),name:ie(E.id),extends:ie(E.superClass),properties:E.body.body.map(ie)})},MethodDefinition:function(E){var m=E.key,G=!1;E.computed?m=ie(m):m.type=="PrivateIdentifier"?(G=!0,m="#"+m.name):m=Be(m);var ce=ya,wn=ie(E.value);switch(E.kind){case"get":ce=rf,wn=new Mi(wn);break;case"set":ce=af,wn=new Mi(wn);break}return new ce({start:J(E),end:V(E),key:m,private:G,static:E.static,value:wn})},PropertyDefinition:function(E){var m=E.key,G=!1;return E.computed?m=ie(m):m.type=="PrivateIdentifier"?(G=!0,m="#"+m.name):m=Be(m),new Wr({start:J(E),end:V(E),key:m,private:G,static:E.static,value:ie(E.value)})},StaticBlock:function(E){var m=J(E),G=V(E);return new Mr({start:m,end:G,value:new yf({start:m,end:G,body:w(E.body.map(ie))})})},ForOfStatement:function(E){return new(E.await?Na:Ca)({start:J(E),end:V(E),init:ie(E.left),object:ie(E.right),body:ie(E.body)})},TryStatement:function(E){var m=E.handlers||[E.handler];if(m.length>1||E.guardedHandlers&&E.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new ai({start:J(E),end:V(E),body:ie(E.block).body,bcatch:ie(m[0]),bfinally:E.finalizer?new sa(ie(E.finalizer)):null})},Property:function(E){var m=E.computed?ie(E.key):Be(E.key),G={start:J(E),end:V(E),key:m,value:ie(E.value)};if(E.kind=="init")return new(E.method?Qr:fi)(G);if(G.value=new Mi(G.value),E.kind=="get")return new ua(G);if(E.kind=="set")return new ea(G)},ArrayExpression:function(E){return new xn({start:J(E),end:V(E),elements:E.elements.map(function(m){return m===null?new Jt:ie(m)})})},ArrayPattern:function(E){var m=[],G=null;return E.elements.forEach(function(ce){ce===null?m.push(new Jt):ce.type=="RestElement"?G=ie(ce.argument):m.push(ie(ce))}),new At({start:J(E),end:V(E),elements:m,rest:G})},ObjectPattern:function(E){var m=[],G=null;return E.properties.forEach(function(ce){ce.type=="RestElement"?G=ie(ce.argument):m.push(new Pt(ie(ce)))}),new hi({start:J(E),end:V(E),properties:m,rest:G})},MemberExpression:function(E){return new(E.computed?ht:Mn)({start:J(E),end:V(E),optional:E.optional,expression:ie(E.object),property:E.computed?ie(E.property):E.property.name})},MetaProperty:function(E){var m=ie(E.meta),G=Be(E.property);return m.name=="new"&&G=="target"?new of({start:J(E),end:V(E),name:"new.target"}):new Mn({start:J(E),end:V(E),expression:m,property:G})},SwitchCase:function(E){return new(E.test?sr:Vr)({start:J(E),end:V(E),expression:ie(E.test),body:E.consequent.map(ie)})},ExportAllDeclaration:function(E){var m=J(E),G=V(E);return new Pa({start:m,end:G,aliases:[E.exported?ge(E.exported):new Dn({start:m,value:"*",end:G})],keys:[new Dn({start:m,value:"*",end:G})],path:ie(E.source)})},ExportDefaultDeclaration:function(E){var m=ie(E.declaration);if(!m.name)switch(m.CTOR){case Ur:m=new rr(m);break;case zr:m=new Qi(m);break;case Si:m=new xr(m);break;case Ri:m=new Tt(m);break;case Xr:m=new br(m);break}return new ji({start:J(E),end:V(E),body:m})},ExportNamedDeclaration:function(E){if(E.declaration)return new Ti({start:J(E),end:V(E),body:ie(E.declaration)});if(E.source){var m=[],G=[];return E.specifiers.forEach(function(ce){m.push(ge(ce.exported)),G.push(ge(ce.local))}),new Pa({start:J(E),end:V(E),aliases:m,keys:G,path:ie(E.source)})}return new da({start:J(E),end:V(E),properties:E.specifiers.map(function(ce){var wn=new ja(ie(ce.local));return wn.alias=ge(ce.exported),wn})})},ImportDeclaration:function(E){var m=J(E),G=V(E),ce=null,wn=null,In=null;return E.specifiers.forEach(function(c){var pe=new ur(ie(c.local));switch(c.type){case"ImportDefaultSpecifier":wn=pe,wn.key=new Dn({start:m,value:"",end:G});break;case"ImportNamespaceSpecifier":ce=pe,ce.key=new Dn({start:m,value:"*",end:G});break;default:pe.key=ge(c.imported),In||(In=[]),In.push(pe);break}}),new Fa({start:m,end:G,all:ce,default:wn,properties:In,path:ie(E.source)})},ImportExpression:function(E){var m=J(E),G=ie(E.source);return new hn({start:m,end:V(E),expression:new X({start:m,end:G.start,name:"import"}),args:[G]})},VariableDeclaration:function(E){return new({const:Er,let:Wi}[E.kind]||bt)({start:J(E),end:V(E),definitions:E.declarations.map(ie)})},Literal:function(E){var m={start:J(E),end:V(E)};if(E.bigint)return m.value=E.bigint.toLowerCase(),new cf(m);var G=E.value;if(G===null)return new Pr(m);var ce=E.regex;if(ce&&ce.pattern)return m.value=new RegExp(ce.pattern,ce.flags),m.value.raw_source=ce.pattern,new ir(m);if(ce)return m.value=E.regex&&E.raw?E.raw:G,new ir(m);switch(typeof G){case"string":return m.value=G,new Dn(m);case"number":if(isNaN(G))return new Ya(m);var wn,In;return isFinite(G)?(wn=1/G<0,m.value=wn?-G:G,In=new dn(m)):(wn=G<0,In=new Gr(m)),wn?new We({start:m.start,end:m.end,operator:"-",expression:In}):In;case"boolean":return new(G?Ir:Fr)(m)}},TemplateLiteral:function(E){return new Yt({start:J(E),end:V(E),expressions:E.expressions.map(ie),strings:E.quasis.map(function(m){return m.value.raw})})},TaggedTemplateExpression:function(E){var m=ie(E.quasi);return m.start=J(E),m.end=V(E),m.tag=ie(E.tag),m},Identifier:function(E){var m,G=F.length-1;do m=F[--G];while(m.type=="ArrayPattern"||m.type=="AssignmentPattern"&&m.left===F[G+1]||m.type=="ObjectPattern"||m.type=="Property"&&m.value===F[G+1]||m.type=="VariableDeclarator"&&m.id===F[G+1]);var ce=X;switch(m.type){case"ArrowFunctionExpression":m.body!==F[G+1]&&(ce=$n);break;case"BreakStatement":case"ContinueStatement":ce=wf;break;case"CatchClause":ce=tr;break;case"ClassDeclaration":m.id===F[G+1]&&(ce=uf);break;case"ClassExpression":m.id===F[G+1]&&(ce=Ia);break;case"FunctionDeclaration":ce=m.id===F[G+1]?nr:$n;break;case"FunctionExpression":ce=m.id===F[G+1]?Ei:$n;break;case"LabeledStatement":ce=Ra;break;case"VariableDeclaration":ce={const:xi,let:Nr}[m.kind]||vi;break}return new ce({start:J(E),end:V(E),name:E.name})},Super:function(E){return new ma({start:J(E),end:V(E),name:"super"})},ThisExpression:function(E){return new Ha({start:J(E),end:V(E),name:"this"})},ParenthesizedExpression:function(E){var m=ie(E.expression);return m.start.parens||(m.start.parens=[]),m.start.parens.push(J(E)),m.end.parens||(m.end.parens=[]),m.end.parens.push(V(E)),m},ChainExpression:function(E){var m=ie(E.expression);return m.terminal=!0,m}};t.UpdateExpression=t.UnaryExpression=function(m){var G="prefix"in m?m.prefix:m.type=="UnaryExpression";return new(G?We:Cr)({start:J(m),end:V(m),operator:m.operator,expression:ie(m.argument)})},ue("EmptyStatement",Qn),ue("ExpressionStatement",He,"expression>body"),ue("BlockStatement",Ge,"body@body"),ue("IfStatement",Un,"test>condition, consequent>body, alternate>alternative"),ue("LabeledStatement",ri,"label>label, body>body"),ue("BreakStatement",fr,"label>label"),ue("ContinueStatement",Zr,"label>label"),ue("WithStatement",kr,"object>expression, body>body"),ue("SwitchStatement",ki,"discriminant>expression, cases@body"),ue("ReturnStatement",tt,"argument>value"),ue("ThrowStatement",sf,"argument>value"),ue("WhileStatement",fa,"test>condition, body>body"),ue("DoWhileStatement",Lr,"test>condition, body>body"),ue("ForStatement",jt,"init>init, test>condition, update>step, body>body"),ue("ForInStatement",ba,"left>init, right>object, body>body"),ue("DebuggerStatement",za),ue("VariableDeclarator",Vn,"id>name, init>value"),ue("CatchClause",er,"param>argname, body%body"),ue("BinaryExpression",ae,"operator=operator, left>left, right>right"),ue("LogicalExpression",ae,"operator=operator, left>left, right>right"),ue("AssignmentExpression",ze,"operator=operator, left>left, right>right"),ue("AssignmentPattern",Fn,"left>name, right>value"),ue("ConditionalExpression",bn,"test>condition, consequent>consequent, alternate>alternative"),ue("NewExpression",$i,"callee>expression, arguments@args, pure=pure"),ue("SequenceExpression",Ze,"expressions@expressions"),ue("SpreadElement",On,"argument>expression"),ue("ObjectExpression",ft,"properties@properties"),ue("AwaitExpression",wt,"argument>expression"),ue("YieldExpression",Ai,"argument>expression, delegate=nested"),ye(Et,function(m){return Hn("Program",m)}),ye(kt,function(m){var G=m.argnames.map(L);return m.rest&&G.push({type:"RestElement",argument:L(m.rest)}),{type:"FunctionDeclaration",id:L(m.name),async:wi(m),generator:Ui(m),params:G,body:Hn("BlockStatement",m)}}),ye(yn,function(m){var G=m.argnames.map(L);return m.rest&&G.push({type:"RestElement",argument:L(m.rest)}),qt(m)?{type:"ArrowFunctionExpression",async:wi(m),params:G,expression:!!m.value,body:m.value?L(m.value):Hn("BlockStatement",m)}:{type:"FunctionExpression",id:L(m.name),async:wi(m),generator:Ui(m),params:G,body:Hn("BlockStatement",m)}}),ye(hn,function(m){var G=m.expression;return m.args.length==1&&G instanceof X&&G.name=="import"?{type:"ImportExpression",source:L(m.args[0])}:{type:"CallExpression",callee:L(G),arguments:m.args.map(L),optional:m.optional,pure:m.pure}}),ye(Si,function(m){return{type:"ClassDeclaration",id:L(m.name),superClass:L(m.extends),body:{type:"ClassBody",body:m.properties.map(L)}}}),ye(xr,function(m){return{type:"ClassExpression",id:L(m.name),superClass:L(m.extends),body:{type:"ClassBody",body:m.properties.map(L)}}});function a(E){return function(m){var G=m.key instanceof M,ce=G?L(m.key):m.private?{type:"PrivateIdentifier",name:m.key.slice(1)}:{type:"Literal",value:m.key};return{type:"MethodDefinition",kind:E,computed:G,key:ce,static:m.static,value:L(m.value)}}}ye(rf,a("get")),ye(af,a("set")),ye(ya,a("method")),ye(Wr,function(m){var G=m.key instanceof M,ce=G?L(m.key):m.private?{type:"PrivateIdentifier",name:m.key.slice(1)}:{type:"Literal",value:m.key};return{type:"PropertyDefinition",computed:G,key:ce,static:m.static,value:L(m.value)}}),ye(Mr,function(m){return Hn("StaticBlock",m.value)});function u(E){return function(m){return{type:"ForOfStatement",await:E,left:L(m.init),right:L(m.object),body:L(m.body)}}}ye(Na,u(!0)),ye(Ca,u(!1)),ye(ci,function(m){return{type:"ExpressionStatement",directive:m.value,expression:we(m,{type:"Literal",value:m.value})}}),ye(yr,function(m){return{type:"SwitchCase",test:L(m.expression),consequent:m.body.map(L)}}),ye(ai,function(m){return{type:"TryStatement",block:vn(m),handler:L(m.bcatch),finalizer:L(m.bfinally)}}),ye(er,function(m){return{type:"CatchClause",param:L(m.argname),body:vn(m)}}),ye(Ti,function(m){return{type:"ExportNamedDeclaration",declaration:L(m.body),specifiers:[]}}),ye(ji,function(m){return{type:"ExportDefaultDeclaration",declaration:L(m.body)}}),ye(Pa,function(m){if(m.keys[0].value=="*")return{type:"ExportAllDeclaration",exported:m.aliases[0].value=="*"?null:ke(m.aliases[0]),source:L(m.path)};for(var G=[],ce=0;ce<m.aliases.length;ce++)G.push(we({start:m.keys[ce].start,end:m.aliases[ce].end},{type:"ExportSpecifier",local:ke(m.keys[ce]),exported:ke(m.aliases[ce])}));return{type:"ExportNamedDeclaration",specifiers:G,source:L(m.path)}}),ye(da,function(m){return{type:"ExportNamedDeclaration",specifiers:m.properties.map(function(G){return we({start:G.start,end:G.alias.end},{type:"ExportSpecifier",local:L(G),exported:ke(G.alias)})})}}),ye(Fa,function(m){var G=m.properties?m.properties.map(function(ce){return we({start:ce.key.start,end:ce.end},{type:"ImportSpecifier",local:L(ce),imported:ke(ce.key)})}):[];return m.all&&G.unshift(we(m.all,{type:"ImportNamespaceSpecifier",local:L(m.all)})),m.default&&G.unshift(we(m.default,{type:"ImportDefaultSpecifier",local:L(m.default)})),{type:"ImportDeclaration",specifiers:G,source:L(m.path)}}),ye(gt,function(m){return{type:"VariableDeclaration",kind:m.TYPE.toLowerCase(),declarations:m.definitions.map(L)}}),ye(on,function(m){var G=m instanceof ht,ce={type:"MemberExpression",object:L(m.expression),computed:G,optional:m.optional,property:G?L(m.property):{type:"Identifier",name:m.property}};return m.terminal?{type:"ChainExpression",expression:ce}:ce}),ye(at,function(m){return{type:m.operator=="++"||m.operator=="--"?"UpdateExpression":"UnaryExpression",operator:m.operator,prefix:m instanceof We,argument:L(m.expression)}}),ye(ae,function(m){return{type:m.operator=="&&"||m.operator=="||"?"LogicalExpression":"BinaryExpression",left:L(m.left),operator:m.operator,right:L(m.right)}}),ye(xn,function(m){return{type:"ArrayExpression",elements:m.elements.map(L)}}),ye(At,function(m){var G=m.elements.map(L);return m.rest&&G.push({type:"RestElement",argument:L(m.rest)}),{type:"ArrayPattern",elements:G}}),ye(Pt,function(m){var G=m.key instanceof M,ce=G?L(m.key):{type:"Literal",value:m.key};return{type:"Property",kind:"init",computed:G,method:!1,shorthand:!1,key:ce,value:L(m.value)}}),ye(hi,function(m){var G=m.properties.map(L);return m.rest&&G.push({type:"RestElement",argument:L(m.rest)}),{type:"ObjectPattern",properties:G}}),ye(Ci,function(m){var G=m.key instanceof M,ce=G?L(m.key):{type:"Literal",value:m.key},wn;return m instanceof fi?wn="init":m instanceof ua?wn="get":m instanceof ea&&(wn="set"),{type:"Property",kind:wn,computed:G,method:m instanceof Qr,shorthand:!1,key:ce,value:L(m.value)}}),ye(Ht,function(m){var G=m.definition();return{type:"Identifier",name:G&&G.mangled_name||m.name}}),ye(ma,function(){return{type:"Super"}}),ye(Ha,function(){return{type:"ThisExpression"}}),ye(of,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),ye(ir,function(m){var G=m.value.toString().match(/\/([gimuy]*)$/)[1],ce="/"+m.value.raw_source+"/"+G;return{type:"Literal",value:ce,raw:ce,regex:{pattern:m.value.raw_source,flags:G}}}),ye(cf,function(m){var G=m.value;return{type:"Literal",bigint:G,raw:G+"n"}});function s(E){var m=E.value;return typeof m=="number"&&(m<0||m===0&&1/m<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-m,raw:E.start.raw}}:{type:"Literal",value:m,raw:E.start.raw}}ye(Ba,s),ye(st,s),ye(Pr,s),ye(oa,function(m){return{type:"Identifier",name:String(m.value)}}),ye(Yt,function(m){var G=m.strings.length-1,ce={type:"TemplateLiteral",expressions:m.expressions.map(L),quasis:m.strings.map(function(wn,In){return{type:"TemplateElement",tail:In==G,value:{raw:wn}}})};return m.tag?{type:"TaggedTemplateExpression",tag:L(m.tag),quasi:ce}:ce}),ii.DEFMETHOD("to_mozilla_ast",Ge.prototype.to_mozilla_ast),Jt.DEFMETHOD("to_mozilla_ast",aa),M.DEFMETHOD("to_mozilla_ast",function(){throw new Error("Cannot convert AST_"+this.TYPE)});function w(E){for(var m=0;m<E.length;m++){var G=E[m];if(!(G instanceof He))break;var ce=G.body;if(!(ce instanceof Dn)||G.start.pos!==ce.start.pos)break;E[m]=new ci(ce)}return E}function O(E){if(E.type=="Literal")return E.raw!=null?E.raw:E.value+""}function J(E){var m=E.loc,G=m&&m.start,ce=E.range;return new tf({file:m&&m.source,line:G&&G.line,col:G&&G.column,pos:ce?ce[0]:E.start,endline:G&&G.line,endcol:G&&G.column,endpos:ce?ce[0]:E.start,raw:O(E)})}function V(E){var m=E.loc,G=m&&m.end,ce=E.range;return new tf({file:m&&m.source,line:G&&G.line,col:G&&G.column,pos:ce?ce[1]:E.end,endline:G&&G.line,endcol:G&&G.column,endpos:ce?ce[1]:E.end,raw:O(E)})}function Be(E){return""+E[E.type=="Identifier"?"name":"value"]}function ue(E,m,G){var ce=["start: my_start_token(M)","end: my_end_token(M)"],wn=["type: "+JSON.stringify(E)];G&&G.split(/\s*,\s*/).forEach(function(In){var c=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(In);if(!c)throw new Error("Can't understand property map: "+In);var pe=c[1],_i=c[2],dt=c[3];switch(_i){case"@":ce.push(dt+": M."+pe+".map(from_moz)"),wn.push(pe+": M."+dt+".map(to_moz)");break;case">":ce.push(dt+": from_moz(M."+pe+")"),wn.push(pe+": to_moz(M."+dt+")");break;case"=":ce.push(dt+": M."+pe),wn.push(pe+": M."+dt);break;case"%":ce.push(dt+": from_moz(M."+pe+").body"),wn.push(pe+": to_moz_block(M)");break;default:throw new Error("Can't understand operator in propmap: "+In)}}),t[E]=new Function("U2","my_start_token","my_end_token","from_moz",["return function From_Moz_"+E+"(M) {","    return new U2.AST_"+m.TYPE+"({",ce.join(`,
`),"    });","};"].join(`
`))(Xi,J,V,ie),ye(m,new Function("to_moz","to_moz_block","to_moz_scope",["return function To_Moz_"+E+"(M) {","    return {",wn.join(`,
`),"    };","};"].join(`
`))(L,vn,Hn))}var F=null;function ie(E){F.push(E);var m=null;if(E){if(!Rt(t,E.type))throw new Error("Unsupported type: "+E.type);m=t[E.type](E)}return F.pop(),m}function ge(E){return new Dn({start:J(E),value:Be(E),end:V(E)})}M.from_mozilla_ast=function(E){var m=F;F=[];var G=ie(E);return F=m,G.walk(new un(function(ce){if(ce instanceof wf){for(var wn=0,In;(In=this.parent(wn))&&!(In instanceof rn);wn++)if(In instanceof ri&&In.label.name==ce.name){ce.thedef=In.label;break}if(!ce.thedef){var c=ce.start;Vf("Undefined label "+ce.name,c.file,c.line,c.col,c.pos)}}})),G};function we(E,m){var G=E.start,ce=E.end;return G.pos!=null&&ce.endpos!=null&&(m.range=[G.pos,ce.endpos]),G.line&&(m.loc={start:{line:G.line,column:G.col},end:ce.endline?{line:ce.endline,column:ce.endcol}:null},G.file&&(m.loc.source=G.file)),m}function ye(E,m){E.DEFMETHOD("to_mozilla_ast",function(){return we(this,m(this))})}function L(E){return E!=null?E.to_mozilla_ast():null}function ke(E){return xa(E.value)?we(E,{type:"Identifier",name:E.value}):L(E)}function vn(E){return{type:"BlockStatement",body:E.body.map(L)}}function Hn(E,m){var G=m.body.map(L);return m.body[0]instanceof He&&m.body[0].body instanceof Dn&&G.unshift(L(new Qn(m.body[0]))),{type:E,body:G}}})();function gs(){var t=new Jn;["NaN","null","true","false","Infinity","-Infinity","undefined"].forEach(u),["encodeURI","encodeURIComponent","escape","eval","decodeURI","decodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape"].forEach(u);var a=Function("return this")();return["Array","ArrayBuffer","Atomics","BigInt","Boolean","console","DataView","Date","Error","Function","Int8Array","Intl","JSON","Map","Math","Number","Object","Promise","Proxy","Reflect","RegExp","Set","String","Symbol","WebAssembly"].forEach(function(s){u(s);var w=a[s];if(w&&(Object.getOwnPropertyNames(w).map(u),typeof w=="function")){w.__proto__&&Object.getOwnPropertyNames(w.__proto__).map(u),w.prototype&&Object.getOwnPropertyNames(w.prototype).map(u);try{Object.getOwnPropertyNames(new w).map(u)}catch{try{Object.getOwnPropertyNames(w()).map(u)}catch{}}}}),(gs=function(){return t.clone()})();function u(s){t.set(s,!0)}}function bs(t,a){t.walk(new un(function(s){s instanceof ar||s instanceof Pt||s instanceof Ci?s.key instanceof M?na(s.key,u):s.start&&s.start.quote&&u(s.key):s instanceof Mn?s.quoted&&u(s.property):s instanceof ht&&na(s.property,u)}));function u(s){zi(a,s)}}function na(t,a){t instanceof bn?(na(t.consequent,a),na(t.alternative,a)):t instanceof Ze?na(t.tail_node(),a):t instanceof Dn&&a(t.value)}function Gs(t,a){a=qr(a,{builtins:!1,cache:null,debug:!1,domprops:!1,keep_quoted:!1,regex:null,reserved:null},!0);var u=a.builtins?new Jn:gs();!a.domprops&&typeof domprops<"u"&&domprops.forEach(function(L){u.set(L,!0)}),Array.isArray(a.reserved)&&a.reserved.forEach(function(L){u.set(L,!0)});var s=-1,w;a.cache?(w=a.cache.props,w.each(function(L){u.set(L,!0)})):w=new Jn;var O=a.regex,J=a.debug!==!1,V;J&&(V=a.debug===!0?"":a.debug);var Be=new Jn,ue=u.clone();t.walk(new un(function(L){if(L.TYPE=="Call"){var ke=L.expression;if(ke instanceof Mn)switch(ke.property){case"defineProperty":case"getOwnPropertyDescriptor":if(L.args.length<2||(ke=ke.expression,!(ke instanceof X))||ke.name!="Object"||!ke.definition().undeclared)break;na(L.args[1],ge);break;case"hasOwnProperty":if(L.args.length<1)break;na(L.args[0],ge);break}}else L instanceof ar||L instanceof Pt||L instanceof Ci?L.key instanceof M?na(L.key,ge):ge(L.key):L instanceof Mn?Gi(L,this.parent())&&ge(L.property):L instanceof ht&&Gi(L,this.parent())&&na(L.property,ge)})),t.walk(new un(function(L){if(L instanceof ae)L.operator=="in"&&ye(L.left);else if(L.TYPE=="Call"){var ke=L.expression;if(ke instanceof Mn)switch(ke.property){case"defineProperty":case"getOwnPropertyDescriptor":if(L.args.length<2||(ke=ke.expression,!(ke instanceof X))||ke.name!="Object"||!ke.definition().undeclared)break;ye(L.args[1]);break;case"hasOwnProperty":if(L.args.length<1)break;ye(L.args[0]);break}}else L instanceof ar||L instanceof Pt||L instanceof Ci?L.key instanceof M?ye(L.key):L.key=we(L.key):L instanceof Mn?L.property=we(L.property):L instanceof ht&&(a.keep_quoted||ye(L.property))}));function F(L){return!(ue.has(L)||/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(L))}function ie(L){return u.has(L)?(M.info("Preserving reserved property {this}",L),!1):O&&!O.test(L)?(M.info("Preserving excluded property {this}",L),!1):w.has(L)||Be.has(L)}function ge(L){F(L)&&Be.set(L,!0),ie(L)||ue.set(L,!0)}function we(L){if(!ie(L))return L;var ke=w.get(L);if(!ke){if(J){var vn="_$"+L+"$"+V+"_";F(vn)&&(ke=vn)}if(!ke)do ke=mr(++s);while(!F(ke));/^#/.test(L)&&(ke="#"+ke),w.set(L,ke)}return M.info("Mapping property {name} to {mangled}",{mangled:ke,name:L}),ke}function ye(L){L instanceof Ze?ye(L.tail_node()):L instanceof Dn?L.value=we(L.value):L instanceof bn&&(ye(L.consequent),ye(L.alternative))}}var zf,$f;typeof Za>"u"?(zf=atob,$f=btoa):typeof Za.alloc>"u"?(zf=function(t){return new Za(t,"base64").toString()},$f=function(t){return new Za(t).toString("base64")}):(zf=function(t){return Za.from(t,"base64").toString()},$f=function(t){return Za.from(t).toString("base64")});function Js(t,a){for(var u=a.end.comments_after,s=u.length;--s>=0;){var w=u[s];if(w.type!="comment1")break;var O=/^# ([^\s=]+)=(\S+)\s*$/.exec(w.value);if(!O)break;if(O[1]=="sourceMappingURL"){if(O=/^data:application\/json(;.*?)?;base64,([^,]+)$/.exec(O[2]),!O)break;return zf(O[2])}}M.warn("inline source map not found: {name}",{name:t})}function ys(t){try{return JSON.parse(t)}catch{throw new Error("invalid input source map: "+t)}}function ta(t,a,u){u.forEach(function(s){if(a[s]){var w={};w[t]=a[t],a[s]=qr(a[s],w)}})}function ds(t){t&&("props"in t?t.props instanceof Jn||(t.props=Jn.fromObject(t.props)):t.props=new Jn)}function ms(t){return{props:t.props.toObject()}}function Ks(t,a){try{a=qr(a,{annotations:void 0,compress:{},enclose:!1,expression:!1,ie:!1,ie8:!1,keep_fargs:!1,keep_fnames:!1,mangle:{},module:void 0,nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:a&&!a.expression&&a.module?!0:void 0,v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0),a.validate&&M.enable_validation();var u=a.timings&&{start:Date.now()};a.annotations!==void 0&&ta("annotations",a,["compress","output"]),a.expression&&ta("expression",a,["compress","parse"]),a.ie8&&(a.ie=a.ie||a.ie8),a.ie&&ta("ie",a,["compress","mangle","output","rename"]),a.keep_fargs&&ta("keep_fargs",a,["compress","mangle","rename"]),a.keep_fnames&&ta("keep_fnames",a,["compress","mangle","rename"]),a.module===void 0&&!a.ie&&(a.module=!0),a.module&&ta("module",a,["compress","output","parse"]),a.toplevel!==void 0&&ta("toplevel",a,["compress","mangle","rename"]),a.v8&&ta("v8",a,["mangle","output","rename"]),a.webkit&&ta("webkit",a,["compress","mangle","output","rename"]);var s;a.mangle&&(a.mangle=qr(a.mangle,{cache:a.nameCache&&(a.nameCache.vars||{}),eval:!1,ie:!1,keep_fargs:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),a.mangle.properties&&(typeof a.mangle.properties!="object"&&(a.mangle.properties={}),a.mangle.properties.keep_quoted&&(s=a.mangle.properties.reserved,Array.isArray(s)||(s=[]),a.mangle.properties.reserved=s),a.nameCache&&!("cache"in a.mangle.properties)&&(a.mangle.properties.cache=a.nameCache.props||{})),ds(a.mangle.cache),ds(a.mangle.properties.cache)),a.rename===void 0&&(a.rename=a.compress&&a.mangle),a.sourceMap&&(a.sourceMap=qr(a.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var w=[];a.warnings&&M.log_function(function(we){w.push(we)},a.warnings=="verbose"),u&&(u.parse=Date.now());var O;if(a.parse=a.parse||{},t instanceof M)O=t;else{typeof t=="string"&&(t=[t]),a.parse.toplevel=null;var J=a.sourceMap&&a.sourceMap.content;typeof J=="string"&&J!="inline"&&(J=ys(J)),J&&(a.sourceMap.orig=Object.create(null));for(var V in t)if(Rt(t,V))if(a.parse.filename=V,a.parse.toplevel=O=Ua(t[V],a.parse),J=="inline"){var Be=Js(V,O);Be&&(a.sourceMap.orig[V]=ys(Be))}else J&&(a.sourceMap.orig[V]=J)}a.parse.expression&&(O=O.wrap_expression()),s&&bs(O,s),["enclose","wrap"].forEach(function(we){var ye=a[we];if(ye){var L=O.print_to_string().slice(0,-1);O=O[we](ye),t[O.start.file]=O.print_to_string().replace(L,"")}}),a.validate&&O.validate_ast(),u&&(u.rename=Date.now()),a.rename&&(O.figure_out_scope(a.rename),O.expand_names(a.rename)),u&&(u.compress=Date.now()),a.compress&&(O=new ca(a.compress).compress(O),a.validate&&O.validate_ast()),u&&(u.scope=Date.now()),a.mangle&&O.figure_out_scope(a.mangle),u&&(u.mangle=Date.now()),a.mangle&&(O.compute_char_frequency(a.mangle),O.mangle_names(a.mangle)),u&&(u.properties=Date.now()),s&&bs(O,s),a.mangle&&a.mangle.properties&&Gs(O,a.mangle.properties),a.parse.expression&&(O=O.unwrap_expression()),u&&(u.output=Date.now());var ue={},F=qr(a.output,{ast:!1,code:!0});if(F.ast&&(ue.ast=O),F.code){if(a.sourceMap&&(F.source_map=Vs(a.sourceMap),a.sourceMap.includeSources)){if(t instanceof Et)throw new Error("original source content unavailable");for(var V in t)Rt(t,V)&&F.source_map.setSourceContent(V,t[V])}delete F.ast,delete F.code;var ie=Of(F);if(O.print(ie),ue.code=ie.get(),a.sourceMap){ue.map=F.source_map.toString();var ge=a.sourceMap.url;ge&&(ue.code=ue.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),ge=="inline"?ue.code+=`
//# sourceMappingURL=data:application/json;charset=utf-8;base64,`+$f(ue.map):ue.code+=`
//# sourceMappingURL=`+ge)}}return a.nameCache&&a.mangle&&(a.mangle.cache&&(a.nameCache.vars=ms(a.mangle.cache)),a.mangle.properties&&a.mangle.properties.cache&&(a.nameCache.props=ms(a.mangle.properties.cache))),u&&(u.end=Date.now(),ue.timings={parse:.001*(u.rename-u.parse),rename:.001*(u.compress-u.rename),compress:.001*(u.scope-u.compress),scope:.001*(u.mangle-u.scope),mangle:.001*(u.properties-u.mangle),properties:.001*(u.output-u.properties),output:.001*(u.end-u.output),total:.001*(u.end-u.start)}),w.length&&(ue.warnings=w),ue}catch(we){return{error:we}}finally{M.log_function(),M.disable_validation()}}Xi.Dictionary=Jn,Xi.is_statement=pr,Xi.List=Ct,Xi.minify=Ks,Xi.parse=Ua,Xi.push_uniq=zi,Xi.TreeTransformer=ei,Xi.TreeWalker=un})(Os);const vu=ou(Os),du=new class extends uu{async beautify(){return cu(this.code,{plugins:[lu,hu],parser:"babel",tabWidth:this.getOptionValue("tab",4)})}async compress(){let Xi=vu.minify(this.code,{keep_fnames:!0,compress:!1,mangle:!1,output:{beautify:!1}});if(!("code"in Xi)||!Xi.code)throw new Error(JSON.stringify(Xi.error));return Xi.code}};export{du as formatter};
