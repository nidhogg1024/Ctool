var K=Object.defineProperty;var Q=(_,n,p)=>n in _?K(_,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):_[n]=p;var L=(_,n,p)=>Q(_,typeof n!="symbol"?n+"":n,p);import{u as R,i as Y}from"./action-CSt0YebL.js";import{N as Z,d as tt,y as et,I as y,z as lt,D as it,k as at,v as l,w as d,j as s,c as O,m as P,R as w,F as nt,r as g,f as S,n as T,l as H,s as V,V as ot,S as st}from"./tool-Ct-LHwIw.js";import{r as rt}from"./radix-BznjL3Qs.js";import{I as r}from"./Item-Q4n9UR_L.js";import"./modulepreload-polyfill-B5Qt9EMX.js";var A,z,M;(function(){var _,n,p,u,c,h,v,k;k=function(i){var e,m,o,t;return e=(i&255<<24)>>>24,m=(i&255<<16)>>>16,o=(i&65280)>>>8,t=i&255,[e,m,o,t].join(".")},v=function(i){var e,m,o,t,a,b;for(e=[],o=t=0;t<=3&&i.length!==0;o=++t){if(o>0){if(i[0]!==".")throw new Error("Invalid IP");i=i.substring(1)}b=n(i),a=b[0],m=b[1],i=i.substring(m),e.push(a)}if(i.length!==0)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},p=function(i){return i.charCodeAt(0)},u=p("0"),h=p("a"),c=p("A"),n=function(i){var e,m,o,t,a;for(t=0,e=10,m="9",o=0,i.length>1&&i[o]==="0"&&(i[o+1]==="x"||i[o+1]==="X"?(o+=2,e=16):"0"<=i[o+1]&&i[o+1]<="9"&&(o++,e=8,m="7")),a=o;o<i.length;){if("0"<=i[o]&&i[o]<=m)t=t*e+(p(i[o])-u)>>>0;else if(e===16)if("a"<=i[o]&&i[o]<="f")t=t*e+(10+p(i[o])-h)>>>0;else if("A"<=i[o]&&i[o]<="F")t=t*e+(10+p(i[o])-c)>>>0;else break;else break;if(t>4294967295)throw new Error("too large");o++}if(o===a)throw new Error("empty octet");return[t,o]},_=function(){function i(e,m){var o,t,a;if(typeof e!="string")throw new Error("Missing `net' parameter");if(m||(a=e.split("/",2),e=a[0],m=a[1]),m||(m=32),typeof m=="string"&&m.indexOf(".")>-1){try{this.maskLong=v(m)}catch{throw new Error("Invalid mask: "+m)}for(o=t=32;t>=0;o=--t)if(this.maskLong===4294967295<<32-o>>>0){this.bitmask=o;break}}else if(m||m===0)this.bitmask=parseInt(m,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(v(e)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+m);this.size=Math.pow(2,32-this.bitmask),this.base=k(this.netLong),this.mask=k(this.maskLong),this.hostmask=k(~this.maskLong),this.first=this.bitmask<=30?k(this.netLong+1):this.base,this.last=this.bitmask<=30?k(this.netLong+this.size-2):k(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?k(this.netLong+this.size-1):void 0}return i.prototype.contains=function(e){return typeof e=="string"&&(e.indexOf("/")>0||e.split(".").length!==4)&&(e=new i(e)),e instanceof i?this.contains(e.base)&&this.contains(e.broadcast||e.last):(v(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},i.prototype.next=function(e){return e==null&&(e=1),new i(k(this.netLong+this.size*e),this.mask)},i.prototype.forEach=function(e){var m,o,t;for(t=v(this.first),o=v(this.last),m=0;t<=o;)e(k(t),t,m),m++,t++},i.prototype.toString=function(){return this.base+"/"+this.bitmask},i}(),M=v,z=k,A=_}).call(Z);const N=_=>_.includes(".")&&_.substring(0,2).toUpperCase()==="0B"?F(_,10,2,"0b"):_,F=(_,n=10,p=10,u="")=>_.split(".").map(c=>(u&&c.length>u.length&&c.substring(0,u.length).toUpperCase()===u.toUpperCase()&&(c=c.substring(u.length)),c=c.replace(/\b(0+)/gi,"")||"0",n===p?`${c}`:`${rt(c,p,n).padStart(n===2?8:n===8?4:2,"0").toUpperCase()}`)).join("."),ut=_=>{let n=`${_}`.trim();if(n=N(n),n.includes(".")){const u=n.split(".");if(u.length!==4)throw new Error("Invalid wildcard mask format");return u.map(h=>{let v;const k=h.trim();if(k.toLowerCase().startsWith("0x")?v=parseInt(k,16):k.length>1&&k.startsWith("0")&&!k.includes("8")&&!k.includes("9")?v=parseInt(k,8):v=parseInt(k,10),isNaN(v)||v<0||v>255)throw new Error("Invalid wildcard mask value");return(~v&255).toString()}).join(".")}const p=parseInt(n,10);if(!isNaN(p)&&p>=0&&p<=4294967295){const u=~p>>>0;return z(u)}throw new Error("Invalid wildcard mask format")},pt=_=>{if(isNaN(_)||_>4294967294||_<1)throw new Error("Available Size Invalid");let n=parseInt(`${Math.log(_)/Math.log(2)}`)+1;return Math.pow(2,n)-_<2&&(n+=1),32-n};class x{constructor(n="192.168.0.1",p="24"){L(this,"netmask");L(this,"ip","");!`${p}`.includes(".")&&parseInt(`${p}`,10)>32&&(p=z(parseInt(`${p}`,10))),n=N(n),p=N(p),this.netmask=new A(`${n}/${p}`),this.ip=`${z(M(n))}`}available(){return Math.max(this.netmask.size-2,0)}size(){return this.netmask.size}base(){return this.netmask.base}first(){return this.netmask.first}last(){return this.netmask.last}broadcast(){return this.netmask.broadcast||"-"}ipInfo(){return{ip:this.ip,long:`${M(this.ip)}`,ip2:F(this.ip,2),ip8:F(this.ip,8),ip16:F(this.ip,16)}}maskInfo(){const n=`${z(this.netmask.maskLong)}`;return{bit:`${this.netmask.bitmask}`,long:`${this.netmask.maskLong}`,mask:n,mask2:F(n,2),mask8:F(n,8),mask16:F(n,16),opposite:`${this.netmask.hostmask}`}}}const mt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ft={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}},dt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ct={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},kt={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},_t={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},It=tt({__name:"Ipv4",async setup(_){let n,p;const u=R(([n,p]=et(()=>Y({input:"192.168.0.1",mask:"24",maskMode:"mask",subnetOption:ot("text")},{paste:t=>/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)})),n=await n,p(),n));let c=y(!1),h=y(!1),v=y(254),k=y(""),i=y(new x),e=y(!1);const m=lt(()=>{const t=[];return i.value.netmask.forEach(a=>{t.push(a)}),st.formObject(t)}),o=()=>{u.current.mask=`${pt(v.value)}`,h.value=!1};return it(()=>({input:u.current.input,mask:u.current.mask,maskMode:u.current.maskMode}),({input:t,mask:a,maskMode:b})=>{k.value="";try{const $=b==="wildcard"?ut(a||"0.0.0.0"):a;i.value=new x(t,$),u.save()}catch($){k.value=$error($)}},{immediate:!0}),(t,a)=>{const b=g("HelpTip"),$=g("Input"),D=g("Select"),U=g("Icon"),C=g("Button"),E=g("Align"),I=g("Card"),W=g("Exception"),B=g("HeightResize"),j=g("Modal"),G=g("SerializeOutput"),X=g("ExtendPage"),q=g("InputNumber");return S(),at(nt,null,[l(E,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:d(()=>[l($,{size:"large",width:300,modelValue:s(u).current.input,"onUpdate:modelValue":a[1]||(a[1]=f=>s(u).current.input=f),label:t.$t("ipcalc_ip")},{suffix:d(()=>[l(b,{onClick:a[0]||(a[0]=f=>w(c)?c.value=!0:c=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),l(D,{size:"large",modelValue:s(u).current.maskMode,"onUpdate:modelValue":a[2]||(a[2]=f=>s(u).current.maskMode=f),options:[{label:t.$t("ipcalc_mask"),value:"mask"},{label:t.$t("ipcalc_wildcard"),value:"wildcard"}]},null,8,["modelValue","options"]),l($,{size:"large",width:220,modelValue:s(u).current.mask,"onUpdate:modelValue":a[5]||(a[5]=f=>s(u).current.mask=f)},{append:d(()=>[l(C,{onClick:a[3]||(a[3]=f=>w(h)?h.value=!0:h=!0)},{default:d(()=>[l(U,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:d(()=>[l(b,{onClick:a[4]||(a[4]=f=>w(c)?c.value=!0:c=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue"]),l(b,{link:"https://www.npmjs.com/package/netmask"})]),_:1}),s(k)===""?(S(),O(E,{key:0,direction:"vertical"},{default:d(()=>[l(I,{title:t.$t("ipcalc_ip_info"),padding:"0"},{extra:d(()=>[T(H(s(u).current.input),1)]),default:d(()=>[V("div",mt,[l(r,{title:t.$t("ipcalc_ip_info_ip10"),value:s(i).ipInfo().ip},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_ip_info_long"),value:s(i).ipInfo().long},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_ip_info_ip8"),value:s(i).ipInfo().ip8},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_ip_info_ip16"),value:s(i).ipInfo().ip16},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_ip_info_ip2"),value:s(i).ipInfo().ip2,style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title","value"])])]),_:1},8,["title"]),l(I,{title:t.$t("ipcalc_mask_info"),padding:"0"},{extra:d(()=>[T(H(s(u).current.mask),1)]),default:d(()=>[V("div",ft,[l(r,{title:t.$t("ipcalc_mask"),value:s(i).maskInfo().bit},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_mask"),value:s(i).maskInfo().mask},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_long"),value:s(i).maskInfo().long},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_opposite"),value:s(i).maskInfo().opposite},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_mask8"),value:s(i).maskInfo().mask8},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_mask16"),value:s(i).maskInfo().mask16},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_mask_info_mask2"),value:s(i).maskInfo().mask2,style:{"grid-column-start":"3","grid-column-end":"5"}},null,8,["title","value"])])]),_:1},8,["title"]),l(I,{title:t.$t("ipcalc_network_info"),padding:"0"},{extra:d(()=>[l(C,{type:"primary",size:"small",text:t.$t("ipcalc_subnet"),onClick:a[6]||(a[6]=f=>w(e)?e.value=!0:e=!0)},null,8,["text"])]),default:d(()=>[V("div",dt,[l(r,{title:t.$t("ipcalc_network_info_available"),value:s(i).available()},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_network_info_size"),value:s(i).size()},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_network_info_base"),value:s(i).base()},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_network_info_first"),value:s(i).first()},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_network_info_last"),value:s(i).last()},null,8,["title","value"]),l(r,{title:t.$t("ipcalc_network_info_broadcast"),value:s(i).broadcast()},null,8,["title","value"])])]),_:1},8,["title"])]),_:1})):P("",!0),s(k)!==""?(S(),O(B,{key:1,append:[".ctool-page-option"]},{default:d(()=>[l(W,{content:s(k)},null,8,["content"])]),_:1})):P("",!0),l(j,{title:t.$t("ipcalc_format"),modelValue:s(c),"onUpdate:modelValue":a[7]||(a[7]=f=>w(c)?c.value=f:c=f),width:"98%","footer-type":"normal"},{default:d(()=>[l(E,{direction:"vertical"},{default:d(()=>[l(I,{title:t.$t("ipcalc_ip"),padding:"0"},{default:d(()=>[V("div",ct,[l(r,{title:t.$t("ipcalc_ip_info_ip10"),value:"192.168.0.1"},null,8,["title"]),l(r,{title:t.$t("ipcalc_ip_info_long"),value:"3232235521"},null,8,["title"]),l(r,{title:t.$t("ipcalc_ip_info_ip8"),value:"0300.0250.0000.0001"},null,8,["title"]),l(r,{title:t.$t("ipcalc_ip_info_ip16"),value:"0xC0.0xA8.0x00.0x01"},null,8,["title"]),l(r,{title:t.$t("ipcalc_ip_info_ip2"),value:"0b11000000.0b10101000.0b00000000.0b00000001",style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title"])])]),_:1},8,["title"]),l(I,{title:t.$t("ipcalc_mask"),padding:"0"},{default:d(()=>[V("div",kt,[l(r,{title:t.$t("ipcalc_mask"),value:"24"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_long"),value:"4294967040"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask16"),value:"0xFF.0xFF.0xFF.0x00"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask8"),value:"0377.0377.0377.0000"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask"),value:"255.255.255.0"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b11111111.0b11111111.0b11111111.0b00000000",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"]),l(I,{title:t.$t("ipcalc_wildcard"),padding:"0"},{default:d(()=>[V("div",_t,[l(r,{title:t.$t("ipcalc_mask_info_mask"),value:"0.0.0.255"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_long"),value:"255"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask16"),value:"0x00.0x00.0x00.0xFF"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask8"),value:"0000.0000.0000.0377"},null,8,["title"]),l(r,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b00000000.0b00000000.0b00000000.0b11111111",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","modelValue"]),l(X,{modelValue:s(e),"onUpdate:modelValue":a[12]||(a[12]=f=>w(e)?e.value=f:e=f)},{default:d(()=>[l(I,{title:`${s(u).current.input} ${t.$t("ipcalc_subnet")}`,padding:"0"},{extra:d(()=>[l(E,null,{default:d(()=>[l($,{size:"small",width:200,modelValue:s(u).current.mask,"onUpdate:modelValue":a[11]||(a[11]=f=>s(u).current.mask=f),label:t.$t("ipcalc_mask")},{append:d(()=>[l(C,{onClick:a[9]||(a[9]=f=>w(h)?h.value=!0:h=!0)},{default:d(()=>[l(U,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:d(()=>[l(b,{onClick:a[10]||(a[10]=f=>w(c)?c.value=!0:c=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),default:d(()=>[l(B,{reduce:35},{default:d(({height:f})=>[l(G,{disabledBorder:"",modelValue:s(u).current.subnetOption,"onUpdate:modelValue":a[8]||(a[8]=J=>s(u).current.subnetOption=J),allow:["json","xml","yaml","toml","php_array","properties","text"],content:m.value,height:f},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(j,{title:t.$t("ipcalc_mask_set_title"),modelValue:s(h),"onUpdate:modelValue":a[14]||(a[14]=f=>w(h)?h.value=f:h=f),"footer-type":"long",onOk:o},{default:d(()=>[l(q,{size:"large",modelValue:s(v),"onUpdate:modelValue":a[13]||(a[13]=f=>w(v)?v.value=f:v=f),label:t.$t("ipcalc_network_info_available")},null,8,["modelValue","label"])]),_:1},8,["title","modelValue"])],64)}}});export{It as default};
